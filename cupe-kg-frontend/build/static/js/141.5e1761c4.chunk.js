"use strict";(self.webpackChunkcupe_kg_frontend=self.webpackChunkcupe_kg_frontend||[]).push([[141],{141:(t,a,e)=>{e.d(a,{UltraAccurateRoutePlanner:()=>i});class i{constructor(t,a){this.locations=t||[],this.routes=a||[],this.realDistanceMatrix={delhi:{jaipur:280,agra:233,varanasi:821,amritsar:460,hampi:1483,udaipur:421,khajuraho:620,"bodh-gaya":1105},jaipur:{delhi:280,udaipur:393,"taj-mahal":240,ajanta:739},"taj-mahal":{delhi:233,jaipur:240,khajuraho:295,varanasi:605},varanasi:{delhi:821,"bodh-gaya":250,khajuraho:298,kolkata:679,agra:605},"bodh-gaya":{varanasi:250,delhi:1105,kolkata:495,patna:135},hampi:{delhi:1483,madurai:440},madurai:{hampi:440,chennai:462,bangalore:460,kochi:257},amritsar:{delhi:460,chandigarh:230,shimla:350},udaipur:{jaipur:393,delhi:421,mumbai:734,ajanta:451},konark:{bhubaneswar:65,kolkata:380,delhi:1108},ajanta:{ellora:95,mumbai:440,pune:240,udaipur:451},ellora:{ajanta:95,mumbai:380,pune:220}},this.transportationCosts={flight:3.5,train:.75,bus:.45,car:12},this.accommodationCosts={delhi:{low:1200,medium:3500,high:8500},jaipur:{low:800,medium:2500,high:6500},"taj-mahal":{low:900,medium:2800,high:7e3},varanasi:{low:600,medium:1800,high:4500},amritsar:{low:700,medium:2e3,high:5e3},udaipur:{low:1e3,medium:3200,high:8e3},hampi:{low:500,medium:1500,high:3500},madurai:{low:600,medium:1800,high:4e3},"bodh-gaya":{low:400,medium:1200,high:2800},konark:{low:600,medium:1600,high:3500},mahabalipuram:{low:800,medium:2200,high:5500},ajanta:{low:600,medium:1600,high:3800},ellora:{low:600,medium:1600,high:3800},khajuraho:{low:700,medium:2e3,high:4500}},this.seasonalData={winter:{months:["Oct","Nov","Dec","Jan","Feb","Mar"],bestRegions:["north","central","west","south"],temperature:{min:10,max:25},rainfall:"minimal"},summer:{months:["Apr","May","Jun"],bestRegions:["hills","north-east"],avoidRegions:["rajasthan","central"],temperature:{min:25,max:45},rainfall:"none"},monsoon:{months:["Jul","Aug","Sep"],bestRegions:["western-ghats","caves"],temperature:{min:20,max:30},rainfall:"heavy"}}}createUltraAccurateRoute(t){console.log("Creating ultra-accurate route with preferences:",t);const{interests:a=[],max_travel_days:e=7,budget_range:i="medium",start_location:o=null,transport_mode:n="car",max_distance_km:r=500}=t;let s=this.filterLocationsByInterests(a);if(console.log("Candidate locations found:",s.length),0===s.length)throw new Error("No locations found matching your interests");if(o&&r&&(s=this.filterLocationsByDistance(s,o,r),console.log(`Locations within ${r}km:`,s.length),0===s.length))throw new Error(`No locations found within ${r}km of your starting point. Try increasing the distance limit.`);const l=this.optimizePath(s,o,e,r);if(console.log("Optimized path created:",l.length,"locations"),0===l.length)throw new Error("Could not create an optimized path with your preferences");return this.createDetailedItinerary(l,n,i)}filterLocationsByInterests(t){if(!t||0===t.length)return this.locations.slice(0,8);const a=this.locations.filter((a=>{const e=a.tags||[],i=a.category||"",o=a.description||"";return t.some((t=>e.some((a=>a.toLowerCase().includes(t.toLowerCase())))||i.toLowerCase().includes(t.toLowerCase())||o.toLowerCase().includes(t.toLowerCase())))}));if(a.length<3){const t=this.locations.filter((t=>["taj-mahal","delhi","jaipur","varanasi","hampi"].includes(t.id)));return[...a,...t].slice(0,8)}return a.slice(0,10)}filterLocationsByDistance(t,a,e){if(!a||!e)return t;return t.filter((t=>{const i=this.getLocationCoordinates(t),o=this.calculateHaversineDistance(a,i);return console.log(`Distance from start to ${t.name}: ${o}km (max: ${e}km)`),o<=e}))}optimizePath(t,a,e){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t||0===t.length)return[];const o=Math.min(t.length,Math.ceil(e/1.5)),n=t.slice(0,o);if(n.length<=1)return n;const r=this.nearestNeighborPath(n,a,i,o);if(r.length<=2)return r;const s=this.twoOptImprovement(r,a);return console.log("Route optimization: Initial distance:",this.calculateTotalDistance(r),"km, Improved distance:",this.calculateTotalDistance(s),"km"),s}nearestNeighborPath(t,a,e,i){const o=[],n=[...t];let r;r=a?this.findNearestLocation(n,a):n[0],o.push(r);const s=n.indexOf(r);for(n.splice(s,1);n.length>0&&o.length<i;){const t=this.getLocationCoordinates(r);let i=null,s=1/0;if(n.forEach((o=>{const n=this.getLocationCoordinates(o),r=this.calculateHaversineDistance(t,n);if(e&&a){if(this.calculateHaversineDistance(a,n)>e)return}r<s&&(s=r,i=o)})),!i)break;{o.push(i),r=i;const t=n.indexOf(i);n.splice(t,1)}}return o}twoOptImprovement(t,a){if(t.length<4)return t;let e=!0,i=[...t],o=0;for(;e&&o<100;){e=!1,o++;for(let t=0;t<i.length-2;t++){for(let o=t+2;o<i.length;o++){if(a&&0===t&&o===i.length-1)continue;const n=this.twoOptSwap(i,t,o),r=this.calculateTotalDistance(i);if(this.calculateTotalDistance(n)<r){i=n,e=!0;break}}if(e)break}}return console.log(`2-Opt completed in ${o} iterations`),i}twoOptSwap(t,a,e){const i=[...t];for(;a+1<e;)a++,[i[a],i[e]]=[i[e],i[a]],e--;return i}findNearestLocation(t,a){let e=t[0],i=1/0;return t.forEach((t=>{const o=this.getLocationCoordinates(t),n=this.calculateHaversineDistance(a,o);n<i&&(i=n,e=t)})),e}getLocationCoordinates(t){if(t.coordinates){if("object"===typeof t.coordinates&&t.coordinates.lat)return{lat:t.coordinates.lat,lng:t.coordinates.lng};if(Array.isArray(t.coordinates))return{lat:t.coordinates[0],lng:t.coordinates[1]}}return{lat:28.6139,lng:77.209}}calculateHaversineDistance(t,a){const e=t.lat||t[0]||0,i=t.lng||t[1]||0,o=a.lat||a[0]||0,n=a.lng||a[1]||0,r=(o-e)*Math.PI/180,s=(n-i)*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return Math.round(6371*c)}createDetailedItinerary(t,a,e){const i=[];let o=1,n=0;for(let r=0;r<t.length;r++){const s=t[r],l=t[r+1],c=this.getOptimalDaysAtLocation(s),h=this.getAccommodationCost(s.id||s.name,e)+this.getFoodCost(e)+this.getLocalTransportCost();for(let t=0;t<c;t++){const a=this.generateDayActivity(s,t,e);i.push({day:o+t,location:s.name,type:"exploration",description:a.description,highlights:a.highlights,costs:{accommodation:this.getAccommodationCost(s.id||s.name,e),food:this.getFoodCost(e),localTransport:this.getLocalTransportCost(),attractions:a.attractionCosts,total:h+a.attractionCosts},culturalInsights:this.getCulturalInsights(s),practicalTips:this.getPracticalTips(s)}),n+=h+a.attractionCosts}if(o+=c,l){const t=this.getAccurateTravelDetails(s,l,a);i.push({day:o,location:`${s.name} to ${l.name}`,type:"travel",description:`Travel from ${s.name} to ${l.name} via ${t.mode}`,travelDetails:t,costs:{transport:t.cost,food:t.mealCost||0,total:t.cost+(t.mealCost||0)}}),n+=t.cost+(t.mealCost||0),o++}}return{id:`ultra-accurate-${Date.now()}`,name:"Your Culturally Intelligent Route",description:`Scientifically optimized ${t.length}-destination route with cultural depth`,color:"#2196F3",path:t.map((t=>{const a=this.getLocationCoordinates(t);return[a.lat,a.lng]})),locations:t.map((t=>{const a=this.getLocationCoordinates(t);return{name:t.name,coordinates:[a.lat,a.lng],description:t.description||"Cultural heritage site"}})),detailedItinerary:i,totalCost:Math.round(n),totalDays:o-1,culturalThemes:this.extractCulturalThemes(t),optimizationMetrics:{totalDistance:this.calculateTotalDistance(t),culturalDiversity:this.calculateCulturalDiversity(t),costEfficiency:this.calculateCostEfficiency(n,t.length)}}}getOptimalDaysAtLocation(t){var a;const e=(null===(a=t.name)||void 0===a?void 0:a.toLowerCase())||"";if(["delhi","rajasthan","taj mahal","varanasi","hampi"].some((t=>e.includes(t))))return 3;return["ajanta","ellora","khajuraho","konark"].some((t=>e.includes(t))),2}getAccommodationCost(t,a){const e=(null===t||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"-"))||"default",i=this.accommodationCosts[e]||{low:800,medium:2500,high:6e3};return i[a]||i.medium}getFoodCost(t){const a={low:800,medium:1500,high:3e3};return a[t]||a.medium}getLocalTransportCost(){return 500}generateDayActivity(t,a,e){const i=this.getLocationAttractions(t.id||t.name).slice(2*a,2*(a+1));return{description:`Day ${a+1} in ${t.name}: ${i.map((t=>t.name)).join(", ")}`,highlights:i,attractionCosts:i.reduce(((t,a)=>t+(a.entryCost||0)),0)}}getLocationAttractions(t){return{delhi:[{name:"Red Fort",entryCost:35,time:"3 hours"},{name:"India Gate",entryCost:0,time:"1 hour"},{name:"Qutub Minar",entryCost:30,time:"2 hours"},{name:"Lotus Temple",entryCost:0,time:"1 hour"}],"taj-mahal":[{name:"Taj Mahal",entryCost:50,time:"4 hours"},{name:"Agra Fort",entryCost:40,time:"3 hours"},{name:"Mehtab Bagh",entryCost:25,time:"2 hours"}],jaipur:[{name:"Amber Fort",entryCost:25,time:"4 hours"},{name:"City Palace",entryCost:30,time:"3 hours"},{name:"Hawa Mahal",entryCost:15,time:"1 hour"}]}[(null===t||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"-"))||"default"]||[{name:"Main Attraction",entryCost:25,time:"3 hours"},{name:"Local Temple",entryCost:10,time:"2 hours"},{name:"Cultural Site",entryCost:20,time:"2 hours"}]}getAccurateTravelDetails(t,a,e){const i=this.getLocationCoordinates(t),o=this.getLocationCoordinates(a),n=this.calculateHaversineDistance(i,o),r=e||"car",s=n*(this.transportationCosts[r]||this.transportationCosts.car),l={car:60,train:80,bus:50,flight:500},c=l[r]||l.car,h=Math.ceil(n/c);return{mode:r,distance:n,duration:`${h} hours`,cost:Math.round(s),mealCost:h>4?300:0}}getCulturalInsights(t){return["Rich cultural heritage dating back centuries",`Architectural significance in ${t.dynasty||"regional"} style`,"Important pilgrimage and tourism destination"]}getPracticalTips(t){return["Best visited early morning or late afternoon","Respect local customs and dress codes","Hire local guides for deeper insights","Carry water and comfortable walking shoes"]}extractCulturalThemes(t){const a=new Set;return t.forEach((t=>{t.dynasty&&a.add(t.dynasty),t.category&&a.add(t.category),t.tags&&t.tags.forEach((t=>a.add(t)))})),Array.from(a)}calculateTotalDistance(t){let a=0;for(let e=0;e<t.length-1;e++){const i=this.getLocationCoordinates(t[e]),o=this.getLocationCoordinates(t[e+1]);a+=this.calculateHaversineDistance(i,o)}return a}calculateCulturalDiversity(t){const a=this.extractCulturalThemes(t);return Math.min(10*a.length,100)}calculateCostEfficiency(t,a){const e=t/a;return e<5e3?"High":e<8e3?"Medium":"Low"}}}}]);
//# sourceMappingURL=141.5e1761c4.chunk.js.map