:root{--primary-color:#3f51b5;--primary-light:#7986cb;--primary-dark:#303f9f;--accent-color:#ff4081;--accent-light:#ff80ab;--accent-dark:#c51162;--text-primary:#212121;--text-secondary:#757575;--text-hint:#bdbdbd;--background-light:#fff;--background-off-white:#f5f5f5;--background-dark:#1e1e28;--background-dark-lighter:#2d2d3a;--success-color:#4caf50;--warning-color:#ff9800;--error-color:#f44336;--info-color:#2196f3;--border-light:#e0e0e0;--border-dark:#444;--shadow-light:0 2px 10px #0000001a;--shadow-medium:0 4px 20px #00000026;--shadow-dark:0 8px 30px #0003;--font-family:"Segoe UI","Roboto","Helvetica Neue",Arial,sans-serif;--font-size-xs:12px;--font-size-sm:14px;--font-size-md:16px;--font-size-lg:18px;--font-size-xl:24px;--font-size-xxl:32px;--spacing-xs:4px;--spacing-sm:8px;--spacing-md:16px;--spacing-lg:24px;--spacing-xl:32px;--spacing-xxl:48px;--radius-sm:4px;--radius-md:8px;--radius-lg:16px;--radius-xl:24px;--radius-round:50%;--animation-fast:0.2s;--animation-normal:0.3s;--animation-slow:0.5s;--z-base:1;--z-above:10;--z-modal:100;--z-popup:200;--z-overlay:300;--z-tooltip:400}*{box-sizing:border-box;margin:0;padding:0}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#fff;background-color:var(--background-light);color:#212121;color:var(--text-primary);font-family:Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-family:var(--font-family);font-size:16px;font-size:var(--font-size-md);line-height:1.5}.app{display:flex;flex-direction:column;min-height:100vh}.light-theme{--text-primary:#212121;--text-secondary:#757575;--background-color:#fff;--card-background:#fff;--border-color:#e0e0e0}.dark-theme{--text-primary:#f5f5f5;--text-secondary:#b0b0b0;--background-color:#1e1e28;--card-background:#2d2d3a;--border-color:#444}body.dark-theme{background-color:#1e1e28;background-color:var(--background-dark);color:#212121;color:var(--text-primary)}@media (max-width:576px){:root{--font-size-md:14px;--font-size-lg:16px;--font-size-xl:20px;--font-size-xxl:24px;--spacing-lg:20px;--spacing-xl:28px;--spacing-xxl:36px}}.fade-in{animation:fadeIn var(--animation-normal) ease forwards}.fade-in-up{animation:fadeInUp var(--animation-normal) ease forwards}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.fade-in-down{animation:fadeInDown var(--animation-normal) ease forwards}.slide-in-right{animation:slideInRight var(--animation-normal) ease forwards}.slide-in-left{animation:slideInLeft var(--animation-normal) ease forwards}.pulse{animation:pulse 2s ease infinite}.bounce{animation:bounce 2s ease infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.rotate{animation:rotate 2s linear infinite}@keyframes zoomIn{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.zoom-in{animation:zoomIn var(--animation-normal) ease forwards}@keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(1.5)}}.ripple{overflow:hidden;position:relative}.ripple:after{animation:ripple .6s linear;background:#ffffff4d;border-radius:50%;content:"";height:100%;opacity:0;position:absolute;transform:scale(0);width:100%}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.shimmer{animation:shimmer 1.5s infinite;background:linear-gradient(90deg,#fff0,#fff3 50%,#fff0);background-size:200% 100%}@keyframes dashAnimation{to{stroke-dashoffset:0}}.animated-path{stroke-dasharray:1000;stroke-dashoffset:1000;animation:dashAnimation 2s linear forwards}.delay-short{animation-delay:.2s}.delay-medium{animation-delay:.5s}.delay-long{animation-delay:.8s}.leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{left:0;position:absolute;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-drag:none;-webkit-user-select:none;user-select:none}.leaflet-tile::selection{background:#0000}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{height:1600px;-webkit-transform-origin:0 0;width:1600px}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-height:none!important;max-width:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-height:none!important;max-width:none!important;padding:0;width:auto}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{box-sizing:border-box;height:0;width:0;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{height:1px;width:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{pointer-events:visiblePainted;pointer-events:auto;position:relative;z-index:800}.leaflet-bottom,.leaflet-top{pointer-events:none;position:absolute;z-index:1000}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{clear:both;float:left}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{background:#ffffff80;border:2px dotted #38f}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{border-radius:4px;box-shadow:0 1px 5px #000000a6}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;color:#000;display:block;height:26px;line-height:26px;text-align:center;text-decoration:none;width:26px}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:focus,.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-bar a.leaflet-disabled{background-color:#f4f4f4;color:#bbb;cursor:default}.leaflet-touch .leaflet-bar a{height:30px;line-height:30px;width:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{background:#fff;border-radius:5px;box-shadow:0 1px 5px #0006}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);height:36px;width:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{height:44px;width:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{background:#fff;color:#333;padding:6px 10px 6px 6px}.leaflet-control-layers-scrollbar{overflow-x:hidden;overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{border-top:1px solid #ddd;height:0;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{color:#333;line-height:1.4;padding:0 5px}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:focus,.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;height:.6669em;vertical-align:initial!important;width:1em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{background:#fffc;border:2px solid #777;border-top:none;box-sizing:border-box;line-height:1.1;padding:2px 5px 1px;text-shadow:1px 1px #fff;white-space:nowrap}.leaflet-control-scale-line:not(:first-child){border-bottom:none;border-top:2px solid #777;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{background-clip:padding-box;border:2px solid #0003}.leaflet-popup{margin-bottom:20px;position:absolute;text-align:center}.leaflet-popup-content-wrapper{border-radius:12px;padding:1px;text-align:left}.leaflet-popup-content{font-size:13px;font-size:1.08333em;line-height:1.3;margin:13px 24px 13px 20px;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{height:20px;left:50%;margin-left:-20px;margin-top:-1px;overflow:hidden;pointer-events:none;position:absolute;width:40px}.leaflet-popup-tip{height:17px;margin:-10px auto 0;padding:1px;pointer-events:auto;transform:rotate(45deg);width:17px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px #0006;color:#333}.leaflet-container a.leaflet-popup-close-button{background:#0000;border:none;color:#757575;font:16px/24px Tahoma,Verdana,sans-serif;height:24px;position:absolute;right:0;text-align:center;text-decoration:none;top:0;width:24px}.leaflet-container a.leaflet-popup-close-button:focus,.leaflet-container a.leaflet-popup-close-button:hover{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678);margin:0 auto;width:24px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 1px 3px #0006;color:#222;padding:6px;pointer-events:none;position:absolute;-webkit-user-select:none;user-select:none;white-space:nowrap}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{background:#0000;border:6px solid #0000;content:"";pointer-events:none;position:absolute}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{border-top-color:#fff;bottom:0;margin-bottom:-12px}.leaflet-tooltip-bottom:before{border-bottom-color:#fff;margin-left:-6px;margin-top:-12px;top:0}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{margin-top:-6px;top:50%}.leaflet-tooltip-left:before{border-left-color:#fff;margin-right:-12px;right:0}.leaflet-tooltip-right:before{border-right-color:#fff;left:0;margin-left:-12px}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.custom-marker{transition:all .3s ease}.marker-container{align-items:center;display:flex;justify-content:center;position:relative}.marker-pulse{animation:pulse 2s infinite;border:2px solid;border-radius:50%;height:100%;left:0;opacity:.7;position:absolute;top:0;width:100%}@keyframes pulse{0%{opacity:.7;transform:scale(1)}70%{opacity:0;transform:scale(1.5)}to{opacity:0;transform:scale(1.5)}}.bounce-animation{animation:bounce .8s ease}@keyframes bounce{0%,to{transform:translateY(0)}40%{transform:translateY(-20px)}60%{transform:translateY(-10px)}}.location-tooltip{background-color:#ffffffe6;border:none;border-radius:8px;box-shadow:0 4px 15px #00000026;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;padding:6px 12px;transform-origin:bottom center;transition:all .3s ease}.location-tooltip.selected{background-color:#fff;box-shadow:0 6px 20px #0003;transform:scale(1.05)}.tooltip-content{align-items:center;display:flex;flex-direction:column}.location-name{color:#333}.location-hint{color:#666;font-size:11px;font-style:italic;margin-top:3px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{display:none!important}.info-panel{background-color:#fff;box-shadow:-5px 0 25px #0003;display:flex;flex-direction:column;height:100%;overflow:hidden;position:absolute;right:0;top:0;transform:translateX(100%);transition:transform .3s cubic-bezier(.4,0,.2,1);width:400px;z-index:1200}.info-panel.open{transform:translateX(0)}.info-panel.animate-in{animation:slideInRight .3s forwards}.info-panel.animate-out{animation:slideOutRight .3s forwards}.info-panel.tab-change .tab-content{animation:fadeOut .15s forwards}@keyframes slideOutRight{0%{transform:translateX(0)}to{transform:translateX(100%)}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.panel-header{border:none;flex-shrink:0;height:280px;margin:0;outline:none;overflow:hidden;padding:0;position:relative}.location-image-container{background:#1a1a1a;bottom:0;height:100%;left:0;margin:0!important;overflow:hidden;padding:0!important;position:absolute;right:0;top:0;width:100%}.location-image,.location-image-container,.location-image-container:focus{border:none!important;box-shadow:none!important;outline:none!important}.location-image{display:block;height:100%;object-fit:cover;object-position:center;opacity:0;transform:scale(1.02);transition:opacity .6s ease,transform .6s ease;width:100%}.location-image:focus{border:none!important;box-shadow:none!important;outline:none!important}.location-image.loaded{opacity:1;transform:scale(1)}.image-overlay{background:linear-gradient(180deg,#0003 0,#0006 40%,#000000bf);bottom:0;left:0;pointer-events:none;position:absolute;right:0;top:0;z-index:5}.location-title{bottom:20px;font-size:28px;font-weight:700;left:20px;line-height:1.2;margin:0;text-shadow:0 4px 8px #000c}.close-button,.location-title{color:#fff;position:absolute;right:20px;z-index:10}.close-button{align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:#00000080;border:2px solid #ffffff4d;border-radius:50%;cursor:pointer;display:flex;font-size:24px;font-weight:300;height:40px;justify-content:center;top:20px;transition:all .3s ease;width:40px}.close-button:hover{background-color:#0009;border-color:#fff6;box-shadow:0 4px 12px #0000004d;transform:scale(1.1)}.panel-tabs{background-color:#fff;border-bottom:2px solid #eee;display:flex;flex-shrink:0;margin:0;padding:0}.tab-button{background:none;border:none;color:#666;cursor:pointer;flex:1 1;font-size:14px;font-weight:500;padding:15px 0;position:relative;transition:all .2s ease}.tab-button:after{background-color:#3f51b5;bottom:0;content:"";height:3px;left:0;position:absolute;transform:scaleX(0);transition:transform .3s ease;width:100%}.tab-button.active{color:#3f51b5}.tab-button.active:after{transform:scaleX(1)}.panel-content{flex:1 1;overflow-y:auto;padding:24px}.loading-spinner{align-items:center;display:flex;flex-direction:column;height:200px;justify-content:center}.spinner{border:4px solid #f3f3f3;border-top-color:#3f51b5;height:40px;margin-bottom:15px;width:40px}.tab-content,.tab-content.animate-in{animation:fadeIn .3s ease forwards}.tab-content h3{color:#333;font-size:20px;margin-bottom:15px;margin-top:0}.time-period{background-color:#f5f5f5;border-radius:8px;margin-top:20px;padding:15px}.time-period h4{color:#555;font-size:16px;margin-bottom:10px;margin-top:0}.time-period-info{display:flex;justify-content:space-between}.period{color:#3f51b5;font-weight:500}.dynasty{color:#666;font-style:italic}.culture-facts{list-style-type:none;margin:0;padding:0}.culture-facts li{animation:fadeIn .5s forwards;margin-bottom:12px;opacity:0;padding-left:20px;position:relative}.culture-facts li:before{color:#3f51b5;content:"•";font-size:18px;left:0;position:absolute;top:-2px}.story-container{display:flex;flex-direction:column;gap:20px}.story{animation:fadeIn .5s forwards;background-color:#f9f9f9;border-left:4px solid #3f51b5;border-radius:10px;opacity:0;padding:15px}.story h4{color:#333;margin-bottom:10px;margin-top:0}.story p{color:#555;line-height:1.5;margin:0}.panel-footer{align-items:center;background-color:#fafafa;border-top:1px solid #eee;display:flex;justify-content:space-between;padding:20px 24px}.tags{display:flex;flex-wrap:wrap;gap:8px}.tag{background-color:#e0e0e0;border-radius:16px;color:#555;font-size:12px;padding:4px 10px}.footer-buttons{align-items:center;display:flex;gap:12px}.explore-more-btn{background-color:#3f51b5;border:none;border-radius:22px;color:#fff;cursor:pointer;font-size:14px;font-weight:500;padding:10px 18px;transition:all .3s ease}.explore-more-btn:hover{background-color:#303f9f;box-shadow:0 6px 16px #3f51b54d;transform:translateY(-2px)}.ci-trigger-btn{background-color:#f5f5f5;border:1px solid #ddd;border-radius:20px;color:#666;cursor:pointer;font-size:13px;padding:8px 12px;transition:all .3s ease}.ci-trigger-btn:hover{background-color:#e8e8e8;border-color:#bbb;transform:translateY(-1px)}.location-image.error{filter:grayscale(100%) blur(1px);opacity:.3}.image-error-overlay{-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:#ffffffe6;border:1px solid #0000001a;border-radius:12px;color:#555;left:50%;padding:20px;position:absolute;text-align:center;top:50%;transform:translate(-50%,-50%);z-index:2}.error-icon{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1));font-size:42px;margin-bottom:8px;opacity:.8}.error-text{color:#666;font-size:15px;font-weight:600;text-shadow:none}@media (max-width:768px){.panel-header{height:180px}.error-icon{font-size:36px}.error-text{font-size:14px}}.stagger-delay-1{animation-delay:.1s}.stagger-delay-2{animation-delay:.2s}.stagger-delay-3{animation-delay:.3s}.stagger-delay-4{animation-delay:.4s}.stagger-delay-5{animation-delay:.5s}.dark-theme .info-panel{background-color:#1e1e1e;box-shadow:-5px 0 25px #000c}.dark-theme .panel-tabs{border-bottom:1px solid #333}.dark-theme .tab-button{color:#aaa}.dark-theme .tab-button.active{color:#7c8bff}.dark-theme .tab-button:after{background-color:#7c8bff}.dark-theme .tab-content h3{color:#e0e0e0}.dark-theme .tab-content p{color:#b0b0b0}.dark-theme .culture-facts li{color:#d0d0d0}.dark-theme .culture-facts li:before{color:#7c8bff}.dark-theme .time-period{background-color:#2a2a2a}.dark-theme .time-period h4{color:#b0b0b0}.dark-theme .period{color:#7c8bff}.dark-theme .dynasty{color:#999}.dark-theme .story{background-color:#2a2a2a;border-left:4px solid #7c8bff}.dark-theme .story h4{color:#e0e0e0}.dark-theme .story p{color:#b0b0b0}.dark-theme .panel-footer{background-color:#1a1a1a;border-top:1px solid #333}.dark-theme .tag{background-color:#2a2a2a;color:#aaa}.dark-theme .explore-more-btn{background-color:#5566d6}.dark-theme .explore-more-btn:hover{background-color:#7c8bff;box-shadow:0 6px 16px #7c8bff66}.dark-theme .ci-trigger-btn{background-color:#2a2a2a;border:1px solid #444;color:#aaa}.dark-theme .ci-trigger-btn:hover{background-color:#333;border-color:#666}.dark-theme .image-error-overlay{background:#1e1e1ee6;border:1px solid #ffffff1a}.dark-theme .error-text{color:#aaa}@media (max-width:768px){.info-panel{width:100%}}.map-container{height:100vh;overflow:hidden;position:relative;width:100%}.map{height:100%;width:100%;z-index:1}.map-controls{align-items:center;bottom:30px;display:flex;flex-direction:column;gap:12px;left:50%;position:absolute;transform:translateX(-50%);z-index:1000}.control-btn{background-color:#ffffffd9;border:none;border-radius:8px;box-shadow:0 4px 12px #00000026;color:#333;cursor:pointer;font-size:14px;font-weight:500;padding:10px 16px;transition:all .3s ease}.control-btn:hover{background-color:#fffffff2;box-shadow:0 6px 16px #0000002e;transform:translateY(-2px)}.home-btn{align-items:center;background-color:#fff;border-radius:50%;box-shadow:0 4px 12px #0003;display:flex;height:45px;justify-content:center;margin-bottom:8px;width:45px}.home-btn:hover{transform:scale(1.1)}.control-btn.active{background-color:#3f51b5;color:#fff}@media (max-width:768px){.control-btn{font-size:12px;padding:8px 12px}}.leaflet-marker-icon{animation:fadeIn .5s ease-out}.leaflet-control-zoom{border-radius:8px!important;box-shadow:0 4px 12px #00000026!important;overflow:hidden}.leaflet-control-zoom a{background-color:#ffffffe6!important;color:#333!important;transition:all .2s ease}.leaflet-control-zoom a:hover{background-color:#f5f5f5!important;color:#000!important}.language-switcher{display:inline-block;position:relative}.language-switcher-button{align-items:center;background:#fff;background:var(--background-color,#fff);border:1px solid #ddd;border:1px solid var(--border-color,#ddd);border-radius:8px;color:#333;color:var(--text-color,#333);cursor:pointer;display:flex;font-size:14px;gap:6px;padding:8px 12px;transition:all .2s ease;white-space:nowrap}.language-switcher-button:hover{background:#f5f5f5;background:var(--hover-background,#f5f5f5);border-color:#3f51b5;border-color:var(--primary-color,#3f51b5)}.language-switcher-button:active{transform:scale(.98)}.language-flag{font-size:18px;line-height:1}.language-name{font-weight:500}.dropdown-arrow{transition:transform .2s ease}.dropdown-arrow.open{transform:rotate(180deg)}.language-dropdown{animation:fadeIn .2s ease;background:#fff;background:var(--background-color,#fff);border:1px solid #ddd;border:1px solid var(--border-color,#ddd);border-radius:12px;box-shadow:0 4px 12px #0000001a;min-width:200px;overflow:hidden;position:absolute;right:0;top:calc(100% + 8px);z-index:1000}.language-option{align-items:center;background:#0000;border:none;color:#333;color:var(--text-color,#333);cursor:pointer;display:flex;font-size:14px;gap:10px;padding:12px 16px;text-align:left;transition:background .2s ease;width:100%}.language-option:hover{background:#f5f5f5;background:var(--hover-background,#f5f5f5)}.language-option.active{background:#3f51b51a;background:var(--primary-light,#3f51b51a);color:#3f51b5;color:var(--primary-color,#3f51b5);font-weight:600}.language-option .language-name{flex:1 1}.check-icon{color:#3f51b5;color:var(--primary-color,#3f51b5)}.dark-theme .language-switcher-button{background:#2c2c2c;background:var(--dark-background,#2c2c2c);border-color:#444;border-color:var(--dark-border,#444);color:#e0e0e0;color:var(--dark-text,#e0e0e0)}.dark-theme .language-switcher-button:hover{background:#383838;background:var(--dark-hover,#383838);border-color:#5c6bc0;border-color:var(--primary-color,#5c6bc0)}.dark-theme .language-dropdown{background:#2c2c2c;background:var(--dark-background,#2c2c2c);border-color:#444;border-color:var(--dark-border,#444);box-shadow:0 4px 12px #0000004d}.dark-theme .language-option{color:#e0e0e0;color:var(--dark-text,#e0e0e0)}.dark-theme .language-option:hover{background:#383838;background:var(--dark-hover,#383838)}.dark-theme .language-option.active{background:#5c6bc033;color:#7986cb;color:var(--primary-color,#7986cb)}@media (max-width:768px){.language-switcher-button{font-size:13px;padding:6px 10px}.language-name{display:none}.language-dropdown{left:auto;right:0}}@media (max-width:480px){.language-switcher-button .language-name{display:none}}.top-nav{align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff5;box-shadow:0 4px 16px #0f172a14;display:flex;gap:1.5rem;justify-content:space-between;padding:.75rem 2.5rem;position:sticky;top:0;z-index:1100}.nav-left{align-items:baseline;display:flex;gap:.5rem;min-width:200px}.logo{color:#2563eb;font-size:1.4rem;font-weight:700;letter-spacing:.5px}.logo-subtitle{color:#6b7280;font-size:.8rem;font-weight:400;white-space:nowrap}.nav-center{flex:1 1;margin:0 2rem;max-width:540px}.search-form{position:relative;width:100%}.search-input{background:#fff;border:1px solid #e5e7eb;border-radius:999px;font-size:.9rem;padding:.6rem 2.5rem .6rem 1rem;transition:all .2s ease;width:100%}.search-input:focus{border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a;outline:none}.search-button{align-items:center;background:none;border:none;border-radius:50%;cursor:pointer;display:flex;height:32px;justify-content:center;position:absolute;right:5px;top:50%;transform:translateY(-50%);transition:background .2s;width:32px}.search-button:hover{background:#0000000d}.search-icon{fill:#6b7280;height:18px;width:18px}.search-button.searching .search-icon{fill:#2563eb}.search-icon.spinning{animation:spin 1s linear infinite}.btn-primary,.nav-right{align-items:center;display:flex;gap:.5rem}.btn-primary{background:linear-gradient(135deg,#ec4899,#f97316);border:none;border-radius:999px;box-shadow:0 2px 8px #ec489940;color:#fff;cursor:pointer;font-size:.9rem;font-weight:600;padding:.6rem 1.3rem;transition:all .3s ease}.btn-primary:hover{box-shadow:0 4px 12px #ec489959;transform:translateY(-1px)}.btn-primary:active{transform:translateY(0)}.btn-primary svg{height:18px;width:18px}.btn-ghost,.btn-ghost-alt{background:#fff;border:1px solid #e5e7eb;border-radius:999px;color:#374151;cursor:pointer;font-size:.85rem;font-weight:500;padding:.55rem 1.1rem;transition:all .2s ease}.btn-ghost:hover{background:#f9fafb;border-color:#d1d5db}.btn-ghost.active{background:#dbeafe;border-color:#93c5fd;color:#1e40af}.btn-ghost:disabled{cursor:not-allowed;opacity:.5}.btn-ghost-alt{background:#eef2ff;border-color:#e0e7ff;color:#4f46e5}.btn-ghost-alt:hover{background:#e0e7ff;border-color:#c7d2fe}.nav-divider{background:#e5e7eb;height:24px;margin:0 .25rem;width:1px}.theme-toggle{align-items:center;background:#fff;border:1px solid #e5e7eb;border-radius:50%;cursor:pointer;display:flex;font-size:1.1rem;height:36px;justify-content:center;transition:all .2s ease;width:36px}.theme-toggle:hover{background:#f9fafb;border-color:#d1d5db}.menu-toggle{background:none;border:none;cursor:pointer;display:none;height:40px;position:relative;width:40px}.menu-icon,.menu-icon:after,.menu-icon:before{background-color:#374151;border-radius:2px;display:block;height:3px;left:50%;margin-left:-12px;position:absolute;transition:all .2s ease-in-out;width:24px}.menu-icon{margin-top:-1.5px;top:50%}.menu-icon:after,.menu-icon:before{content:""}.menu-icon:before{top:-8px}.menu-icon:after{bottom:-8px}.nav-menu{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff5;border-bottom:1px solid #e5e7eb;display:flex;font-size:.9rem;gap:1.5rem;padding:.6rem 2.5rem .8rem}.nav-link{background:none;border:none;color:#6b7280;cursor:pointer;font-size:.9rem;font-weight:500;padding:.3rem 0;position:relative;transition:color .2s ease}.nav-link:hover{color:#111827}.nav-link.active{color:#111827;font-weight:600}.nav-link.active:after{background:#2563eb;border-radius:999px;bottom:0;content:"";height:2px;left:0;position:absolute;width:40%}.contact-popup-overlay{align-items:center;animation:fadeIn .2s ease-out;background-color:#00000080;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:2000}.contact-popup{animation:slideIn .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 40px #00000026;max-height:90vh;max-width:400px;overflow-y:auto;width:90%}.contact-popup-header{align-items:center;border-bottom:1px solid #eee;display:flex;justify-content:space-between;padding:20px 24px 16px}.contact-popup-header h3{color:#111827;font-size:18px;font-weight:600;margin:0}.close-popup-btn{align-items:center;background:none;border:none;border-radius:50%;color:#6b7280;cursor:pointer;display:flex;font-size:24px;height:32px;justify-content:center;padding:0;transition:all .2s ease;width:32px}.close-popup-btn:hover{background-color:#f3f4f6;color:#111827}.contact-popup-content{padding:24px}.contact-popup-content p{color:#374151;font-size:16px;line-height:1.6;margin:0;text-align:center}@keyframes slideIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.dark-theme .top-nav{background:#1e1e28f5;box-shadow:0 4px 16px #0000004d}.dark-theme .logo{color:#7c8bff}.dark-theme .logo-subtitle{color:#9ca3af}.dark-theme .search-input{background:#32323ccc;border-color:#4b5563;color:#fff}.dark-theme .search-input:focus{border-color:#7c8bff;box-shadow:0 0 0 3px #7c8bff33}.dark-theme .search-icon{fill:#9ca3af}.dark-theme .btn-ghost{background:#32323ccc;border-color:#4b5563;color:#e5e7eb}.dark-theme .btn-ghost:hover{background:#3c3c46e6;border-color:#6b7280}.dark-theme .btn-ghost-alt{background:#4f46e533;border-color:#4f46e54d;color:#a5b4fc}.dark-theme .btn-ghost-alt:hover{background:#4f46e54d;border-color:#4f46e566}.dark-theme .theme-toggle{background:#32323ccc;border-color:#4b5563;color:#f3f4f6}.dark-theme .theme-toggle:hover{background:#3c3c46e6;border-color:#6b7280}.dark-theme .nav-divider{background:#4b5563}.dark-theme .nav-menu{background:#1e1e28f5;border-bottom-color:#374151}.dark-theme .nav-link{color:#9ca3af}.dark-theme .nav-link.active,.dark-theme .nav-link:hover{color:#e5e7eb}.dark-theme .nav-link.active:after{background:#7c8bff}.dark-theme .contact-popup{background:#1f2937}.dark-theme .contact-popup-header{border-bottom-color:#374151}.dark-theme .contact-popup-header h3{color:#f3f4f6}.dark-theme .close-popup-btn{color:#9ca3af}.dark-theme .close-popup-btn:hover{background-color:#374151;color:#f3f4f6}.dark-theme .contact-popup-content p{color:#d1d5db}.dark-theme .menu-icon,.dark-theme .menu-icon:after,.dark-theme .menu-icon:before{background-color:#e5e7eb}@media (max-width:1024px){.logo-subtitle{display:none}.nav-center{margin:0 1rem;max-width:400px}.btn-ghost span,.btn-ghost-alt span,.btn-primary span{display:none}.btn-primary{padding:.6rem}.btn-ghost,.btn-ghost-alt{padding:.55rem .9rem}}@media (max-width:768px){.top-nav{gap:.5rem;padding:.75rem 1rem}.nav-left{min-width:auto}.nav-center{margin:0 .5rem;max-width:300px}.search-input{font-size:.85rem;padding:.5rem 2rem .5rem .8rem}.nav-right{gap:.3rem}.btn-ghost,.btn-ghost-alt,.btn-primary{font-size:.8rem;padding:.5rem}.nav-divider{display:none}.menu-toggle{display:block}.nav-menu{border-bottom:none;flex-direction:column;gap:0;left:0;max-height:0;overflow:hidden;padding:0;position:absolute;right:0;top:100%;transition:max-height .3s ease}.nav-menu.open{border-bottom:1px solid #e5e7eb;max-height:300px}.dark-theme .nav-menu.open{border-bottom-color:#374151}.nav-link{border-bottom:1px solid #f3f4f6;padding:1rem 1.5rem;text-align:left}.dark-theme .nav-link{border-bottom-color:#374151}.nav-link.active:after{display:none}}.message-group{display:flex;flex-direction:column;gap:var(--spacing-md);width:100%}.message{animation:messageFloat var(--animation-normal) cubic-bezier(.4,0,.2,1) forwards;transform:translateY(20px) scale(.95)}@keyframes messageFloat{0%{opacity:0;transform:translateY(20px) scale(.95)}60%{opacity:.8;transform:translateY(-2px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.message:hover .message-content{transform:translateY(-1px)}.user-message:hover .message-content{box-shadow:0 12px 40px #3f51b540,0 6px 20px #3f51b526,inset 0 1px 0 #fff6}.bot-message:hover .message-content{box-shadow:0 12px 40px #0000001f,0 6px 20px #00000014,inset 0 1px 0 #ffffff80}.message-confidence{background:#ffffff40;border:1px solid #ffffff4d;border-radius:var(--radius-lg);box-shadow:0 2px 8px #0000000d;font-weight:500;gap:4px;padding:3px 8px;transition:all var(--animation-fast)}.confidence-indicator{filter:drop-shadow(0 1px 2px rgba(0,0,0,.1));font-size:8px;line-height:1}.confidence-text{font-size:9px;font-weight:600;opacity:.9}.confidence-indicator.high{text-shadow:0 0 8px #4caf504d}.confidence-indicator.medium{text-shadow:0 0 8px #ff98004d}.confidence-indicator.low{text-shadow:0 0 8px #f443364d}.message-timestamp{align-items:center;display:flex;font-weight:400;justify-content:space-between;margin-top:6px;opacity:.8;transition:opacity var(--animation-fast)}.user-message .message-timestamp{color:#fffc;text-shadow:0 1px 2px #0003}.bot-message .message-timestamp{color:var(--text-secondary)}.message:hover .message-timestamp{opacity:1}.message-status{font-size:10px;margin-left:var(--spacing-xs);opacity:.7}.message-suggestions{animation:suggestionsSlideIn .6s cubic-bezier(.4,0,.2,1) forwards;animation-delay:.3s;opacity:0}@keyframes suggestionsSlideIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.suggestion-button{align-items:center;border:1px solid #ffffff40;border-radius:var(--radius-xl);box-shadow:0 4px 16px #0000000d,inset 0 1px 0 #ffffff4d;display:inline-flex;gap:6px;overflow:hidden;padding:6px 12px;position:relative}.suggestion-button:before{background:linear-gradient(90deg,#0000,#fff6 50%,#0000);content:"";height:100%;left:-100%;position:absolute;top:0;transition:left .6s cubic-bezier(.4,0,.2,1);width:100%}.suggestion-button:hover:before{left:100%}.suggestion-button:hover{border-color:#fff6;box-shadow:0 8px 24px #00000014,0 4px 12px #3f51b51a,inset 0 1px 0 #fff6}.suggestion-button:active{transform:translateY(0) scale(.98);transition-duration:.1s}.suggestion-icon{animation:sparkle 2s ease-in-out infinite;filter:drop-shadow(0 1px 2px rgba(0,0,0,.1));font-size:10px;opacity:.8}@keyframes sparkle{0%,to{opacity:.8;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}.message.high-confidence .message-content{border-left:3px solid var(--success-color);box-shadow:0 8px 32px #4caf501a,0 4px 16px #0000000a,inset 0 1px 0 #ffffff4d}.message.high-confidence .message-content:after{background:linear-gradient(180deg,var(--success-color) 0,#4caf5080 100%);border-radius:0 0 0 var(--radius-lg);content:"";height:100%;left:0;position:absolute;top:0;width:3px}.message.loading .message-content{animation:messagePulse 1.5s ease-in-out infinite;opacity:.7}@keyframes messagePulse{0%,to{opacity:.7;transform:scale(1)}50%{opacity:.9;transform:scale(1.01)}}.message.error .message-content{backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);background:#f443361a;border:1px solid #f443364d;color:var(--error-color)}.message.error .message-content:before{content:"⚠️";font-size:12px;margin-right:var(--spacing-xs)}.dark-theme .message-confidence{background:#0000004d;border-color:#ffffff26}.dark-theme .suggestion-button{border-color:#ffffff26}.dark-theme .suggestion-button:hover{border-color:#ffffff40;color:var(--primary-light)}.dark-theme .message.high-confidence .message-content{border-left-color:var(--success-color);box-shadow:0 8px 32px #4caf5026,0 4px 16px #0000001a,inset 0 1px 0 #ffffff1a}@media (max-width:768px){.message-suggestions{gap:6px}.suggestion-button{font-size:10px;padding:5px 10px}.suggestion-icon{font-size:8px}.message-confidence{margin-left:6px;padding:2px 6px}.confidence-text{font-size:8px}}.suggestion-button:focus-visible{background:#ffffff4d;outline:2px solid var(--primary-color);outline-offset:2px}@media (prefers-contrast:high){.message-content{border:2px solid}.suggestion-button{background:#ffffffe6;border:2px solid var(--primary-color)}.confidence-indicator.high{color:#0f0}.confidence-indicator.medium{color:#ff0}.confidence-indicator.low{color:red}}@media (prefers-reduced-motion:reduce){.message,.message-confidence,.message-suggestions,.suggestion-button{animation:none;transition:none}.suggestion-button:hover{transform:none}.suggestion-icon{animation:none}}@media print{.message-suggestions{display:none}.message-confidence{background:#0000;border:1px solid #ccc}}.chat-widget{bottom:var(--spacing-lg);font-family:var(--font-family);position:fixed;right:var(--spacing-lg);z-index:var(--z-popup)}.chat-toggle,.chat-widget{transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1)}.chat-toggle{align-items:center;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);background:#ffffff26;border:1px solid #fff3;border-radius:var(--radius-round);box-shadow:0 8px 32px #0000001f,0 4px 16px #00000014,inset 0 1px 0 #ffffff4d;color:var(--primary-color);cursor:pointer;display:flex;height:64px;justify-content:center;overflow:hidden;position:relative;width:64px}.chat-toggle:before{background:linear-gradient(135deg,#ffffff1a,#ffffff0d);border-radius:inherit;bottom:0;content:"";left:0;position:absolute;right:0;top:0;transition:opacity var(--animation-fast)}.chat-toggle:hover{background:#fff3;box-shadow:0 12px 40px #00000026,0 6px 20px #0000001a,inset 0 1px 0 #fff6;transform:translateY(-2px) scale(1.05)}.chat-toggle:hover:before{opacity:.8}.chat-toggle.open{background:#f4433626;border-color:#f443364d;color:var(--error-color);transform:rotate(180deg) scale(1.1)}.chat-toggle.open:hover{background:#f4433633;transform:rotate(180deg) scale(1.15) translateY(-2px)}.chat-toggle svg{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1));height:28px;position:relative;transition:all var(--animation-normal);width:28px;z-index:1}.chat-container{backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);background:#ffffff14;border:1px solid #ffffff26;border-radius:var(--radius-xl);bottom:80px;box-shadow:0 20px 60px #0000001f,0 8px 32px #00000014,inset 0 1px 0 #fff3;display:flex;flex-direction:column;height:520px;opacity:0;overflow:hidden;position:absolute;right:0;transform:scale(.85) translateY(20px);transform-origin:bottom right;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1);visibility:hidden;width:380px}.chat-container:before{background:linear-gradient(135deg,#ffffff1a,#ffffff0d 50%,#ffffff05);border-radius:inherit;bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.chat-container.open{opacity:1;transform:scale(1) translateY(0);visibility:visible}.chat-header{align-items:center;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);background:#ffffff1a;border-bottom:1px solid #ffffff1a;display:flex;flex-shrink:0;justify-content:space-between;padding:var(--spacing-lg) var(--spacing-lg) var(--spacing-md);position:relative}.chat-header:after{background:linear-gradient(90deg,#0000,#ffffff4d 50%,#0000);bottom:0;content:"";height:1px;left:0;position:absolute;right:0}.chat-title{align-items:center;color:var(--text-primary);display:flex;font-size:var(--font-size-md);font-weight:600;gap:var(--spacing-sm);text-shadow:0 2px 4px #0000001a}.chat-icon{fill:var(--primary-color);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1));flex-shrink:0;height:24px;width:24px}.chat-messages{background:#0000;contain:layout style paint;display:flex;flex:1 1;flex-direction:column;gap:var(--spacing-md);max-height:380px;overflow-x:hidden;overflow-y:auto;padding:var(--spacing-md);scroll-behavior:smooth;scrollbar-color:#ffffff4d #0000;scrollbar-width:thin;transform:translateZ(0);will-change:scroll-position}.chat-messages::-webkit-scrollbar{width:6px}.chat-messages::-webkit-scrollbar-track{background:#ffffff0d;border-radius:3px}.chat-messages::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px;-webkit-transition:background var(--animation-fast);transition:background var(--animation-fast)}.chat-messages::-webkit-scrollbar-thumb:hover{background:#fff6}.chat-messages::-webkit-scrollbar-thumb:active{background:#fff9}.message{animation:messageSlideIn .3s cubic-bezier(.4,0,.2,1) forwards;animation-fill-mode:both;display:flex;flex-direction:column;max-width:85%;opacity:0;transform:translateY(10px)}@keyframes messageSlideIn{0%{opacity:0;transform:translateY(10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.user-message{align-self:flex-end;text-align:right}.bot-message{align-self:flex-start;text-align:left}.message-content{backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid #fff3;border-radius:var(--radius-lg);box-shadow:0 8px 32px #00000014,0 4px 16px #0000000a,inset 0 1px 0 #ffffff4d;padding:var(--spacing-md) var(--spacing-lg);position:relative;transition:all var(--animation-fast)}.user-message .message-content{background:linear-gradient(135deg,var(--primary-color) 0,var(--primary-light) 100%);border-bottom-right-radius:var(--radius-sm);box-shadow:0 8px 32px #3f51b533,0 4px 16px #3f51b51a,inset 0 1px 0 #ffffff4d;color:#fff}.bot-message .message-content{background:#fffffff2;border-bottom-left-radius:var(--radius-sm);color:var(--text-primary)}.bot-message .message-content:hover{box-shadow:0 12px 40px #0000001a,0 6px 20px #0000000f,inset 0 1px 0 #fff6;transform:translateY(-1px)}.message-content p{font-size:var(--font-size-sm);font-weight:400;line-height:1.6;margin:0}.message-timestamp{color:#ffffffb3;font-size:var(--font-size-xs);font-weight:300;margin-top:var(--spacing-xs);padding:0 var(--spacing-sm);text-shadow:0 1px 2px #0000001a}.message-confidence{align-items:center;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);background:#fff3;border-radius:var(--radius-sm);display:inline-flex;font-size:var(--font-size-xs);margin-left:var(--spacing-sm);padding:2px 6px}.confidence-indicator{font-size:10px;margin-right:2px}.confidence-indicator.high{color:var(--success-color)}.confidence-indicator.medium{color:var(--warning-color)}.confidence-indicator.low{color:var(--error-color)}.message-suggestions{display:flex;flex-wrap:wrap;gap:var(--spacing-xs);margin-top:var(--spacing-sm);padding-left:var(--spacing-md)}.suggestion-button{backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);background:#ffffff26;border:1px solid #fff3;border-radius:var(--radius-lg);box-shadow:0 4px 16px #0000000d;color:var(--primary-color);cursor:pointer;font-size:var(--font-size-xs);font-weight:500;padding:var(--spacing-xs) var(--spacing-sm);transition:all var(--animation-fast) cubic-bezier(.4,0,.2,1);white-space:nowrap}.suggestion-button:hover{background:#ffffff40;border-color:#ffffff4d;box-shadow:0 8px 24px #00000014;color:var(--primary-dark);transform:translateY(-2px) scale(1.02)}.message.typing{animation:none;margin-bottom:var(--spacing-sm)}.typing-indicator{align-items:center;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);background:#ffffffe6;border:1px solid #fff3;border-radius:var(--radius-lg);border-bottom-left-radius:var(--radius-sm);box-shadow:0 4px 16px #00000014,inset 0 1px 0 #ffffff4d;display:flex;gap:4px;padding:var(--spacing-md) var(--spacing-lg);width:fit-content}.typing-indicator span{animation:typingDot 1.4s ease-in-out infinite both;background:var(--primary-color);border-radius:50%;height:6px;opacity:.5;width:6px}.typing-indicator span:nth-child(2){animation-delay:.2s}.typing-indicator span:nth-child(3){animation-delay:.4s}@keyframes typingDot{0%,80%,to{opacity:.3;transform:scale(1)}40%{opacity:1;transform:scale(1.2)}}.chat-input-container{align-items:flex-end;backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);background:#ffffff26;border-radius:0 0 var(--radius-xl) var(--radius-xl);border-top:1px solid #fff3;display:flex;flex-shrink:0;gap:var(--spacing-sm);max-width:100%;padding:var(--spacing-md) var(--spacing-lg);position:relative;transition:all var(--animation-fast)}.chat-input-container:before{background:linear-gradient(90deg,#0000,#fff6 20%,#fff9 50%,#fff6 80%,#0000);content:"";height:1px;left:0;position:absolute;right:0;top:0}.chat-input-container:focus-within{background:#fff3;border-top-color:#ffffff4d;box-shadow:0 -4px 20px #00000014,inset 0 1px 0 #ffffff4d}.chat-input{backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);background:#ffffffe6;border:1.5px solid #ffffff4d;border-radius:var(--radius-xl);box-shadow:0 2px 8px #0000000a,inset 0 1px 0 #ffffff80;color:var(--text-primary);flex:1 1;font-family:inherit;font-size:var(--font-size-sm);font-weight:400;height:auto!important;line-height:1.5;max-height:120px;min-height:40px;outline:none;overflow-y:auto;padding:12px 16px;resize:none;scrollbar-color:#0003 #0000;scrollbar-width:thin;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1)}.chat-input::-webkit-scrollbar{width:4px}.chat-input::-webkit-scrollbar-track{background:#0000}.chat-input::-webkit-scrollbar-thumb{background:#0003;border-radius:2px}.chat-input::placeholder{color:#00000080;font-weight:400;transition:color var(--animation-fast)}.chat-input:focus{background:#fffffff2;border-color:var(--primary-color);box-shadow:0 0 0 3px #3f51b51a,0 4px 16px #3f51b514,inset 0 1px 0 #fff9;transform:translateY(-1px)}.chat-input:focus::placeholder{color:#0000004d;transform:translateY(-1px)}.send-button{align-items:center;background:linear-gradient(135deg,var(--primary-color) 0,var(--primary-light) 100%);border:none;border-radius:var(--radius-round);box-shadow:0 4px 16px #3f51b54d,0 2px 8px #3f51b533,inset 0 1px 0 #ffffff4d;color:#fff;cursor:pointer;display:flex;height:44px;justify-content:center;min-width:44px;overflow:hidden;position:relative;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1);width:44px}.send-button:before{background:linear-gradient(135deg,#fff3,#ffffff1a 50%,#ffffff0d);border-radius:inherit;bottom:0;content:"";left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity var(--animation-fast)}.send-button:hover:not(:disabled){background:linear-gradient(135deg,var(--primary-light) 0,var(--primary-color) 100%);box-shadow:0 8px 24px #3f51b566,0 4px 12px #3f51b54d,inset 0 1px 0 #fff6;transform:translateY(-2px) scale(1.05)}.send-button:hover:not(:disabled):before{opacity:1}.send-button:active:not(:disabled){transform:translateY(-1px) scale(1.02);transition-duration:.1s}.send-button:disabled{background:#0000001a;box-shadow:0 2px 4px #0000000d,inset 0 1px 0 #ffffff1a;color:#0000004d;cursor:not-allowed;transform:none}.send-button:disabled:before{opacity:0}.send-button svg{filter:drop-shadow(0 1px 2px rgba(0,0,0,.2));transition:transform var(--animation-fast)}.send-button:hover:not(:disabled) svg{transform:translateX(1px)}.send-button svg.spinner{animation:spin 1s linear infinite}.initial-suggestions{align-items:center;animation:fadeInUp .6s cubic-bezier(.4,0,.2,1) forwards;animation-delay:.5s;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);background:#ffffff14;border:1px solid #ffffff26;border-radius:var(--radius-xl);box-shadow:0 8px 32px #0000000f,inset 0 1px 0 #fff3;display:flex;flex-direction:column;gap:var(--spacing-md);margin:var(--spacing-md) 0;opacity:0;padding:var(--spacing-lg);position:relative;z-index:1}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.initial-suggestions p{color:var(--text-primary);font-size:var(--font-size-sm);font-weight:500;margin:0 0 var(--spacing-md) 0;text-align:center;text-shadow:0 1px 2px #0000001a}.suggestion-buttons{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);justify-content:center}.chat-widget.panel-open{bottom:280px;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1)}.chat-input-container.sending .send-button{animation:sendingPulse 1s ease-in-out infinite;background:linear-gradient(135deg,var(--success-color) 0,#4caf50cc 100%)}@keyframes sendingPulse{0%,to{transform:translateY(-2px) scale(1.05)}50%{transform:translateY(-2px) scale(1.1)}}.input-counter{background:#fffc;border-radius:var(--radius-sm);bottom:4px;box-shadow:0 1px 3px #0000001a;color:#0006;font-size:10px;opacity:1;padding:2px 6px;pointer-events:none;position:absolute;right:52px;transition:opacity var(--animation-fast);z-index:1}.chat-input-container:hover .input-counter,.chat-input:focus+.input-counter{opacity:1}.voice-button{align-items:center;background:#fffc;border:1px solid #ffffff4d;border-radius:var(--radius-round);box-shadow:0 2px 8px #0000000a;color:var(--text-secondary);cursor:pointer;display:flex;height:36px;justify-content:center;margin-right:var(--spacing-xs);position:relative;transition:all var(--animation-fast);width:36px;z-index:1}.voice-button:hover{background:#fffffff2;box-shadow:0 4px 12px #00000014;color:var(--primary-color);transform:translateY(-1px)}@media (max-width:768px){.chat-widget{bottom:var(--spacing-md);right:var(--spacing-md)}.chat-widget.panel-open{bottom:240px}.chat-toggle{height:56px;width:56px}.chat-toggle svg{height:24px;width:24px}.chat-container{bottom:70px;height:480px;width:340px}.chat-messages{max-height:340px}.chat-input-container{gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md)}.chat-input{font-size:var(--font-size-sm);padding:10px 14px}.send-button{height:40px;min-width:40px;width:40px}.send-button svg{height:18px;width:18px}}@media (max-width:480px){.chat-widget{bottom:var(--spacing-sm);right:var(--spacing-sm)}.chat-container{max-width:340px;right:calc(var(--spacing-sm)*-1);width:calc(100vw - 32px)}.suggestion-button{font-size:10px;padding:4px 8px}.chat-input-container{border-radius:0 0 var(--radius-lg) var(--radius-lg);padding:var(--spacing-xs) var(--spacing-sm)}.chat-input{border-radius:var(--radius-lg);padding:8px 12px}.send-button{height:36px;min-width:36px;width:36px}}.dark-theme .chat-toggle{background:#0003;border-color:#ffffff1a;color:var(--primary-light)}.dark-theme .chat-toggle:hover{background:#0000004d}.dark-theme .chat-container{background:#00000026;border-color:#ffffff1a}.dark-theme .chat-container:before{background:linear-gradient(135deg,#ffffff0d,#ffffff05 50%,#ffffff03)}.dark-theme .chat-header{background:#0003;border-bottom-color:#ffffff0d}.dark-theme .chat-title{color:var(--text-primary)}.dark-theme .bot-message .message-content{background:#0006;border-color:#ffffff1a;color:var(--text-primary)}.dark-theme .typing-indicator{background:#0006;border-color:#ffffff1a}.dark-theme .chat-input-container{background:#0000004d;border-top-color:#ffffff1a}.dark-theme .chat-input-container:focus-within{background:#0006;border-top-color:#fff3}.dark-theme .chat-input{background:#0006;border-color:#fff3;color:var(--text-primary)}.dark-theme .chat-input::placeholder{color:#ffffff80}.dark-theme .chat-input:focus{background:#00000080;border-color:var(--primary-light)}.dark-theme .send-button:disabled{background:#ffffff1a;color:#ffffff4d}.chat-input:focus-visible,.send-button:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}@media (prefers-reduced-motion:reduce){.chat-input,.chat-input-container,.send-button{transition:none}.send-button{animation:none}}.dark-theme .initial-suggestions,.dark-theme .suggestion-button{background:#0003;border-color:#ffffff1a}.dark-theme .suggestion-button{color:var(--primary-light)}.dark-theme .suggestion-button:hover{background:#0000004d;border-color:#fff3}.chat-widget *{will-change:transform,opacity}.chat-container{contain:layout style paint}.chat-messages{contain:layout style}.chat-toggle:focus-visible,.send-button:focus-visible,.suggestion-button:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}@media (prefers-reduced-motion:reduce){.chat-container,.chat-widget,.message,.send-button,.suggestion-button{animation:none;transition:none}}.chat-error-fallback{align-items:center;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);background:#f443360d;display:flex;height:100%;justify-content:center}.chat-error-fallback,.error-message{border-radius:var(--radius-lg);padding:var(--spacing-lg)}.error-message{background:#fffffff2;box-shadow:0 8px 32px #00000014,0 4px 16px #0000000a;text-align:center}.error-message h3{color:var(--error-color);font-size:var(--font-size-lg);margin:0 0 var(--spacing-sm)}.error-message p{color:var(--text-secondary);margin:0 0 var(--spacing-md)}.retry-button{background:var(--primary-color);border-radius:var(--radius-md);box-shadow:0 2px 8px #0000001a;font-size:var(--font-size-sm);padding:var(--spacing-sm) var(--spacing-lg);transition:all var(--animation-fast)}.retry-button:hover{background:var(--primary-dark);box-shadow:0 4px 12px #00000026}.dark-theme .error-message{background:#0006}.dark-theme .error-message h3{color:var(--error-light)}.dark-theme .error-message p{color:var(--text-primary)}@media (max-width:768px){.chat-messages{gap:var(--spacing-sm);max-height:340px;padding:var(--spacing-sm)}.chat-messages::-webkit-scrollbar{width:4px}}@media (max-width:480px){.chat-messages{padding:var(--spacing-xs)}}@media (prefers-reduced-motion:reduce){.chat-messages{scroll-behavior:auto}.message{animation:none;opacity:1;transform:none}.typing-indicator span{animation:none;opacity:.7}}.chat-messages:focus-within{outline:2px solid var(--primary-color);outline-offset:-2px}.dark-theme .chat-messages::-webkit-scrollbar-thumb{background:#ffffff26}.dark-theme .chat-messages::-webkit-scrollbar-thumb:hover{background:#ffffff40}.dark-theme .chat-messages::-webkit-scrollbar-track{background:#0000001a}@media print{.chat-widget{display:none}}.timeline-container{background-color:#fffffff2;border-radius:12px;bottom:30px;box-shadow:0 4px 20px #00000026;left:30px;max-height:80vh;overflow:hidden;position:absolute;transition:all .3s cubic-bezier(.4,0,.2,1);width:350px;z-index:1000}.timeline-container.collapsed{height:60px}.timeline-container.expanded{height:auto;max-height:80vh}.timeline-content{max-height:calc(80vh - 60px);overflow-y:auto;padding:20px;scrollbar-color:#3f51b5 #f5f7ff;scrollbar-width:thin}.timeline-content::-webkit-scrollbar{width:8px}.timeline-content::-webkit-scrollbar-track{background:#f5f7ff;border-radius:4px}.timeline-content::-webkit-scrollbar-thumb{background-color:#3f51b5;border:2px solid #f5f7ff;border-radius:4px}.timeline-content::-webkit-scrollbar-thumb:hover{background-color:#303f9f}.timeline-period{border-radius:8px;cursor:pointer;margin-bottom:16px;padding:12px;position:relative;transition:all .3s ease}.timeline-period:hover{background-color:#3f51b50d}.timeline-period.active{background-color:#3f51b51a}.period-marker{border-radius:50%;box-shadow:0 0 0 3px #fff,0 0 0 4px #3f51b533;height:16px;left:-8px;position:absolute;top:18px;transition:all .3s ease;width:16px;z-index:1}.timeline-period.active .period-marker{box-shadow:0 0 0 3px #fff,0 0 0 5px #3f51b566;transform:scale(1.2)}.period-info{margin-left:24px}.period-label{color:#333;font-size:15px;font-weight:600;margin-bottom:4px}.period-meta{color:#666;font-size:12px}.period-locations{background:linear-gradient(135deg,#f8f9ff,#f0f2ff);border-left:4px solid #3f51b5;border-radius:8px;margin-top:16px;padding:16px}.period-locations h4{color:#3f51b5;font-size:14px;font-weight:600;margin:0 0 12px}.period-locations ul{list-style:none;margin:0;padding:0}.location-item{align-items:center;background:#fff;border:1px solid #0000;border-radius:6px;cursor:pointer;display:flex;justify-content:space-between;margin-bottom:8px;padding:12px;transition:all .2s ease}.location-item:hover{border-color:#3f51b5;box-shadow:0 2px 8px #0000001a;transform:translateX(4px)}.location-item.selected{background:linear-gradient(135deg,#3f51b5,#5c6bc0);box-shadow:0 4px 12px #3f51b54d;color:#fff;transform:translateX(4px)}.location-info{flex:1 1}.location-name{margin-bottom:2px}.location-dynasty{font-size:12px;opacity:.8}.dynasty-indicator{border-radius:50%;height:12px;margin-left:8px;width:12px}.timeline-legend{background-color:#fafafa;border-top:1px solid #00000014;padding:16px 20px}.timeline-legend h4{color:#333;font-size:14px;margin:0 0 12px}.legend-items{gap:16px}.legend-item{gap:6px}.legend-color{height:12px;width:12px}.no-timeline-data{color:#666;padding:40px 20px;text-align:center}.dark-theme .timeline-container{background-color:#2d2d3af2;box-shadow:0 4px 20px #0000004d}.dark-theme .timeline-header{border-bottom-color:#444}.dark-theme .timeline-header h3{color:#7986cb}.dark-theme .expand-button{background-color:initial;color:#bbb}.dark-theme .expand-button:hover{background-color:#7986cb1a;color:#7986cb}.dark-theme .expand-button:active{background-color:#7986cb33}.dark-theme .timeline:before{background-color:#555}.dark-theme .period-marker{background-color:#777}.dark-theme .period-label{color:#ccc}.dark-theme .timeline-period.active .period-marker{background-color:#7986cb}.dark-theme .timeline-period.active .period-label,.dark-theme .timeline-period:hover .period-label{color:#7986cb}.dark-theme .period-locations{background-color:#3f51b51a}.dark-theme .period-locations h4{color:#7986cb}.dark-theme .location-item{background-color:#2d2d3acc}.dark-theme .location-item:hover{background-color:#3f51b533;border-left-color:#7986cb}.dark-theme .location-name{color:#ddd}.dark-theme .location-dynasty{color:#aaa}@media (max-width:768px){.timeline-container{bottom:15px;left:15px;width:320px}.timeline-header{padding:14px 18px}.timeline-header h3{font-size:16px}.timeline-content{padding:15px}.period-label{font-size:14px}}.timeline-empty-icon{color:#ccc}.dark-theme .timeline-empty{color:#aaa}.dark-theme .timeline-empty-icon{color:#555}@media (max-width:480px){.timeline-container{bottom:10px;left:10px;max-height:70vh;width:calc(100% - 20px)}.timeline-header h3{font-size:16px}.timeline-content{-webkit-overflow-scrolling:touch;max-height:calc(70vh - 60px)}.location-item{margin-bottom:8px;padding:12px 16px}.period-marker{height:20px;left:-22px;width:20px}.timeline-period{padding:12px 0}.location-item:active{background-color:#e8eaff;transform:scale(.98)}.dark-theme .location-item:active{background-color:#3f51b54d}}@media (max-height:500px) and (orientation:landscape){.timeline-container{max-height:85vh;right:10px;width:300px}.timeline-content{max-height:calc(85vh - 60px)}}.timeline-status{align-items:center;display:flex;gap:8px}.data-source-indicator{border-radius:8px;font-size:10px;font-weight:600;letter-spacing:.5px;padding:2px 6px;text-transform:uppercase}.data-source-indicator.api{background-color:#4caf50;color:#fff}.data-source-indicator.local{background-color:#ff9800;color:#fff}.data-source-indicator.fallback{background-color:#f44336;color:#fff}.timeline-loading{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:200px;padding:20px;text-align:center}.timeline-loading p{color:#666;font-size:14px;margin-top:12px}.loading-spinner{animation:spin 1s linear infinite;border:3px solid #f5f7ff;border-radius:50%;border-top-color:#3f51b5;height:40px;width:40px}.timeline-error{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:200px;padding:20px;text-align:center}.error-message{margin-bottom:16px}.error-message p{color:#f44336;font-weight:600;margin:0 0 4px}.error-message small{word-wrap:break-word;color:#999;display:block;font-size:12px;max-width:280px}.retry-button{background-color:#3f51b5;border:none;border-radius:6px;color:#fff;cursor:pointer;font-size:13px;font-weight:500;padding:8px 16px;transition:all .2s ease}.retry-button:hover{background-color:#303f9f;transform:translateY(-1px)}.retry-button:active{transform:translateY(0)}.timeline-empty{align-items:center;color:#666;display:flex;flex-direction:column;justify-content:center;min-height:200px;padding:20px;text-align:center}.timeline-empty-icon{font-size:48px;margin-bottom:16px;opacity:.6}.timeline-empty-text{font-size:16px;line-height:1.5;margin-bottom:16px;max-width:250px}.timeline-empty .retry-button{background-color:#757575;font-size:12px;padding:6px 12px}.timeline-empty .retry-button:hover{background-color:#616161}.timeline-header{align-items:center;border-bottom:1px solid #eee;cursor:pointer;display:flex;justify-content:space-between;padding:16px 20px;position:relative}.timeline-header h3{color:#3f51b5;flex:1 1;font-size:18px;font-weight:600;margin:0}.expand-button{align-items:center;background:none;border:none;border-radius:50%;color:#666;cursor:pointer;display:flex;font-size:20px;height:32px;justify-content:center;margin-left:8px;padding:0;transition:all .3s ease;width:32px}.expand-button:hover{background-color:#3f51b51a;color:#3f51b5}.expand-button:before{content:"▼";display:block;transform:rotate(0deg);transition:transform .3s ease}.timeline-container.collapsed .expand-button:before{transform:rotate(-90deg)}.dark-theme .data-source-indicator.api{background-color:#66bb6a}.dark-theme .data-source-indicator.local{background-color:#ffb74d}.dark-theme .data-source-indicator.fallback{background-color:#ef5350}.dark-theme .timeline-empty-text,.dark-theme .timeline-loading p{color:#aaa}.dark-theme .loading-spinner{border-color:#7986cb #444 #444}.dark-theme .error-message p{color:#ef5350}.dark-theme .error-message small{color:#666}.dark-theme .retry-button{background-color:#7986cb}.dark-theme .retry-button:hover{background-color:#5c6bc0}.dark-theme .timeline-empty .retry-button{background-color:#888}.dark-theme .timeline-empty .retry-button:hover{background-color:#777}@media (max-width:768px){.data-source-indicator{font-size:9px;padding:1px 4px}.timeline-status{gap:4px}.error-message small{max-width:240px}.timeline-empty,.timeline-error,.timeline-loading{min-height:160px;padding:15px}}@media (max-width:480px){.timeline-header{padding:14px 16px}.timeline-header h3{font-size:16px}.loading-spinner{border-width:2px;height:32px;width:32px}.data-source-indicator{display:none}.retry-button{font-size:12px;padding:6px 12px}}.graph-visualization{animation:fadeIn .5s ease-out;background:linear-gradient(135deg,#1e3c72,#2a5298);display:flex;flex-direction:column;height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:2000}.graph-header{align-items:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff1a;border-bottom:1px solid #fff3;display:flex;justify-content:space-between;padding:20px 30px}.graph-header h2{color:#fff;font-size:24px;font-weight:600;margin:0;text-shadow:0 2px 4px #0000004d}.graph-controls{align-items:center;display:flex;gap:15px}.filter-select{background:#ffffffe6;border:none;border-radius:6px;color:#333;cursor:pointer;font-size:14px;padding:8px 12px;transition:all .3s ease}.filter-select:hover{background:#fff;transform:translateY(-1px)}.close-graph,.legend-toggle,.reset-view{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:#fff3;border:none;border-radius:6px;color:#fff;cursor:pointer;font-size:14px;padding:8px 16px;transition:all .3s ease}.legend-toggle:hover,.reset-view:hover{background:#ffffff4d;transform:translateY(-1px)}.close-graph{align-items:center;background:#f44336cc;border-radius:50%;display:flex;font-size:18px;font-weight:700;height:40px;justify-content:center;padding:0;width:40px}.close-graph:hover{background:#f44336;transform:scale(1.1)}.graph-canvas{background:#0000;cursor:grab;flex:1 1}.graph-canvas:active{cursor:grabbing}.graph-legend{animation:slideInRight .3s ease-out;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2;border-radius:12px;box-shadow:0 8px 32px #0000004d;min-width:200px;padding:20px;position:absolute;right:30px;top:120px}.graph-legend h3{color:#333;font-size:18px;font-weight:600;margin:0 0 15px}.legend-section{margin-bottom:20px}.legend-section:last-child{margin-bottom:0}.legend-section h4{color:#555;font-size:14px;font-weight:600;margin:0 0 10px}.legend-items{display:flex;flex-direction:column;gap:8px}.legend-item{align-items:center;color:#666;display:flex;font-size:12px;gap:8px}.legend-color{border-radius:50%;flex-shrink:0;height:16px;width:16px}.legend-line{flex-shrink:0;height:3px;width:30px}.interaction-help{border-top:1px solid #eee;color:#777;font-size:11px;margin-top:15px;padding-top:15px}.interaction-help p{margin:5px 0}.graph-stats{animation:slideInLeft .3s ease-out .2s both;bottom:30px;display:flex;gap:20px;left:30px;position:absolute}.stat{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff1a;border:1px solid #fff3;border-radius:12px;padding:15px 20px;text-align:center}.stat-value{color:#fff;display:block;font-size:24px;font-weight:700;text-shadow:0 2px 4px #0000004d}.stat-label{color:#fffc;display:block;font-size:12px;letter-spacing:.5px;margin-top:5px;text-transform:uppercase}@media (max-width:768px){.graph-header{flex-direction:column;gap:15px;padding:15px 20px}.graph-header h2{font-size:20px}.graph-controls{flex-wrap:wrap;justify-content:center}.graph-legend{bottom:100px;left:20px;max-height:300px;min-width:auto;overflow-y:auto;position:fixed;right:20px;top:auto}.graph-stats{bottom:20px;flex-direction:column;gap:10px;left:20px}.stat{padding:10px 15px}.stat-value{font-size:20px}}.dark-theme .graph-visualization{background:linear-gradient(135deg,#0a0a1e,#1a1a2e)}.dark-theme .graph-header{background:#0000004d;border-bottom-color:#ffffff1a}.dark-theme .graph-legend{background:#1e1e2df2;color:#fff}.dark-theme .graph-legend h3,.dark-theme .legend-section h4{color:#e0e0e0}.dark-theme .legend-item{color:#ccc}.dark-theme .interaction-help{border-top-color:#444;color:#aaa}.graph-canvas{display:block;margin:0;padding:0}.graph-controls button:active{transform:translateY(1px)}.filter-select:focus{box-shadow:0 0 0 2px #ffffff80;outline:none}.graph-loading{align-items:center;color:#fff;display:flex;font-size:18px;height:100%;justify-content:center}.graph-loading:after{animation:spin 1s linear infinite;border:3px solid #ffffff4d;border-radius:50%;border-top-color:#fff;content:"";height:30px;margin-left:15px;width:30px}.route-preferences-overlay{align-items:center;background:#000000b3;bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:2000}.route-preferences-modal{animation:modalSlideIn .3s ease-out;background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;display:flex;flex-direction:column;max-height:90vh;max-width:800px;overflow:hidden;width:100%}@keyframes modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.preferences-header{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e5e7eb;color:#fff;display:flex;justify-content:space-between;padding:24px 32px}.preferences-header h2{font-size:24px;font-weight:600;margin:0}.close-btn{background:none;font-size:28px;height:32px;padding:0;transition:background-color .2s;width:32px}.close-btn:hover{background:#fff3}.preferences-content{background:#fafbfc;flex:1 1;overflow-y:auto;padding:32px}.preference-section{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;margin-bottom:32px;padding:24px}.preference-section h3{align-items:center;color:#1f2937;display:flex;font-size:18px;font-weight:600;gap:8px;margin:0 0 16px}.required{color:#ef4444;font-size:14px}.interests-grid{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.activity-btn,.interest-btn{background:#fff;border:2px solid #e5e7eb;border-radius:8px;color:#374151;cursor:pointer;font-size:14px;font-weight:500;padding:12px 16px;text-align:center;transition:all .2s}.activity-btn:hover,.interest-btn:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea26;transform:translateY(-1px)}.activity-btn.selected,.interest-btn.selected{background:linear-gradient(135deg,#667eea,#764ba2);border-color:#667eea;box-shadow:0 4px 12px #667eea4d;color:#fff;transform:translateY(-1px)}.activities-grid{grid-gap:8px;display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.activity-btn{font-size:13px;padding:8px 12px;text-transform:capitalize}.input-group{margin-bottom:16px}.input-group label{color:#374151;display:block;font-size:14px;font-weight:500;margin-bottom:6px}.input-group input,.input-group select{background:#fff;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;padding:10px 12px;transition:border-color .2s;width:100%}.input-group input:focus,.input-group select:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;outline:none}.two-column{grid-gap:20px;display:grid;gap:20px;grid-template-columns:1fr 1fr}.three-column{grid-gap:16px;display:grid;gap:16px;grid-template-columns:1fr 1fr 1fr}.multi-select{background:#fff;border:2px solid #e5e7eb;border-radius:8px;max-height:120px;overflow-y:auto;padding:8px}.checkbox-label{align-items:center;border-radius:4px;cursor:pointer;display:flex;font-size:13px;gap:8px;margin-bottom:4px;padding:6px 8px;transition:background-color .2s}.checkbox-label:hover{background:#f3f4f6}.checkbox-label input[type=checkbox]{margin:0;width:auto}.location-info{background:#f0f9ff;border:1px solid #0ea5e9;border-radius:8px;color:#0c4a6e;margin-top:12px;padding:12px}.location-info p{font-weight:500;margin:0 0 4px}.location-info small{color:#075985;font-family:monospace}.preferences-footer{align-items:center;background:#fff;border-top:1px solid #e5e7eb;display:flex;justify-content:space-between;padding:24px 32px}.cancel-btn,.create-route-btn{border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;min-width:120px;padding:12px 24px;transition:all .2s}.cancel-btn{background:#fff;border:2px solid #d1d5db;color:#6b7280}.cancel-btn:hover{border-color:#9ca3af;color:#374151}.create-route-btn{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.create-route-btn:hover:not(:disabled){box-shadow:0 8px 25px #667eea4d;transform:translateY(-1px)}.create-route-btn:disabled{box-shadow:none;cursor:not-allowed;opacity:.6;transform:none}@media (max-width:768px){.route-preferences-modal{margin:10px;max-height:95vh}.preferences-content,.preferences-header{padding:20px}.preferences-footer{flex-direction:column;gap:12px;padding:20px}.cancel-btn,.create-route-btn{width:100%}.interests-grid,.three-column,.two-column{grid-template-columns:1fr}.activities-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:480px){.preferences-header h2{font-size:20px}.preference-section{padding:16px}.preference-section h3{font-size:16px}}.no-data{color:#9ca3af;font-size:13px;font-style:italic;padding:12px;text-align:center}details{margin-top:8px}details summary{background:#f3f4f6;border-radius:4px;cursor:pointer;padding:4px 8px}details pre{background:#f9fafb;border-radius:4px;font-size:10px;overflow-x:auto;padding:8px}.nearby-places-panel{animation:slideInRight .3s ease-out;background:#fff;border-radius:16px;box-shadow:0 10px 40px #00000026;display:flex;flex-direction:column;max-height:calc(100vh - 100px);overflow:hidden;position:fixed;right:20px;top:80px;width:380px;z-index:1000}.panel-header{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px}.panel-header h3{font-size:18px;font-weight:600;margin:0 0 8px}.location-info{font-family:monospace;font-size:12px;opacity:.9}.filters-section{background:#f9fafb;border-bottom:1px solid #e5e7eb;padding:16px 20px}.radius-control{margin-bottom:16px}.radius-control label{color:#374151;display:block;font-size:13px;font-weight:500;margin-bottom:6px}.radius-slider{-webkit-appearance:none;appearance:none;background:#e5e7eb;border-radius:3px;height:6px;outline:none;width:100%}.radius-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background:#667eea;border-radius:50%;box-shadow:0 2px 6px #667eea4d;cursor:pointer;height:20px;width:20px}.radius-slider::-moz-range-thumb{background:#667eea;border:none;border-radius:50%;box-shadow:0 2px 6px #667eea4d;cursor:pointer;height:20px;width:20px}.interests-filter label{color:#374151;display:block;font-size:13px;font-weight:500;margin-bottom:8px}.interests-chips{display:flex;flex-wrap:wrap;gap:6px;max-height:100px;overflow-y:auto}.interest-chip{background:#fff;border:1px solid #d1d5db;border-radius:12px;color:#6b7280;cursor:pointer;font-size:11px;padding:4px 8px;text-transform:capitalize;transition:all .2s}.interest-chip:hover{border-color:#667eea;color:#667eea}.interest-chip.selected{background:#667eea;border-color:#667eea;color:#fff}.places-list{flex:1 1;overflow-y:auto;padding:0}.loading-state{color:#6b7280;padding:40px 20px}.spinner{animation:spin 1s linear infinite;border:3px solid #f3f4f6;border-radius:50%;border-top-color:#667eea;height:32px;margin-bottom:12px;width:32px}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.empty-state{align-items:center;color:#6b7280;display:flex;flex-direction:column;justify-content:center;padding:40px 20px;text-align:center}.empty-icon{font-size:48px;margin-bottom:12px;opacity:.6}.empty-state p{font-weight:500;margin:0 0 8px}.empty-state small{font-size:12px;opacity:.8}.place-card{border-bottom:1px solid #f3f4f6;cursor:pointer;padding:16px 20px;transition:background-color .2s}.place-card:hover{background:#fafbfc}.place-card:last-child{border-bottom:none}.place-header{align-items:flex-start;display:flex;justify-content:space-between;margin-bottom:8px}.place-header h4{color:#1f2937;flex:1 1;font-size:15px;font-weight:600;line-height:1.3;margin:0 8px 0 0}.place-badges{display:flex;flex-shrink:0;gap:4px}.distance-badge,.match-badge{border-radius:8px;color:#fff;font-size:10px;font-weight:600;letter-spacing:.5px;padding:2px 6px;text-transform:uppercase}.place-description{color:#6b7280;font-size:13px;line-height:1.4;margin:0 0 12px}.place-details{margin-bottom:12px}.detail-item{align-items:center;display:flex;font-size:12px;justify-content:space-between;margin-bottom:4px}.detail-label{color:#9ca3af;font-weight:500}.detail-value{color:#374151;font-weight:400}.place-tags{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px}.tag{background:#f3f4f6;border-radius:6px;color:#6b7280;font-size:10px;font-weight:500;padding:2px 6px}.tag.more{background:#e5e7eb;color:#9ca3af}.place-actions{display:flex;gap:8px}.add-to-route-btn,.view-details-btn{border-radius:6px;cursor:pointer;flex:1 1;font-size:11px;font-weight:500;padding:6px 12px;text-align:center;transition:all .2s}.view-details-btn{background:#f3f4f6;border:1px solid #e5e7eb;color:#6b7280}.view-details-btn:hover{background:#e5e7eb;color:#374151}.add-to-route-btn{background:#667eea;border:1px solid #667eea;color:#fff}.add-to-route-btn:hover{background:#5a67d8;border-color:#5a67d8}.panel-footer{background:#f9fafb;border-top:1px solid #e5e7eb;padding:16px 20px;text-align:center}.panel-footer p{color:#6b7280;font-size:12px;margin:0 0 12px}.create-route-from-nearby{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:13px;font-weight:600;padding:10px 16px;transition:all .2s;width:100%}.create-route-from-nearby:hover{box-shadow:0 6px 20px #667eea4d;transform:translateY(-1px)}@media (max-width:1024px){.nearby-places-panel{right:10px;width:340px}}@media (max-width:768px){.nearby-places-panel{border-radius:0;bottom:0;height:100vh;left:0;max-height:none;position:fixed;right:0;top:0;width:100%;z-index:2000}.panel-header{padding:40px 20px 20px}}.cultural-intelligence-overlay{align-items:center;animation:fadeIn .3s ease-out;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:#000000b3;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:2000}.cultural-intelligence-panel{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;box-shadow:0 25px 50px #0000004d;display:flex;flex-direction:column;height:85vh;max-height:800px;max-width:1200px;overflow:hidden;position:relative;width:90%}.cultural-intelligence-panel:before{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff1a;border-radius:20px;bottom:0;content:"";left:0;position:absolute;right:0;top:0}.ci-header{align-items:center;background:#ffffff26;border-bottom:1px solid #fff3;display:flex;justify-content:space-between;padding:25px 30px;position:relative;z-index:1}.ci-header h2{color:#fff;font-size:24px;font-weight:600;margin:0;text-shadow:0 2px 4px #0000004d}.connection-strength{align-items:center;color:#fff;display:flex;font-size:14px;gap:10px}.strength-bar{background:#ffffff4d;border-radius:4px;height:8px;overflow:hidden;width:100px}.strength-fill{background:linear-gradient(90deg,#4caf50,#8bc34a,#cddc39);border-radius:4px;box-shadow:0 0 10px #8bc34a80;height:100%;transition:width .8s ease-out}.close-btn{align-items:center;background:#fff3;border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;font-size:18px;height:40px;justify-content:center;transition:all .3s ease;width:40px}.close-btn:hover{background:#ffffff4d;transform:scale(1.1)}.ci-tabs{background:#ffffff1a;display:flex;overflow-x:auto;z-index:1}.ci-tabs,.tab{position:relative}.tab{background:none;border:none;color:#fffc;cursor:pointer;font-size:14px;font-weight:500;padding:15px 25px;transition:all .3s ease;white-space:nowrap}.tab:hover{background:#ffffff1a;color:#fff}.tab.active{background:#fff3;color:#fff}.tab.active:after{background:linear-gradient(90deg,#4caf50,#8bc34a);border-radius:2px 2px 0 0;bottom:0;content:"";height:3px;left:0;position:absolute;right:0}.ci-content{background:#fffffff2;flex:1 1;margin:0;overflow-y:auto;position:relative;z-index:1}.content-sections{color:#333;padding:30px}.loading-state{align-items:center;display:flex;flex-direction:column;height:300px;justify-content:center}.ai-thinking{text-align:center}.thinking-dots{display:flex;gap:8px;justify-content:center;margin-bottom:15px}.thinking-dots span{animation:thinking 1.4s ease-in-out infinite both;background:#667eea;border-radius:50%;height:12px;width:12px}.thinking-dots span:first-child{animation-delay:-.32s}.thinking-dots span:nth-child(2){animation-delay:-.16s}@keyframes thinking{0%,80%,to{opacity:.5;transform:scale(0)}40%{opacity:1;transform:scale(1)}}.overview-section{animation:slideInUp .5s ease-out}.significance-grid{grid-gap:25px;display:grid;gap:25px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));margin-bottom:30px}.significance-card{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #fff3;border-radius:15px;box-shadow:0 8px 25px #0000001a;padding:25px;transition:transform .3s ease,box-shadow .3s ease}.significance-card:hover{box-shadow:0 15px 35px #00000026;transform:translateY(-5px)}.significance-card h4{align-items:center;color:#2c3e50;display:flex;font-size:18px;font-weight:600;gap:10px;margin:0 0 15px}.significance-card h4:before{background:linear-gradient(180deg,#667eea,#764ba2);border-radius:2px;content:"";height:20px;width:4px}.significance-card ul{margin:15px 0;padding-left:20px}.significance-card li{color:#555;margin:8px 0;position:relative}.significance-card li::marker{color:#667eea}.ai-insights{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;color:#fff;margin-top:30px;padding:30px}.ai-insights h4{font-size:20px;font-weight:600;margin:0 0 20px}.insight-cards{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.insight-card{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff26;border:1px solid #fff3;border-radius:12px;padding:20px}.insight-card h5{font-size:16px;font-weight:600;margin:0 0 10px}.context-section{animation:slideInRight .5s ease-out}.context-timeline,.economic-context{background:#f8f9fa;border-left:5px solid #667eea;border-radius:15px;margin-bottom:25px;padding:25px}.context-details{margin-top:15px}.context-details p{border-bottom:1px solid #0000001a;margin:10px 0;padding:8px 0}.economic-grid{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));margin-top:15px}.economic-item{background:#fff;border-radius:10px;box-shadow:0 4px 15px #0000000d;padding:20px}.economic-item h5{color:#667eea;font-weight:600;margin:0 0 15px}.connections-section{animation:slideInLeft .5s ease-out}.connection-group{background:#f8f9fa;border:2px solid #0000;border-radius:15px;margin-bottom:20px;padding:25px;transition:all .3s ease}.connection-group.high{background:linear-gradient(135deg,#e8f5e8,#f1f8e9);border-color:#4caf50}.connection-group.medium{background:linear-gradient(135deg,#fff3e0,#fbe9d3);border-color:#ff9800}.connection-header{align-items:center;display:flex;justify-content:space-between;margin-bottom:15px}.connection-header h5{color:#2c3e50;font-size:18px;font-weight:600;margin:0}.strength-badge{border-radius:20px;font-size:12px;font-weight:600;padding:5px 12px;text-transform:uppercase}.strength-badge.high{background:#4caf50;color:#fff}.strength-badge.medium{background:#ff9800;color:#fff}.strength-badge.low{background:#9e9e9e;color:#fff}.connected-locations{display:flex;flex-wrap:wrap;gap:15px;margin:15px 0}.connected-location{align-items:center;background:#fff;border-radius:25px;box-shadow:0 3px 10px #0000001a;display:flex;flex-direction:column;min-width:120px;padding:12px 16px;text-align:center;transition:transform .3s ease}.connected-location:hover{box-shadow:0 6px 20px #00000026;transform:translateY(-3px)}.location-name{color:#2c3e50;font-size:14px;font-weight:600}.location-period{color:#666;font-size:12px;margin-top:4px}.explore-connection-btn{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:25px;color:#fff;cursor:pointer;font-weight:600;margin-top:15px;padding:12px 24px;transition:all .3s ease}.explore-connection-btn:hover{box-shadow:0 8px 25px #667eea4d;transform:translateY(-2px)}.stories-section{animation:slideInUp .5s ease-out}.narrative-hook{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;color:#fff;margin-bottom:30px;overflow:hidden;padding:30px;position:relative}.narrative-hook:before{color:#ffffff1a;content:'"';font-family:serif;font-size:120px;left:20px;line-height:1;position:absolute;top:-10px}.narrative-hook h4{font-size:20px;font-weight:600;margin:0 0 15px}.hook-text{font-size:18px;font-style:italic;line-height:1.6;margin:0;position:relative;z-index:1}.key-stories{margin-top:30px}.key-stories h4{color:#2c3e50;font-size:20px;font-weight:600;margin-bottom:20px}.story-card{background:#f8f9fa;border-left:5px solid #667eea;border-radius:15px;margin-bottom:20px;padding:25px;transition:all .3s ease}.story-card:hover{box-shadow:0 8px 25px #0000001a;transform:translateX(5px)}.story-card h5{color:#2c3e50;font-size:18px;font-weight:600;margin:0 0 15px}.story-description{color:#555;line-height:1.6;margin-bottom:15px}.story-context{background:#fff;border:1px solid #0000001a;border-radius:10px;margin-top:15px;padding:15px}.story-context h6{color:#667eea;font-size:14px;font-weight:600;margin:0 0 10px;text-transform:uppercase}.guide-section{animation:slideInDown .5s ease-out}.guide-section h4{align-items:center;color:#2c3e50;display:flex;font-size:20px;font-weight:600;gap:10px;margin-bottom:25px}.guide-section h4:before{content:"🤖";font-size:24px}.exploration-tips{grid-gap:25px;display:grid;gap:25px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.tip-category{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #0000001a;border-radius:15px;padding:25px;transition:all .3s ease}.tip-category:hover{box-shadow:0 15px 35px #0000001a;transform:translateY(-5px)}.tip-category h5{border-bottom:2px solid #667eea;color:#2c3e50;font-size:16px;font-weight:600;margin:0 0 15px;padding-bottom:10px}.tip-category ul{margin:0;padding-left:20px}.tip-category li{color:#555;line-height:1.5;margin:10px 0}.tip-category li::marker{color:#667eea}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInRight{0%{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}@keyframes slideInLeft{0%{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}@keyframes slideInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.cultural-intelligence-panel{height:90vh;margin:20px;width:95%}.ci-header{flex-direction:column;gap:15px;text-align:center}.ci-header h2{font-size:20px}.connection-strength{flex-direction:column;gap:8px}.ci-tabs{flex-wrap:wrap;justify-content:center}.tab{font-size:12px;padding:10px 15px}.content-sections{padding:20px}.exploration-tips,.significance-grid{gap:15px;grid-template-columns:1fr}.connected-locations{justify-content:center}.connection-header{align-items:flex-start;flex-direction:column;gap:10px}}@media (max-width:480px){.cultural-intelligence-panel{border-radius:0;height:100vh;width:100%}.ci-header h2{font-size:18px}.content-sections{padding:15px}.narrative-hook,.significance-card,.tip-category{padding:20px}.hook-text{font-size:16px}}.dark-theme .cultural-intelligence-panel{background:linear-gradient(135deg,#2c3e50,#34495e)}.dark-theme .ci-content{background:#2c3e50f2;color:#ecf0f1}.dark-theme .connection-group,.dark-theme .significance-card,.dark-theme .story-card,.dark-theme .tip-category{background:#34495ecc;border-color:#ffffff1a;color:#ecf0f1}.dark-theme .connected-location,.dark-theme .economic-item,.dark-theme .story-context{background:#2c3e50e6;color:#ecf0f1}.dark-theme .context-timeline,.dark-theme .economic-context{background:#34495ecc;color:#ecf0f1}.cultural-intelligence-panel:focus-within{outline:3px solid #4caf50;outline-offset:2px}.close-btn:focus,.explore-connection-btn:focus,.tab:focus{outline:2px solid #4caf50;outline-offset:2px}@media (prefers-contrast:high){.cultural-intelligence-panel{border:3px solid #000}.connection-group,.significance-card,.tip-category{border:2px solid #000}.tab.active{background:#000;color:#fff}}.historical-view{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#1e1e28f5;bottom:0;left:0;opacity:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .3s ease;visibility:hidden;z-index:2000}.historical-view.visible{opacity:1;visibility:visible}.historical-view-header{align-items:center;animation:headerSlideIn .6s ease-out .2s both;display:flex;justify-content:space-between;left:32px;position:absolute;right:32px;top:24px;z-index:2001}@keyframes headerSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.close-historical{align-items:center;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);background:#2d2d3acc;border:2px solid #3f51b599;border-radius:var(--radius-round);box-shadow:var(--shadow-medium);color:var(--primary-light);cursor:pointer;display:flex;font-size:20px;font-weight:300;height:48px;justify-content:center;overflow:hidden;position:relative;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1);width:48px}.close-historical:before{display:none}.close-historical:hover{background:#3f51b533;border-color:var(--primary-color);box-shadow:0 12px 40px #3f51b54d;color:#fff;transform:scale(1.05) rotate(90deg)}.view-mode-toggle{-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);background:#2d2d3acc;border:2px solid #3f51b54d;border-radius:var(--radius-xl);box-shadow:var(--shadow-dark);display:flex;overflow:hidden;padding:var(--spacing-sm);position:relative}.view-mode-toggle:before{display:none}.mode-btn{background:#0000;border:none;border-radius:calc(var(--radius-xl) - var(--spacing-xs));color:#fffc;cursor:pointer;font-size:var(--font-size-sm);font-weight:600;letter-spacing:.5px;min-width:120px;padding:var(--spacing-md) var(--spacing-lg);position:relative;text-transform:uppercase;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1);z-index:1}.mode-btn.active,.mode-btn:hover{color:var(--primary-light)}.mode-btn.active{background:linear-gradient(135deg,#3f51b533,#7986cb26);border:1px solid #3f51b566;box-shadow:0 4px 16px #3f51b54d}.historical-content{display:flex;height:100vh;padding-top:100px;position:relative;z-index:1}.image-section{align-items:center;animation:imageSlideIn .8s ease-out .4s both;display:flex;flex:1.3 1;justify-content:center;padding:32px}@keyframes imageSlideIn{0%{opacity:0;transform:translateX(-50px) scale(.9)}to{opacity:1;transform:translateX(0) scale(1)}}.historical-image-container{background:#3f51b51a;border:2px solid #3f51b54d;border-radius:var(--radius-lg);box-shadow:var(--shadow-dark);height:70vh;max-width:850px;overflow:hidden;position:relative;transition:all var(--animation-slow) cubic-bezier(.4,0,.2,1);width:100%}.historical-image-container:hover{border-color:var(--primary-light);box-shadow:0 20px 60px #0006;transform:scale(1.02)}.historical-image{filter:saturate(1.1) contrast(1.05);height:100%;object-fit:cover;opacity:0;transition:all .8s cubic-bezier(.4,0,.2,1);width:100%}.historical-image.loaded{opacity:1}.historical-image:hover{filter:saturate(1.2) contrast(1.1) brightness(1.05)}.historical-overlay{background:linear-gradient(180deg,#0000004d 0,#0000 25%,#0000 75%,#00000080);bottom:0;left:0;position:absolute;right:0;top:0;z-index:2}.time-period-badge{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));left:var(--spacing-lg)}.dynasty-badge,.time-period-badge{-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:2px solid #ffffff4d;border-radius:var(--radius-xl);box-shadow:var(--shadow-medium);color:#fff;font-size:var(--font-size-xs);font-weight:700;letter-spacing:.5px;padding:var(--spacing-sm) var(--spacing-md);position:absolute;text-transform:uppercase;top:var(--spacing-lg);z-index:3}.dynasty-badge{background:linear-gradient(135deg,var(--accent-color),var(--accent-dark));right:var(--spacing-lg)}.image-section.comparison{padding:20px 10px}.comparison-container{display:flex;gap:20px;height:70vh;max-width:1000px;width:100%}.comparison-panel{border-radius:12px;box-shadow:0 15px 40px #0000004d;flex:1 1;overflow:hidden;position:relative}.comparison-image{height:100%;object-fit:cover;width:100%}.comparison-label{background:linear-gradient(#0000,#000c);bottom:0;color:#fff;font-size:16px;font-weight:600;left:0;padding:15px;position:absolute;right:0;text-align:center}.comparison-label.historical{background:linear-gradient(#0000,#3f51b5cc)}.comparison-label.modern{background:linear-gradient(#0000,#4caf50cc)}.historical-info{animation:infoSlideIn .8s ease-out .6s both;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#1e1e2866;border-left:2px solid #3f51b54d;color:#fff;flex:0.9 1;max-height:calc(100vh - 120px);overflow-y:auto;padding:32px 48px 32px 24px}@keyframes infoSlideIn{0%{opacity:0;transform:translateX(50px)}to{opacity:1;transform:translateX(0)}}.historical-info::-webkit-scrollbar{width:8px}.historical-info::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.historical-info::-webkit-scrollbar-thumb{background:linear-gradient(135deg,var(--primary-light),var(--primary-color));border-radius:var(--radius-sm)}.historical-info h2{color:var(--primary-light);font-size:var(--font-size-xxl);font-weight:700;line-height:1.2;margin-bottom:var(--spacing-lg)}.historical-description{background:#ffffff0d;border-left:4px solid var(--primary-light);border-radius:var(--radius-md);color:#ffffffe6;font-size:var(--font-size-lg);line-height:1.7;margin-bottom:var(--spacing-xl);padding:var(--spacing-lg);text-shadow:0 1px 2px #0000004d}.historical-features h3{border-bottom:3px solid #7986cb66;color:var(--primary-light);font-size:var(--font-size-xl);margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-sm);position:relative}.historical-features h3:after{background:linear-gradient(90deg,var(--primary-light),#7986cb4d);border-radius:var(--radius-sm);bottom:-3px;content:"";height:3px;left:0;position:absolute;width:60px}.feature-grid{grid-gap:32px;display:grid;gap:32px;grid-template-columns:1fr 1fr;margin-bottom:40px}.feature-category{background:#ffffff08;border:1px solid #3f51b533;border-radius:var(--radius-lg);overflow:hidden;padding:var(--spacing-lg);position:relative;transition:all var(--animation-normal) cubic-bezier(.4,0,.2,1)}.feature-category:before{display:none}.feature-category:hover{border-color:#3f51b566;box-shadow:0 12px 40px #3f51b526;transform:translateY(-4px)}.feature-category h4{color:var(--primary-light);font-size:var(--font-size-lg);font-weight:600;margin-bottom:var(--spacing-md)}.feature-category ul{list-style:none;padding:0}.feature-category li{color:#ffffffd9;line-height:1.5;padding:10px 0 10px 28px;position:relative;transition:all .3s ease}.feature-category li:hover{color:#fff;transform:translateX(4px)}.feature-category li:before{color:var(--primary-light);content:"◦";font-size:16px;left:0;position:absolute}.historical-context{background:#ffffff0d;border-left:4px solid var(--primary-light);border-radius:12px;margin:30px 0;padding:20px}.historical-context h3{color:var(--primary-light);font-size:20px;margin-bottom:10px}.historical-context p{color:#fffc;line-height:1.6}.period-timeline{background:#ffffff08;border:1px solid #3f51b533;border-radius:16px;margin-top:40px;padding:24px}.period-timeline h3{color:var(--primary-light);font-size:22px;margin-bottom:20px}.timeline-bar{background:#3f51b533;border-radius:6px;box-shadow:inset 0 2px 8px #0000004d;height:12px;margin:32px 0;position:relative}.timeline-marker{align-items:center;background:var(--primary-color);border-radius:50%;display:flex;height:44px;justify-content:center;top:-16px;width:44px}.marker-label,.timeline-marker{box-shadow:var(--shadow-medium);position:absolute;transform:translateX(-50%)}.marker-label{background:#1e1e28e6;border:2px solid #3f51b566;border-radius:20px;color:var(--primary-light);font-size:12px;font-weight:600;left:50%;padding:8px 16px;top:-48px;white-space:nowrap}@media (max-width:1200px){.historical-content{flex-direction:column}.historical-info,.image-section{flex:none;height:50vh}.historical-info{padding:20px}.feature-grid{grid-template-columns:1fr}}@media (max-width:768px){.historical-view-header{align-items:stretch;flex-direction:column;gap:15px}.comparison-container{flex-direction:column;gap:10px}.comparison-panel{height:35vh}.historical-content{padding-top:120px}}.historical-image:not(.loaded){background:#ffffff1a}
/*# sourceMappingURL=main.6e54f615.css.map*/