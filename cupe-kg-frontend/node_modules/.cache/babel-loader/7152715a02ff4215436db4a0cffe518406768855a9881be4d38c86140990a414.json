{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axios from 'axios';\nconst API_BASE_URL = 'http://localhost:5000';\n\n// Cache for translations to avoid repeated API calls\nconst translationCache = new Map();\n\n/**\r\n * Translate text using the backend API\r\n */\nexport const translateText = async (text, targetLang, sourceLang = 'en') => {\n  if (!text || targetLang === 'en' || targetLang === sourceLang) {\n    return text;\n  }\n  const cacheKey = `${sourceLang}:${targetLang}:${text.substring(0, 100)}`;\n  if (translationCache.has(cacheKey)) {\n    return translationCache.get(cacheKey);\n  }\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/translate/text`, {\n      text,\n      target_lang: targetLang,\n      source_lang: sourceLang\n    });\n    const translatedText = response.data.translatedText;\n    translationCache.set(cacheKey, translatedText);\n    return translatedText;\n  } catch (error) {\n    console.error('Translation error:', error);\n    return text; // Return original text on error\n  }\n};\n\n/**\r\n * Custom hook to translate text reactively when language changes\r\n */\nexport const useTranslatedText = (text, sourceLang = 'en') => {\n  _s();\n  const {\n    i18n\n  } = useTranslation();\n  const [translatedText, setTranslatedText] = useState(text);\n  const [isTranslating, setIsTranslating] = useState(false);\n  useEffect(() => {\n    const translate = async () => {\n      if (!text || i18n.language === 'en') {\n        setTranslatedText(text);\n        return;\n      }\n      setIsTranslating(true);\n      const translated = await translateText(text, i18n.language, sourceLang);\n      setTranslatedText(translated);\n      setIsTranslating(false);\n    };\n    translate();\n  }, [text, i18n.language, sourceLang]);\n  return {\n    translatedText,\n    isTranslating\n  };\n};\n\n/**\r\n * Custom hook to translate an object with multiple fields\r\n */\n_s(useTranslatedText, \"nhdMmS5bz3R/kOFf1OHrkSLlzeY=\", false, function () {\n  return [useTranslation];\n});\nexport const useTranslatedObject = (obj, fieldsToTranslate = []) => {\n  _s2();\n  const {\n    i18n\n  } = useTranslation();\n  const [translatedObj, setTranslatedObj] = useState(obj);\n  const [isTranslating, setIsTranslating] = useState(false);\n  useEffect(() => {\n    const translateObject = async () => {\n      if (!obj || i18n.language === 'en') {\n        setTranslatedObj(obj);\n        return;\n      }\n      setIsTranslating(true);\n      const translated = {\n        ...obj\n      };\n      for (const field of fieldsToTranslate) {\n        if (obj[field] && typeof obj[field] === 'string') {\n          translated[field] = await translateText(obj[field], i18n.language);\n        }\n      }\n      setTranslatedObj(translated);\n      setIsTranslating(false);\n    };\n    translateObject();\n  }, [obj, i18n.language, fieldsToTranslate]);\n  return {\n    translatedObj,\n    isTranslating\n  };\n};\n\n/**\r\n * Translate multiple items in an array\r\n */\n_s2(useTranslatedObject, \"8+CefnnR6/m4wwyI2AD7WQPt0sY=\", false, function () {\n  return [useTranslation];\n});\nexport const translateArray = async (items, fieldsToTranslate, targetLang, sourceLang = 'en') => {\n  if (!items || items.length === 0 || targetLang === 'en') {\n    return items;\n  }\n  const translatedItems = await Promise.all(items.map(async item => {\n    const translated = {\n      ...item\n    };\n    for (const field of fieldsToTranslate) {\n      if (item[field] && typeof item[field] === 'string') {\n        translated[field] = await translateText(item[field], targetLang, sourceLang);\n      }\n    }\n    return translated;\n  }));\n  return translatedItems;\n};","map":{"version":3,"names":["useState","useEffect","useTranslation","axios","API_BASE_URL","translationCache","Map","translateText","text","targetLang","sourceLang","cacheKey","substring","has","get","response","post","target_lang","source_lang","translatedText","data","set","error","console","useTranslatedText","_s","i18n","setTranslatedText","isTranslating","setIsTranslating","translate","language","translated","useTranslatedObject","obj","fieldsToTranslate","_s2","translatedObj","setTranslatedObj","translateObject","field","translateArray","items","length","translatedItems","Promise","all","map","item"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/utils/translationHelper.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\n// Cache for translations to avoid repeated API calls\r\nconst translationCache = new Map();\r\n\r\n/**\r\n * Translate text using the backend API\r\n */\r\nexport const translateText = async (text, targetLang, sourceLang = 'en') => {\r\n  if (!text || targetLang === 'en' || targetLang === sourceLang) {\r\n    return text;\r\n  }\r\n\r\n  const cacheKey = `${sourceLang}:${targetLang}:${text.substring(0, 100)}`;\r\n\r\n  if (translationCache.has(cacheKey)) {\r\n    return translationCache.get(cacheKey);\r\n  }\r\n\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/api/translate/text`, {\r\n      text,\r\n      target_lang: targetLang,\r\n      source_lang: sourceLang\r\n    });\r\n\r\n    const translatedText = response.data.translatedText;\r\n    translationCache.set(cacheKey, translatedText);\r\n    return translatedText;\r\n  } catch (error) {\r\n    console.error('Translation error:', error);\r\n    return text; // Return original text on error\r\n  }\r\n};\r\n\r\n/**\r\n * Custom hook to translate text reactively when language changes\r\n */\r\nexport const useTranslatedText = (text, sourceLang = 'en') => {\r\n  const { i18n } = useTranslation();\r\n  const [translatedText, setTranslatedText] = useState(text);\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const translate = async () => {\r\n      if (!text || i18n.language === 'en') {\r\n        setTranslatedText(text);\r\n        return;\r\n      }\r\n\r\n      setIsTranslating(true);\r\n      const translated = await translateText(text, i18n.language, sourceLang);\r\n      setTranslatedText(translated);\r\n      setIsTranslating(false);\r\n    };\r\n\r\n    translate();\r\n  }, [text, i18n.language, sourceLang]);\r\n\r\n  return { translatedText, isTranslating };\r\n};\r\n\r\n/**\r\n * Custom hook to translate an object with multiple fields\r\n */\r\nexport const useTranslatedObject = (obj, fieldsToTranslate = []) => {\r\n  const { i18n } = useTranslation();\r\n  const [translatedObj, setTranslatedObj] = useState(obj);\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const translateObject = async () => {\r\n      if (!obj || i18n.language === 'en') {\r\n        setTranslatedObj(obj);\r\n        return;\r\n      }\r\n\r\n      setIsTranslating(true);\r\n      const translated = { ...obj };\r\n\r\n      for (const field of fieldsToTranslate) {\r\n        if (obj[field] && typeof obj[field] === 'string') {\r\n          translated[field] = await translateText(obj[field], i18n.language);\r\n        }\r\n      }\r\n\r\n      setTranslatedObj(translated);\r\n      setIsTranslating(false);\r\n    };\r\n\r\n    translateObject();\r\n  }, [obj, i18n.language, fieldsToTranslate]);\r\n\r\n  return { translatedObj, isTranslating };\r\n};\r\n\r\n/**\r\n * Translate multiple items in an array\r\n */\r\nexport const translateArray = async (items, fieldsToTranslate, targetLang, sourceLang = 'en') => {\r\n  if (!items || items.length === 0 || targetLang === 'en') {\r\n    return items;\r\n  }\r\n\r\n  const translatedItems = await Promise.all(\r\n    items.map(async (item) => {\r\n      const translated = { ...item };\r\n      for (const field of fieldsToTranslate) {\r\n        if (item[field] && typeof item[field] === 'string') {\r\n          translated[field] = await translateText(item[field], targetLang, sourceLang);\r\n        }\r\n      }\r\n      return translated;\r\n    })\r\n  );\r\n\r\n  return translatedItems;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}