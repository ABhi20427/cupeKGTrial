{"ast":null,"code":"// src/services/api.js\nconst API_BASE=process.env.REACT_APP_API_URL||'http://localhost:5000/api';console.log('API_BASE configured as:',API_BASE);// Location Services\nexport const fetchLocations=async()=>{try{const response=await fetch(`${API_BASE}/locations`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Fetched locations:',data.length);return data;}catch(error){console.error('Error fetching locations:',error);throw error;}};export const fetchPlaceData=async locationId=>{try{const response=await fetch(`${API_BASE}/place-info?name=${encodeURIComponent(locationId)}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Fetched place data for:',locationId,data);return data;}catch(error){console.error('Error fetching place data:',error);throw error;}};export const fetchRoutes=async()=>{try{const response=await fetch(`${API_BASE}/routes`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Fetched routes:',data.length);return data;}catch(error){console.error('Error fetching routes:',error);throw error;}};// Search Services\nexport const searchLocations=async query=>{try{const response=await fetch(`${API_BASE}/search?q=${encodeURIComponent(query)}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Search results for:',query,data.length);return data;}catch(error){console.error('Error searching locations:',error);throw error;}};// Chatbot Services\nexport const askChatbot=async function(question,sessionId){let locationId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const response=await fetch(`${API_BASE}/chatbot/ask`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question,sessionId,locationId})});if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Chatbot response:',data);return data;}catch(error){console.error('Error asking chatbot:',error);throw error;}};export const getChatbotRecommendations=async preferences=>{try{const response=await fetch(`${API_BASE}/chatbot/recommend`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(preferences)});if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('Chatbot recommendations:',data);return data;}catch(error){console.error('Error getting recommendations:',error);throw error;}};// Cultural perspective endpoint (if implemented later)\nexport const fetchPerspective=async(placeName,perspectiveType)=>{try{const response=await fetch(`${API_BASE}/perspective?place=${encodeURIComponent(placeName)}&type=${encodeURIComponent(perspectiveType)}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();return data;}catch(error){console.error('Error fetching perspective:',error);throw error;}};// Utility function to check API health\nexport const checkAPIHealth=async()=>{try{const response=await fetch(`${API_BASE}/health`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();console.log('API Health:',data);return data;}catch(error){console.error('API health check failed:',error);throw error;}};// Advanced search with filters\nexport const advancedSearch=async filters=>{try{const queryParams=new URLSearchParams();if(filters.query)queryParams.append('q',filters.query);if(filters.category)queryParams.append('category',filters.category);if(filters.dynasty)queryParams.append('dynasty',filters.dynasty);if(filters.period)queryParams.append('period',filters.period);const response=await fetch(`${API_BASE}/search/advanced?${queryParams}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const data=await response.json();return data;}catch(error){console.error('Error in advanced search:',error);throw error;}};// No need to re-export API_BASE as it's already exported through const declaration","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","console","log","fetchLocations","response","fetch","ok","Error","status","data","json","length","error","fetchPlaceData","locationId","encodeURIComponent","fetchRoutes","searchLocations","query","askChatbot","question","sessionId","arguments","undefined","method","headers","body","JSON","stringify","getChatbotRecommendations","preferences","fetchPerspective","placeName","perspectiveType","checkAPIHealth","advancedSearch","filters","queryParams","URLSearchParams","append","category","dynasty","period"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconsole.log('API_BASE configured as:', API_BASE);\r\n\r\n// Location Services\r\nexport const fetchLocations = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/locations`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log('Fetched locations:', data.length);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching locations:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const fetchPlaceData = async (locationId) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/place-info?name=${encodeURIComponent(locationId)}`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log('Fetched place data for:', locationId, data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching place data:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const fetchRoutes = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/routes`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log('Fetched routes:', data.length);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching routes:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Search Services\r\nexport const searchLocations = async (query) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/search?q=${encodeURIComponent(query)}`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log('Search results for:', query, data.length);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error searching locations:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Chatbot Services\r\nexport const askChatbot = async (question, sessionId, locationId = null) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/chatbot/ask`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        question,\r\n        sessionId,\r\n        locationId\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    console.log('Chatbot response:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error asking chatbot:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getChatbotRecommendations = async (preferences) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/chatbot/recommend`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(preferences)\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    console.log('Chatbot recommendations:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error getting recommendations:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Cultural perspective endpoint (if implemented later)\r\nexport const fetchPerspective = async (placeName, perspectiveType) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/perspective?place=${encodeURIComponent(placeName)}&type=${encodeURIComponent(perspectiveType)}`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching perspective:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Utility function to check API health\r\nexport const checkAPIHealth = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/health`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log('API Health:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('API health check failed:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Advanced search with filters\r\nexport const advancedSearch = async (filters) => {\r\n  try {\r\n    const queryParams = new URLSearchParams();\r\n    \r\n    if (filters.query) queryParams.append('q', filters.query);\r\n    if (filters.category) queryParams.append('category', filters.category);\r\n    if (filters.dynasty) queryParams.append('dynasty', filters.dynasty);\r\n    if (filters.period) queryParams.append('period', filters.period);\r\n    \r\n    const response = await fetch(`${API_BASE}/search/advanced?${queryParams}`);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error in advanced search:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// No need to re-export API_BASE as it's already exported through const declaration"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}