{"ast":null,"code":"var _jsxFileName = \"D:\\\\MY projects\\\\CupeKG\\\\cupe-kg-frontend\\\\src\\\\components\\\\Timeline\\\\Timeline.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// cupe-kg-frontend/src/components/Timeline/Timeline.jsx\n// FINAL VERSION with Complete API Integration\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useMapContext } from '../../context/MapContext';\nimport timelineApiService from '../../services/timelineApi';\nimport { useTranslatedText } from '../../utils/translationHelper';\nimport './Timeline.css';\n\n// Helper component to translate text items\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TranslatedText = ({\n  text\n}) => {\n  _s();\n  const {\n    translatedText\n  } = useTranslatedText(text || '');\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: translatedText\n  }, void 0, false);\n};\n_s(TranslatedText, \"HCcCHuIpchlI3J+e0WJbWYpV/ao=\", false, function () {\n  return [useTranslatedText];\n});\n_c = TranslatedText;\nconst Timeline = ({\n  isVisible,\n  onLocationSelect\n}) => {\n  _s2();\n  const {\n    t\n  } = useTranslation();\n  const {\n    locations,\n    selectLocation,\n    selectedLocation\n  } = useMapContext();\n  const [selectedPeriod, setSelectedPeriod] = useState(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [timelinePeriods, setTimelinePeriods] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [dataSource, setDataSource] = useState('none');\n  const [apiHealth, setApiHealth] = useState(null);\n\n  // Fetch timeline data from backend API\n  const fetchTimelineFromAPI = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      console.log('Timeline: Attempting to fetch from API...');\n\n      // First check API health\n      try {\n        const health = await timelineApiService.checkTimelineHealth();\n        setApiHealth(health);\n        console.log('Timeline API Health:', health);\n      } catch (healthError) {\n        console.warn('Timeline API health check failed:', healthError.message);\n      }\n\n      // Fetch timeline data\n      const data = await timelineApiService.fetchTimelinePeriods();\n      if (data.periods && data.periods.length > 0) {\n        setTimelinePeriods(data.periods);\n        setDataSource('backend');\n        console.log(`Timeline: Successfully loaded ${data.totalPeriods} periods from backend API`);\n        console.log('Timeline data:', data);\n      } else {\n        throw new Error('No timeline periods received from API');\n      }\n    } catch (error) {\n      console.error('Timeline API Error:', error);\n      setError(error.message);\n\n      // Fallback to frontend processing\n      console.log('Timeline: Falling back to frontend data processing');\n      if (locations && locations.length > 0) {\n        const periods = processLocationsIntoTimeline(locations);\n        setTimelinePeriods(periods);\n        setDataSource('frontend-fallback');\n      } else {\n        setDataSource('no-data');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [locations]);\n\n  // Process locations into timeline periods (fallback method)\n  const processLocationsIntoTimeline = useCallback(locations => {\n    if (!locations || !Array.isArray(locations)) {\n      console.warn('Timeline: Invalid locations data for processing');\n      return [];\n    }\n    const periodMap = new Map();\n    locations.forEach(location => {\n      if (!location || !location.period) return;\n      try {\n        // Extract period information\n        const periodInfo = extractPeriodInfo(location.period);\n        periodInfo.forEach(period => {\n          const key = period.label;\n          if (!periodMap.has(key)) {\n            periodMap.set(key, {\n              ...period,\n              locations: []\n            });\n          }\n          periodMap.get(key).locations.push(location);\n        });\n      } catch (err) {\n        console.warn(`Timeline: Error processing location ${location.name}:`, err);\n      }\n    });\n\n    // Convert to array and sort by start year\n    const periodsArray = Array.from(periodMap.values());\n    periodsArray.sort((a, b) => a.startYear - b.startYear);\n    console.log(`Timeline: Processed ${periodsArray.length} periods from ${locations.length} locations`);\n    return periodsArray;\n  }, []);\n  const extractPeriodInfo = periodString => {\n    const periods = [];\n    if (!periodString || typeof periodString !== 'string') {\n      return periods;\n    }\n\n    // Handle different period formats with more robust patterns\n    const patterns = [\n    // \"1336 CE - 1646 CE\"\n    {\n      regex: /(\\d{1,4})\\s*CE\\s*-\\s*(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[2]),\n        label: `${match[1]} CE - ${match[2]} CE`,\n        era: 'CE'\n      })\n    },\n    // \"13th century CE\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*CE/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        const startYear = (century - 1) * 100 + 1;\n        const endYear = century * 100;\n        return {\n          startYear,\n          endYear,\n          label: `${century}${getOrdinalSuffix(century)} Century CE`,\n          era: 'CE'\n        };\n      }\n    },\n    // \"950 CE - 1050 CE\" (range without second CE)\n    {\n      regex: /(\\d{1,4})\\s*-\\s*(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[2]),\n        label: `${match[1]} - ${match[2]} CE`,\n        era: 'CE'\n      })\n    },\n    // Single year \"1632 CE\"\n    {\n      regex: /(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[1]) + 50,\n        // Approximate 50-year span\n        label: `${match[1]} CE`,\n        era: 'CE'\n      })\n    },\n    // \"2nd century BCE\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        return {\n          startYear: -(century * 100),\n          endYear: -((century - 1) * 100 + 1),\n          label: `${century}${getOrdinalSuffix(century)} Century BCE`,\n          era: 'BCE'\n        };\n      }\n    },\n    // Complex periods like \"3rd century BCE (with later additions)\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE.*$/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        return {\n          startYear: -(century * 100),\n          endYear: -((century - 1) * 100 + 1),\n          label: `${century}${getOrdinalSuffix(century)} Century BCE`,\n          era: 'BCE'\n        };\n      }\n    }];\n    for (const pattern of patterns) {\n      const match = periodString.match(pattern.regex);\n      if (match) {\n        try {\n          periods.push(pattern.handler(match));\n          break;\n        } catch (err) {\n          console.warn(`Error parsing period \"${periodString}\":`, err);\n          continue;\n        }\n      }\n    }\n\n    // Fallback: create a general period\n    if (periods.length === 0) {\n      periods.push({\n        startYear: 1000,\n        // Default\n        endYear: 2000,\n        label: periodString.trim(),\n        era: 'Unknown'\n      });\n    }\n    return periods;\n  };\n\n  // Helper function for ordinal suffixes\n  const getOrdinalSuffix = num => {\n    const remainder = num % 10;\n    const hundredRemainder = num % 100;\n    if (hundredRemainder >= 11 && hundredRemainder <= 13) {\n      return 'th';\n    }\n    switch (remainder) {\n      case 1:\n        return 'st';\n      case 2:\n        return 'nd';\n      case 3:\n        return 'rd';\n      default:\n        return 'th';\n    }\n  };\n\n  // Main effect: Load timeline data when component becomes visible\n  useEffect(() => {\n    if (isVisible && timelinePeriods.length === 0) {\n      fetchTimelineFromAPI();\n    }\n  }, [isVisible, fetchTimelineFromAPI, timelinePeriods.length]);\n\n  // Fallback effect: Use local data if API fails and locations are available\n  useEffect(() => {\n    if (locations && locations.length > 0 && timelinePeriods.length === 0 && !isLoading && dataSource === 'no-data') {\n      console.log('Timeline: Using local locations data as final fallback');\n      const periods = processLocationsIntoTimeline(locations);\n      if (periods.length > 0) {\n        setTimelinePeriods(periods);\n        setDataSource('frontend');\n      }\n    }\n  }, [locations, timelinePeriods.length, isLoading, dataSource, processLocationsIntoTimeline]);\n  const handlePeriodClick = period => {\n    if ((selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label) {\n      setSelectedPeriod(null);\n      // Reset to modern view\n      if (onLocationSelect) {\n        onLocationSelect(null, 'modern');\n      }\n    } else {\n      setSelectedPeriod(period);\n      // Trigger historical visualization mode\n      if (onLocationSelect) {\n        onLocationSelect(period.locations[0] || null, 'historical', {\n          period: period,\n          era: period.era,\n          timeframe: period.label\n        });\n      }\n    }\n  };\n  const handleLocationClick = location => {\n    selectLocation(location);\n    if (onLocationSelect) {\n      // Pass historical context when clicking from timeline\n      onLocationSelect(location, 'historical', {\n        period: selectedPeriod,\n        era: selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.era,\n        timeframe: selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label,\n        dynasty: location.dynasty\n      });\n    }\n  };\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  // Retry loading from API\n  const retryApiLoad = () => {\n    setError(null);\n    setTimelinePeriods([]);\n    setDataSource('none');\n    fetchTimelineFromAPI();\n  };\n  const getEraColor = era => {\n    const colors = {\n      'CE': '#3f51b5',\n      'BCE': '#e91e63',\n      'Unknown': '#757575'\n    };\n    return colors[era] || colors['Unknown'];\n  };\n  const getDynastyColor = dynasty => {\n    if (!dynasty) return '#757575';\n    const colors = {\n      'Mughal Empire': '#ff9800',\n      'Vijayanagara Empire': '#4caf50',\n      'Chandela Dynasty': '#9c27b0',\n      'Eastern Ganga Dynasty': '#f44336',\n      'Satavahana and Vakataka': '#00bcd4',\n      'Rashtrakuta Dynasty': '#795548',\n      'Delhi Sultanate': '#607d8b',\n      'Sikh Gurus': '#9c27b0',\n      'Portuguese Colonial': '#ff5722',\n      'Mauryan Empire': '#3f51b5'\n    };\n\n    // Find matching dynasty\n    for (const [key, color] of Object.entries(colors)) {\n      if (dynasty.includes(key)) {\n        return color;\n      }\n    }\n    return '#757575';\n  };\n  if (!isVisible) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `timeline-container ${isExpanded ? 'expanded' : 'collapsed'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-header\",\n      onClick: toggleExpanded,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: t('timeline.title', 'Historical Timeline')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-status\",\n        children: [dataSource === 'backend' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator api\",\n          title: \"Data from backend API\",\n          children: \"API\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 40\n        }, this), dataSource === 'frontend' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator local\",\n          title: \"Data processed locally\",\n          children: \"LOCAL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 41\n        }, this), dataSource === 'frontend-fallback' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator fallback\",\n          title: \"Fallback to local processing\",\n          children: \"FALLBACK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 50\n        }, this), apiHealth && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"api-health-indicator\",\n          title: `${apiHealth.locationsWithPeriods}/${apiHealth.totalLocations} locations have period data`,\n          children: [apiHealth.locationsWithPeriods, \"/\", apiHealth.totalLocations]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"expand-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-content\",\n      children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: t('timeline.loading', 'Loading timeline data from server...')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 13\n      }, this), error && !isLoading && timelinePeriods.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: t('timeline.error', 'Failed to load timeline data')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: retryApiLoad,\n          className: \"retry-button\",\n          children: t('timeline.retry', 'Retry API Connection')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 13\n      }, this), !isLoading && timelinePeriods.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-periods\",\n          children: timelinePeriods.map((period, index) => {\n            var _period$locations, _period$locations2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `timeline-period ${(selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label ? 'active' : ''}`,\n              onClick: () => handlePeriodClick(period),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-marker\",\n                style: {\n                  backgroundColor: getEraColor(period.era)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"period-label\",\n                  children: period.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"period-meta\",\n                  children: [((_period$locations = period.locations) === null || _period$locations === void 0 ? void 0 : _period$locations.length) || 0, \" location\", (((_period$locations2 = period.locations) === null || _period$locations2 === void 0 ? void 0 : _period$locations2.length) || 0) !== 1 ? 's' : '', period.era !== 'Unknown' && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"era-indicator\",\n                    children: [\" \\u2022 \", period.era]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 21\n              }, this), (selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label && period.locations && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-locations\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: t('timeline.heritageSites', 'Heritage Sites from this Period')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: period.locations.map((location, locIndex) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: `location-item ${(selectedLocation === null || selectedLocation === void 0 ? void 0 : selectedLocation.id) === location.id ? 'selected' : ''}`,\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleLocationClick(location);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"location-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-name\",\n                        children: /*#__PURE__*/_jsxDEV(TranslatedText, {\n                          text: location.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 421,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 420,\n                        columnNumber: 33\n                      }, this), location.dynasty && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-dynasty\",\n                        children: /*#__PURE__*/_jsxDEV(TranslatedText, {\n                          text: location.dynasty\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 425,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 35\n                      }, this), location.category && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-category\",\n                        children: /*#__PURE__*/_jsxDEV(TranslatedText, {\n                          text: location.category\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 430,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 429,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 419,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dynasty-indicator\",\n                      style: {\n                        backgroundColor: getDynastyColor(location.dynasty)\n                      },\n                      title: location.dynasty || 'Unknown dynasty'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 434,\n                      columnNumber: 31\n                    }, this)]\n                  }, location.id || `${location.name}-${locIndex}`, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 23\n              }, this)]\n            }, `${period.label}-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }, this), (error || dataSource === 'frontend-fallback') && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-info\",\n          children: /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [dataSource === 'frontend-fallback' && '‚ö†Ô∏è Using fallback data processing', error && !timelinePeriods.length && '‚ùå Server connection failed']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true), !isLoading && timelinePeriods.length === 0 && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-empty-icon\",\n          children: \"\\uD83D\\uDCC5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-empty-text\",\n          children: \"No timeline data available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: retryApiLoad,\n          className: \"retry-button\",\n          children: \"Try Loading Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 13\n      }, this), timelinePeriods.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Era Legend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-items\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#3f51b5'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Common Era (CE)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#e91e63'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Before Common Era (BCE)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 17\n          }, this), timelinePeriods.some(p => p.era === 'Unknown') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#757575'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Unknown Period\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 5\n  }, this);\n};\n_s2(Timeline, \"fPZabzu54gceN/NfklTEeZAolpo=\", false, function () {\n  return [useTranslation, useMapContext];\n});\n_c2 = Timeline;\nexport default Timeline;\nvar _c, _c2;\n$RefreshReg$(_c, \"TranslatedText\");\n$RefreshReg$(_c2, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useTranslation","useMapContext","timelineApiService","useTranslatedText","Fragment","_Fragment","jsxDEV","_jsxDEV","TranslatedText","text","_s","translatedText","children","_c","Timeline","isVisible","onLocationSelect","_s2","t","locations","selectLocation","selectedLocation","selectedPeriod","setSelectedPeriod","isExpanded","setIsExpanded","timelinePeriods","setTimelinePeriods","isLoading","setIsLoading","error","setError","dataSource","setDataSource","apiHealth","setApiHealth","fetchTimelineFromAPI","console","log","health","checkTimelineHealth","healthError","warn","message","data","fetchTimelinePeriods","periods","length","totalPeriods","Error","processLocationsIntoTimeline","Array","isArray","periodMap","Map","forEach","location","period","periodInfo","extractPeriodInfo","key","label","has","set","get","push","err","name","periodsArray","from","values","sort","a","b","startYear","periodString","patterns","regex","handler","match","parseInt","endYear","era","century","getOrdinalSuffix","pattern","trim","num","remainder","hundredRemainder","handlePeriodClick","timeframe","handleLocationClick","dynasty","toggleExpanded","retryApiLoad","getEraColor","colors","getDynastyColor","color","Object","entries","includes","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","title","locationsWithPeriods","totalLocations","map","index","_period$locations","_period$locations2","style","backgroundColor","locIndex","id","e","stopPropagation","category","some","p","_c2","$RefreshReg$"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/components/Timeline/Timeline.jsx"],"sourcesContent":["// cupe-kg-frontend/src/components/Timeline/Timeline.jsx\r\n// FINAL VERSION with Complete API Integration\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useMapContext } from '../../context/MapContext';\r\nimport timelineApiService from '../../services/timelineApi';\r\nimport { useTranslatedText } from '../../utils/translationHelper';\r\nimport './Timeline.css';\r\n\r\n// Helper component to translate text items\r\nconst TranslatedText = ({ text }) => {\r\n  const { translatedText } = useTranslatedText(text || '');\r\n  return <>{translatedText}</>;\r\n};\r\n\r\nconst Timeline = ({ isVisible, onLocationSelect }) => {\r\n  const { t } = useTranslation();\r\n  const { locations, selectLocation, selectedLocation } = useMapContext();\r\n  const [selectedPeriod, setSelectedPeriod] = useState(null);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [timelinePeriods, setTimelinePeriods] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [dataSource, setDataSource] = useState('none');\r\n  const [apiHealth, setApiHealth] = useState(null);\r\n\r\n  // Fetch timeline data from backend API\r\n  const fetchTimelineFromAPI = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      console.log('Timeline: Attempting to fetch from API...');\r\n      \r\n      // First check API health\r\n      try {\r\n        const health = await timelineApiService.checkTimelineHealth();\r\n        setApiHealth(health);\r\n        console.log('Timeline API Health:', health);\r\n      } catch (healthError) {\r\n        console.warn('Timeline API health check failed:', healthError.message);\r\n      }\r\n      \r\n      // Fetch timeline data\r\n      const data = await timelineApiService.fetchTimelinePeriods();\r\n      \r\n      if (data.periods && data.periods.length > 0) {\r\n        setTimelinePeriods(data.periods);\r\n        setDataSource('backend');\r\n        console.log(`Timeline: Successfully loaded ${data.totalPeriods} periods from backend API`);\r\n        console.log('Timeline data:', data);\r\n      } else {\r\n        throw new Error('No timeline periods received from API');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Timeline API Error:', error);\r\n      setError(error.message);\r\n      \r\n      // Fallback to frontend processing\r\n      console.log('Timeline: Falling back to frontend data processing');\r\n      if (locations && locations.length > 0) {\r\n        const periods = processLocationsIntoTimeline(locations);\r\n        setTimelinePeriods(periods);\r\n        setDataSource('frontend-fallback');\r\n      } else {\r\n        setDataSource('no-data');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [locations]);\r\n\r\n  // Process locations into timeline periods (fallback method)\r\n  const processLocationsIntoTimeline = useCallback((locations) => {\r\n    if (!locations || !Array.isArray(locations)) {\r\n      console.warn('Timeline: Invalid locations data for processing');\r\n      return [];\r\n    }\r\n\r\n    const periodMap = new Map();\r\n    \r\n    locations.forEach(location => {\r\n      if (!location || !location.period) return;\r\n      \r\n      try {\r\n        // Extract period information\r\n        const periodInfo = extractPeriodInfo(location.period);\r\n        \r\n        periodInfo.forEach(period => {\r\n          const key = period.label;\r\n          if (!periodMap.has(key)) {\r\n            periodMap.set(key, {\r\n              ...period,\r\n              locations: []\r\n            });\r\n          }\r\n          periodMap.get(key).locations.push(location);\r\n        });\r\n      } catch (err) {\r\n        console.warn(`Timeline: Error processing location ${location.name}:`, err);\r\n      }\r\n    });\r\n    \r\n    // Convert to array and sort by start year\r\n    const periodsArray = Array.from(periodMap.values());\r\n    periodsArray.sort((a, b) => a.startYear - b.startYear);\r\n    \r\n    console.log(`Timeline: Processed ${periodsArray.length} periods from ${locations.length} locations`);\r\n    return periodsArray;\r\n  }, []);\r\n\r\n  const extractPeriodInfo = (periodString) => {\r\n    const periods = [];\r\n    \r\n    if (!periodString || typeof periodString !== 'string') {\r\n      return periods;\r\n    }\r\n    \r\n    // Handle different period formats with more robust patterns\r\n    const patterns = [\r\n      // \"1336 CE - 1646 CE\"\r\n      {\r\n        regex: /(\\d{1,4})\\s*CE\\s*-\\s*(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[2]),\r\n          label: `${match[1]} CE - ${match[2]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // \"13th century CE\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*CE/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          const startYear = (century - 1) * 100 + 1;\r\n          const endYear = century * 100;\r\n          return {\r\n            startYear,\r\n            endYear,\r\n            label: `${century}${getOrdinalSuffix(century)} Century CE`,\r\n            era: 'CE'\r\n          };\r\n        }\r\n      },\r\n      // \"950 CE - 1050 CE\" (range without second CE)\r\n      {\r\n        regex: /(\\d{1,4})\\s*-\\s*(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[2]),\r\n          label: `${match[1]} - ${match[2]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // Single year \"1632 CE\"\r\n      {\r\n        regex: /(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[1]) + 50, // Approximate 50-year span\r\n          label: `${match[1]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // \"2nd century BCE\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          return {\r\n            startYear: -(century * 100),\r\n            endYear: -((century - 1) * 100 + 1),\r\n            label: `${century}${getOrdinalSuffix(century)} Century BCE`,\r\n            era: 'BCE'\r\n          };\r\n        }\r\n      },\r\n      // Complex periods like \"3rd century BCE (with later additions)\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE.*$/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          return {\r\n            startYear: -(century * 100),\r\n            endYear: -((century - 1) * 100 + 1),\r\n            label: `${century}${getOrdinalSuffix(century)} Century BCE`,\r\n            era: 'BCE'\r\n          };\r\n        }\r\n      }\r\n    ];\r\n    \r\n    for (const pattern of patterns) {\r\n      const match = periodString.match(pattern.regex);\r\n      if (match) {\r\n        try {\r\n          periods.push(pattern.handler(match));\r\n          break;\r\n        } catch (err) {\r\n          console.warn(`Error parsing period \"${periodString}\":`, err);\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Fallback: create a general period\r\n    if (periods.length === 0) {\r\n      periods.push({\r\n        startYear: 1000, // Default\r\n        endYear: 2000,\r\n        label: periodString.trim(),\r\n        era: 'Unknown'\r\n      });\r\n    }\r\n    \r\n    return periods;\r\n  };\r\n\r\n  // Helper function for ordinal suffixes\r\n  const getOrdinalSuffix = (num) => {\r\n    const remainder = num % 10;\r\n    const hundredRemainder = num % 100;\r\n    \r\n    if (hundredRemainder >= 11 && hundredRemainder <= 13) {\r\n      return 'th';\r\n    }\r\n    \r\n    switch (remainder) {\r\n      case 1: return 'st';\r\n      case 2: return 'nd';\r\n      case 3: return 'rd';\r\n      default: return 'th';\r\n    }\r\n  };\r\n\r\n  // Main effect: Load timeline data when component becomes visible\r\n  useEffect(() => {\r\n    if (isVisible && timelinePeriods.length === 0) {\r\n      fetchTimelineFromAPI();\r\n    }\r\n  }, [isVisible, fetchTimelineFromAPI, timelinePeriods.length]);\r\n\r\n  // Fallback effect: Use local data if API fails and locations are available\r\n  useEffect(() => {\r\n    if (locations && locations.length > 0 && timelinePeriods.length === 0 && !isLoading && dataSource === 'no-data') {\r\n      console.log('Timeline: Using local locations data as final fallback');\r\n      const periods = processLocationsIntoTimeline(locations);\r\n      if (periods.length > 0) {\r\n        setTimelinePeriods(periods);\r\n        setDataSource('frontend');\r\n      }\r\n    }\r\n  }, [locations, timelinePeriods.length, isLoading, dataSource, processLocationsIntoTimeline]);\r\n\r\n  const handlePeriodClick = (period) => {\r\n    if (selectedPeriod?.label === period.label) {\r\n      setSelectedPeriod(null);\r\n      // Reset to modern view\r\n      if (onLocationSelect) {\r\n        onLocationSelect(null, 'modern');\r\n      }\r\n    } else {\r\n      setSelectedPeriod(period);\r\n      // Trigger historical visualization mode\r\n      if (onLocationSelect) {\r\n        onLocationSelect(period.locations[0] || null, 'historical', {\r\n          period: period,\r\n          era: period.era,\r\n          timeframe: period.label\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLocationClick = (location) => {\r\n    selectLocation(location);\r\n    if (onLocationSelect) {\r\n      // Pass historical context when clicking from timeline\r\n      onLocationSelect(location, 'historical', {\r\n        period: selectedPeriod,\r\n        era: selectedPeriod?.era,\r\n        timeframe: selectedPeriod?.label,\r\n        dynasty: location.dynasty\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleExpanded = () => {\r\n    setIsExpanded(!isExpanded);\r\n  };\r\n\r\n  // Retry loading from API\r\n  const retryApiLoad = () => {\r\n    setError(null);\r\n    setTimelinePeriods([]);\r\n    setDataSource('none');\r\n    fetchTimelineFromAPI();\r\n  };\r\n\r\n  const getEraColor = (era) => {\r\n    const colors = {\r\n      'CE': '#3f51b5',\r\n      'BCE': '#e91e63',\r\n      'Unknown': '#757575'\r\n    };\r\n    return colors[era] || colors['Unknown'];\r\n  };\r\n\r\n  const getDynastyColor = (dynasty) => {\r\n    if (!dynasty) return '#757575';\r\n    \r\n    const colors = {\r\n      'Mughal Empire': '#ff9800',\r\n      'Vijayanagara Empire': '#4caf50',\r\n      'Chandela Dynasty': '#9c27b0',\r\n      'Eastern Ganga Dynasty': '#f44336',\r\n      'Satavahana and Vakataka': '#00bcd4',\r\n      'Rashtrakuta Dynasty': '#795548',\r\n      'Delhi Sultanate': '#607d8b',\r\n      'Sikh Gurus': '#9c27b0',\r\n      'Portuguese Colonial': '#ff5722',\r\n      'Mauryan Empire': '#3f51b5'\r\n    };\r\n    \r\n    // Find matching dynasty\r\n    for (const [key, color] of Object.entries(colors)) {\r\n      if (dynasty.includes(key)) {\r\n        return color;\r\n      }\r\n    }\r\n    return '#757575';\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className={`timeline-container ${isExpanded ? 'expanded' : 'collapsed'}`}>\r\n      <div className=\"timeline-header\" onClick={toggleExpanded}>\r\n        <h3>{t('timeline.title', 'Historical Timeline')}</h3>\r\n        <div className=\"timeline-status\">\r\n          {dataSource === 'backend' && <span className=\"data-source-indicator api\" title=\"Data from backend API\">API</span>}\r\n          {dataSource === 'frontend' && <span className=\"data-source-indicator local\" title=\"Data processed locally\">LOCAL</span>}\r\n          {dataSource === 'frontend-fallback' && <span className=\"data-source-indicator fallback\" title=\"Fallback to local processing\">FALLBACK</span>}\r\n          {apiHealth && (\r\n            <span className=\"api-health-indicator\" title={`${apiHealth.locationsWithPeriods}/${apiHealth.totalLocations} locations have period data`}>\r\n              {apiHealth.locationsWithPeriods}/{apiHealth.totalLocations}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button className=\"expand-button\" />\r\n      </div>\r\n      \r\n      {isExpanded && (\r\n        <div className=\"timeline-content\">\r\n          {/* Loading State */}\r\n          {isLoading && (\r\n            <div className=\"timeline-loading\">\r\n              <div className=\"loading-spinner\"></div>\r\n              <p>{t('timeline.loading', 'Loading timeline data from server...')}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Error State with Retry */}\r\n          {error && !isLoading && timelinePeriods.length === 0 && (\r\n            <div className=\"timeline-error\">\r\n              <div className=\"error-message\">\r\n                <p>{t('timeline.error', 'Failed to load timeline data')}</p>\r\n                <small>{error}</small>\r\n              </div>\r\n              <button onClick={retryApiLoad} className=\"retry-button\">\r\n                {t('timeline.retry', 'Retry API Connection')}\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Timeline Periods */}\r\n          {!isLoading && timelinePeriods.length > 0 && (\r\n            <>\r\n              <div className=\"timeline-periods\">\r\n                {timelinePeriods.map((period, index) => (\r\n                  <div \r\n                    key={`${period.label}-${index}`}\r\n                    className={`timeline-period ${selectedPeriod?.label === period.label ? 'active' : ''}`}\r\n                    onClick={() => handlePeriodClick(period)}\r\n                  >\r\n                    <div \r\n                      className=\"period-marker\"\r\n                      style={{ backgroundColor: getEraColor(period.era) }}\r\n                    />\r\n                    \r\n                    <div className=\"period-info\">\r\n                      <div className=\"period-label\">\r\n                        {period.label}\r\n                      </div>\r\n                      <div className=\"period-meta\">\r\n                        {period.locations?.length || 0} location{(period.locations?.length || 0) !== 1 ? 's' : ''}\r\n                        {period.era !== 'Unknown' && (\r\n                          <span className=\"era-indicator\"> ‚Ä¢ {period.era}</span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {selectedPeriod?.label === period.label && period.locations && (\r\n                      <div className=\"period-locations\">\r\n                        <h4>{t('timeline.heritageSites', 'Heritage Sites from this Period')}</h4>\r\n                        <ul>\r\n                          {period.locations.map((location, locIndex) => (\r\n                            <li\r\n                              key={location.id || `${location.name}-${locIndex}`}\r\n                              className={`location-item ${selectedLocation?.id === location.id ? 'selected' : ''}`}\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleLocationClick(location);\r\n                              }}\r\n                            >\r\n                              <div className=\"location-info\">\r\n                                <div className=\"location-name\">\r\n                                  <TranslatedText text={location.name} />\r\n                                </div>\r\n                                {location.dynasty && (\r\n                                  <div className=\"location-dynasty\">\r\n                                    <TranslatedText text={location.dynasty} />\r\n                                  </div>\r\n                                )}\r\n                                {location.category && (\r\n                                  <div className=\"location-category\">\r\n                                    <TranslatedText text={location.category} />\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <div \r\n                                className=\"dynasty-indicator\"\r\n                                style={{ backgroundColor: getDynastyColor(location.dynasty) }}\r\n                                title={location.dynasty || 'Unknown dynasty'}\r\n                              />\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Data source info */}\r\n              {(error || dataSource === 'frontend-fallback') && (\r\n                <div className=\"timeline-info\">\r\n                  <small>\r\n                    {dataSource === 'frontend-fallback' && '‚ö†Ô∏è Using fallback data processing'}\r\n                    {error && !timelinePeriods.length && '‚ùå Server connection failed'}\r\n                  </small>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {!isLoading && timelinePeriods.length === 0 && !error && (\r\n            <div className=\"timeline-empty\">\r\n              <div className=\"timeline-empty-icon\">üìÖ</div>\r\n              <div className=\"timeline-empty-text\">\r\n                No timeline data available\r\n              </div>\r\n              <button onClick={retryApiLoad} className=\"retry-button\">\r\n                Try Loading Again\r\n              </button>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Legend */}\r\n          {timelinePeriods.length > 0 && (\r\n            <div className=\"timeline-legend\">\r\n              <h4>Era Legend</h4>\r\n              <div className=\"legend-items\">\r\n                <div className=\"legend-item\">\r\n                  <div className=\"legend-color\" style={{ backgroundColor: '#3f51b5' }}></div>\r\n                  <span>Common Era (CE)</span>\r\n                </div>\r\n                <div className=\"legend-item\">\r\n                  <div className=\"legend-color\" style={{ backgroundColor: '#e91e63' }}></div>\r\n                  <span>Before Common Era (BCE)</span>\r\n                </div>\r\n                {timelinePeriods.some(p => p.era === 'Unknown') && (\r\n                  <div className=\"legend-item\">\r\n                    <div className=\"legend-color\" style={{ backgroundColor: '#757575' }}></div>\r\n                    <span>Unknown Period</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timeline;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}