{"ast":null,"code":"var _jsxFileName = \"D:\\\\MY projects\\\\Major Project\\\\cupe-kg-frontend\\\\src\\\\components\\\\GraphVisualization\\\\GraphVisualization.jsx\",\n  _s = $RefreshSig$();\n// components/GraphVisualization/GraphVisualization.jsx\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useMapContext } from '../../context/MapContext';\nimport './GraphVisualization.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GraphVisualization = ({\n  isVisible,\n  onNodeClick\n}) => {\n  _s();\n  var _canvasRef$current, _canvasRef$current2;\n  const canvasRef = useRef(null);\n  const {\n    locations,\n    selectLocation\n  } = useMapContext();\n  const [nodes, setNodes] = useState([]);\n  const [edges, setEdges] = useState([]);\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [activeNode, setActiveNode] = useState(null);\n  const animationRef = useRef(null);\n  const colors = {\n    historical: '#E91E63',\n    // Pink\n    cultural: '#4CAF50',\n    // Green\n    religious: '#FFC107',\n    // Amber\n    node: '#3f51b5',\n    // Default node\n    edge: 'rgba(255, 255, 255, 0.2)',\n    text: '#ffffff'\n  };\n\n  // Generate nodes and edges from location data\n  useEffect(() => {\n    if (!locations.length) return;\n\n    // Create nodes from locations\n    const newNodes = locations.map((location, index) => {\n      // Generate a position based on category (cluster similar types)\n      const angle = index / locations.length * Math.PI * 2;\n      const radius = 150 + Math.random() * 100;\n      return {\n        id: location.id,\n        name: location.name,\n        category: location.category,\n        x: Math.cos(angle) * radius + 400,\n        // center x\n        y: Math.sin(angle) * radius + 300,\n        // center y\n        radius: 20,\n        color: colors[location.category] || colors.node,\n        adjacentNodes: [],\n        vx: 0,\n        // Added velocity for force simulation\n        vy: 0 // Added velocity for force simulation\n      };\n    });\n\n    // Generate edges between nodes based on relationships (category, proximity)\n    const newEdges = [];\n\n    // Connect nodes of same category\n    for (let i = 0; i < newNodes.length; i++) {\n      for (let j = i + 1; j < newNodes.length; j++) {\n        const sourceNode = newNodes[i];\n        const targetNode = newNodes[j];\n\n        // Connect nodes of same category with stronger links\n        if (sourceNode.category === targetNode.category) {\n          const edge = {\n            source: sourceNode.id,\n            target: targetNode.id,\n            strength: 0.8,\n            width: 2,\n            color: sourceNode.color,\n            alpha: 0.6\n          };\n          newEdges.push(edge);\n          sourceNode.adjacentNodes.push(targetNode.id);\n          targetNode.adjacentNodes.push(sourceNode.id);\n        }\n        // Connect some nodes with weaker links for network effect\n        else if (Math.random() > 0.7) {\n          const edge = {\n            source: sourceNode.id,\n            target: targetNode.id,\n            strength: 0.3,\n            width: 1,\n            color: 'rgba(255, 255, 255, 0.3)',\n            alpha: 0.3\n          };\n          newEdges.push(edge);\n          sourceNode.adjacentNodes.push(targetNode.id);\n          targetNode.adjacentNodes.push(sourceNode.id);\n        }\n      }\n    }\n    setNodes(newNodes);\n    setEdges(newEdges);\n\n    // Debug: Log the graph data\n    console.log(`Created graph with ${newNodes.length} nodes and ${newEdges.length} edges`);\n  }, [locations]);\n\n  // Center the graph in the canvas when it becomes visible\n  useEffect(() => {\n    if (isVisible && canvasRef.current && nodes.length > 0) {\n      const canvas = canvasRef.current;\n      const centerX = canvas.offsetWidth / 2;\n      const centerY = canvas.offsetHeight / 2;\n\n      // Calculate current center of graph\n      let avgX = 0,\n        avgY = 0;\n      nodes.forEach(node => {\n        avgX += node.x;\n        avgY += node.y;\n      });\n      avgX /= nodes.length;\n      avgY /= nodes.length;\n\n      // Calculate offset to center\n      const offsetX = centerX - avgX;\n      const offsetY = centerY - avgY;\n\n      // Update node positions\n      setNodes(prevNodes => prevNodes.map(node => ({\n        ...node,\n        x: node.x + offsetX,\n        y: node.y + offsetY\n      })));\n      console.log(\"Centered graph in viewport\");\n    }\n  }, [isVisible, (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.offsetWidth, (_canvasRef$current2 = canvasRef.current) === null || _canvasRef$current2 === void 0 ? void 0 : _canvasRef$current2.offsetHeight, nodes.length]);\n\n  // Handle animation and rendering\n  useEffect(() => {\n    if (!isVisible || !canvasRef.current || !nodes.length) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const pixelRatio = window.devicePixelRatio || 1;\n\n    // Set canvas dimensions\n    const updateCanvasSize = () => {\n      canvas.width = canvas.offsetWidth * pixelRatio;\n      canvas.height = canvas.offsetHeight * pixelRatio;\n      ctx.scale(pixelRatio, pixelRatio);\n    };\n    updateCanvasSize();\n    window.addEventListener('resize', updateCanvasSize);\n\n    // Animation state\n    let animationActive = true;\n\n    // Perform physics simulation with improved force-directed layout\n    const updatePositions = () => {\n      // Constants for force simulation\n      const attraction = 0.005; // Attraction to connected nodes\n      const repulsion = 500; // Repulsion between all nodes\n      const damping = 0.9; // Damping factor for movement\n      const centerGravity = 0.03; // Attraction to center\n\n      // Apply forces\n      for (let i = 0; i < nodes.length; i++) {\n        // Center gravity\n        const centerX = canvas.offsetWidth / 2;\n        const centerY = canvas.offsetHeight / 2;\n        nodes[i].vx += (centerX - nodes[i].x) * centerGravity;\n        nodes[i].vy += (centerY - nodes[i].y) * centerGravity;\n\n        // Node repulsion (between all nodes)\n        for (let j = 0; j < nodes.length; j++) {\n          if (i !== j) {\n            const dx = nodes[i].x - nodes[j].x;\n            const dy = nodes[i].y - nodes[j].y;\n            const distance = Math.sqrt(dx * dx + dy * dy) || 1;\n            const force = repulsion / (distance * distance);\n            nodes[i].vx += dx * force / distance;\n            nodes[i].vy += dy * force / distance;\n          }\n        }\n\n        // Edge attraction (between connected nodes)\n        for (const edge of edges) {\n          if (edge.source === nodes[i].id || edge.target === nodes[i].id) {\n            const other = nodes.find(n => n.id === (edge.source === nodes[i].id ? edge.target : edge.source));\n            if (other) {\n              const dx = nodes[i].x - other.x;\n              const dy = nodes[i].y - other.y;\n              nodes[i].vx -= dx * attraction * edge.strength;\n              nodes[i].vy -= dy * attraction * edge.strength;\n            }\n          }\n        }\n\n        // Apply velocity with damping\n        nodes[i].vx *= damping;\n        nodes[i].vy *= damping;\n        nodes[i].x += nodes[i].vx;\n        nodes[i].y += nodes[i].vy;\n\n        // Keep nodes within bounds with some padding\n        const padding = 50;\n        nodes[i].x = Math.max(padding, Math.min(canvas.offsetWidth - padding, nodes[i].x));\n        nodes[i].y = Math.max(padding, Math.min(canvas.offsetHeight - padding, nodes[i].y));\n      }\n    };\n\n    // Draw the graph\n    const drawGraph = () => {\n      if (!animationActive) return;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);\n\n      // Draw background gradient\n      const gradient = ctx.createRadialGradient(canvas.offsetWidth / 2, canvas.offsetHeight / 2, 10, canvas.offsetWidth / 2, canvas.offsetHeight / 2, canvas.offsetWidth / 2);\n      gradient.addColorStop(0, 'rgba(25, 25, 35, 0.9)');\n      gradient.addColorStop(1, 'rgba(10, 10, 20, 0.95)');\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);\n\n      // Draw edges first (so they appear under nodes)\n      edges.forEach(edge => {\n        const source = nodes.find(n => n.id === edge.source);\n        const target = nodes.find(n => n.id === edge.target);\n        if (!source || !target) return;\n\n        // Highlight edges connected to hovered node\n        let alpha = edge.alpha;\n        if (hoveredNode && (hoveredNode.id === source.id || hoveredNode.id === target.id)) {\n          alpha = 0.8; // Increase opacity for connected edges\n        }\n        ctx.beginPath();\n        ctx.moveTo(source.x, source.y);\n        ctx.lineTo(target.x, target.y);\n\n        // Use gradient for edges\n        const edgeGradient = ctx.createLinearGradient(source.x, source.y, target.x, target.y);\n        edgeGradient.addColorStop(0, source.color.replace(')', ', ' + alpha + ')').replace('rgb', 'rgba'));\n        edgeGradient.addColorStop(1, target.color.replace(')', ', ' + alpha + ')').replace('rgb', 'rgba'));\n        ctx.strokeStyle = edgeGradient;\n        ctx.lineWidth = edge.width;\n        ctx.stroke();\n      });\n\n      // Draw nodes\n      nodes.forEach(node => {\n        // Node fill with glow effect\n        ctx.beginPath();\n        ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);\n\n        // Add glow effect for hovered/active nodes\n        if (hoveredNode === node || activeNode === node) {\n          ctx.shadowColor = node.color;\n          ctx.shadowBlur = 15;\n          ctx.fillStyle = node.color;\n        } else {\n          ctx.shadowBlur = 0;\n          // Semi-transparent fill\n          ctx.fillStyle = node.color.replace(')', ', 0.7)').replace('rgb', 'rgba');\n        }\n        ctx.fill();\n\n        // Node border\n        ctx.strokeStyle = '#ffffff';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n\n        // Draw node label\n        ctx.font = '14px Arial';\n        ctx.fillStyle = colors.text;\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(node.name, node.x, node.y + node.radius + 15);\n\n        // Reset shadow for next elements\n        ctx.shadowBlur = 0;\n      });\n\n      // Update positions for next frame\n      updatePositions();\n\n      // Continue animation loop\n      animationRef.current = requestAnimationFrame(drawGraph);\n    };\n    drawGraph();\n\n    // Handle mousemove for hover effects\n    const handleMouseMove = e => {\n      const rect = canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n\n      // Check if mouse is over any node\n      let foundNode = null;\n      for (const node of nodes) {\n        const distance = Math.hypot(node.x - x, node.y - y);\n        if (distance <= node.radius) {\n          foundNode = node;\n          break;\n        }\n      }\n      setHoveredNode(foundNode);\n      document.body.style.cursor = foundNode ? 'pointer' : 'default';\n    };\n\n    // Handle click to select a node/location\n    const handleClick = e => {\n      if (hoveredNode) {\n        setActiveNode(hoveredNode);\n        const location = locations.find(loc => loc.id === hoveredNode.id);\n        if (location && onNodeClick) {\n          onNodeClick(location);\n        }\n      }\n    };\n    canvas.addEventListener('mousemove', handleMouseMove);\n    canvas.addEventListener('click', handleClick);\n    return () => {\n      animationActive = false;\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      window.removeEventListener('resize', updateCanvasSize);\n      canvas.removeEventListener('mousemove', handleMouseMove);\n      canvas.removeEventListener('click', handleClick);\n    };\n  }, [isVisible, nodes, edges, hoveredNode, activeNode, locations, onNodeClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `graph-container ${isVisible ? 'visible' : 'hidden'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"graph-canvas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"graph-legend\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-title\",\n        children: \"CuPe-KG Knowledge Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend-items\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-color\",\n            style: {\n              backgroundColor: colors.historical\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-label\",\n            children: \"Historical Sites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-color\",\n            style: {\n              backgroundColor: colors.cultural\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-label\",\n            children: \"Cultural Sites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-color\",\n            style: {\n              backgroundColor: colors.religious\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"legend-label\",\n            children: \"Religious Sites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 5\n  }, this);\n};\n_s(GraphVisualization, \"4BUcucTqKVl2Jxo8TafdDIcivps=\", false, function () {\n  return [useMapContext];\n});\n_c = GraphVisualization;\nexport default GraphVisualization;\nvar _c;\n$RefreshReg$(_c, \"GraphVisualization\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useMapContext","jsxDEV","_jsxDEV","GraphVisualization","isVisible","onNodeClick","_s","_canvasRef$current","_canvasRef$current2","canvasRef","locations","selectLocation","nodes","setNodes","edges","setEdges","hoveredNode","setHoveredNode","activeNode","setActiveNode","animationRef","colors","historical","cultural","religious","node","edge","text","length","newNodes","map","location","index","angle","Math","PI","radius","random","id","name","category","x","cos","y","sin","color","adjacentNodes","vx","vy","newEdges","i","j","sourceNode","targetNode","source","target","strength","width","alpha","push","console","log","current","canvas","centerX","offsetWidth","centerY","offsetHeight","avgX","avgY","forEach","offsetX","offsetY","prevNodes","ctx","getContext","pixelRatio","window","devicePixelRatio","updateCanvasSize","height","scale","addEventListener","animationActive","updatePositions","attraction","repulsion","damping","centerGravity","dx","dy","distance","sqrt","force","other","find","n","padding","max","min","drawGraph","clearRect","gradient","createRadialGradient","addColorStop","fillStyle","fillRect","beginPath","moveTo","lineTo","edgeGradient","createLinearGradient","replace","strokeStyle","lineWidth","stroke","arc","shadowColor","shadowBlur","fill","font","textAlign","textBaseline","fillText","requestAnimationFrame","handleMouseMove","e","rect","getBoundingClientRect","clientX","left","clientY","top","foundNode","hypot","document","body","style","cursor","handleClick","loc","cancelAnimationFrame","removeEventListener","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","_c","$RefreshReg$"],"sources":["D:/MY projects/Major Project/cupe-kg-frontend/src/components/GraphVisualization/GraphVisualization.jsx"],"sourcesContent":["// components/GraphVisualization/GraphVisualization.jsx\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useMapContext } from '../../context/MapContext';\r\nimport './GraphVisualization.css';\r\n\r\nconst GraphVisualization = ({ isVisible, onNodeClick }) => {\r\n  const canvasRef = useRef(null);\r\n  const { locations, selectLocation } = useMapContext();\r\n  const [nodes, setNodes] = useState([]);\r\n  const [edges, setEdges] = useState([]);\r\n  const [hoveredNode, setHoveredNode] = useState(null);\r\n  const [activeNode, setActiveNode] = useState(null);\r\n  const animationRef = useRef(null);\r\n  \r\n  const colors = {\r\n    historical: '#E91E63', // Pink\r\n    cultural: '#4CAF50',   // Green\r\n    religious: '#FFC107',  // Amber\r\n    node: '#3f51b5',       // Default node\r\n    edge: 'rgba(255, 255, 255, 0.2)',\r\n    text: '#ffffff'\r\n  };\r\n\r\n  // Generate nodes and edges from location data\r\n  useEffect(() => {\r\n    if (!locations.length) return;\r\n    \r\n    // Create nodes from locations\r\n    const newNodes = locations.map((location, index) => {\r\n      // Generate a position based on category (cluster similar types)\r\n      const angle = (index / locations.length) * Math.PI * 2;\r\n      const radius = 150 + (Math.random() * 100);\r\n      \r\n      return {\r\n        id: location.id,\r\n        name: location.name,\r\n        category: location.category,\r\n        x: Math.cos(angle) * radius + 400, // center x\r\n        y: Math.sin(angle) * radius + 300, // center y\r\n        radius: 20,\r\n        color: colors[location.category] || colors.node,\r\n        adjacentNodes: [],\r\n        vx: 0,  // Added velocity for force simulation\r\n        vy: 0   // Added velocity for force simulation\r\n      };\r\n    });\r\n    \r\n    // Generate edges between nodes based on relationships (category, proximity)\r\n    const newEdges = [];\r\n    \r\n    // Connect nodes of same category\r\n    for (let i = 0; i < newNodes.length; i++) {\r\n      for (let j = i + 1; j < newNodes.length; j++) {\r\n        const sourceNode = newNodes[i];\r\n        const targetNode = newNodes[j];\r\n        \r\n        // Connect nodes of same category with stronger links\r\n        if (sourceNode.category === targetNode.category) {\r\n          const edge = {\r\n            source: sourceNode.id,\r\n            target: targetNode.id,\r\n            strength: 0.8,\r\n            width: 2,\r\n            color: sourceNode.color,\r\n            alpha: 0.6\r\n          };\r\n          newEdges.push(edge);\r\n          sourceNode.adjacentNodes.push(targetNode.id);\r\n          targetNode.adjacentNodes.push(sourceNode.id);\r\n        } \r\n        // Connect some nodes with weaker links for network effect\r\n        else if (Math.random() > 0.7) {\r\n          const edge = {\r\n            source: sourceNode.id,\r\n            target: targetNode.id,\r\n            strength: 0.3,\r\n            width: 1,\r\n            color: 'rgba(255, 255, 255, 0.3)',\r\n            alpha: 0.3\r\n          };\r\n          newEdges.push(edge);\r\n          sourceNode.adjacentNodes.push(targetNode.id);\r\n          targetNode.adjacentNodes.push(sourceNode.id);\r\n        }\r\n      }\r\n    }\r\n    \r\n    setNodes(newNodes);\r\n    setEdges(newEdges);\r\n\r\n    // Debug: Log the graph data\r\n    console.log(`Created graph with ${newNodes.length} nodes and ${newEdges.length} edges`);\r\n  }, [locations]);\r\n\r\n  // Center the graph in the canvas when it becomes visible\r\n  useEffect(() => {\r\n    if (isVisible && canvasRef.current && nodes.length > 0) {\r\n      const canvas = canvasRef.current;\r\n      const centerX = canvas.offsetWidth / 2;\r\n      const centerY = canvas.offsetHeight / 2;\r\n      \r\n      // Calculate current center of graph\r\n      let avgX = 0, avgY = 0;\r\n      nodes.forEach(node => {\r\n        avgX += node.x;\r\n        avgY += node.y;\r\n      });\r\n      avgX /= nodes.length;\r\n      avgY /= nodes.length;\r\n      \r\n      // Calculate offset to center\r\n      const offsetX = centerX - avgX;\r\n      const offsetY = centerY - avgY;\r\n      \r\n      // Update node positions\r\n      setNodes(prevNodes => prevNodes.map(node => ({\r\n        ...node,\r\n        x: node.x + offsetX,\r\n        y: node.y + offsetY\r\n      })));\r\n      \r\n      console.log(\"Centered graph in viewport\");\r\n    }\r\n  }, [isVisible, canvasRef.current?.offsetWidth, canvasRef.current?.offsetHeight, nodes.length]);\r\n\r\n  // Handle animation and rendering\r\n  useEffect(() => {\r\n    if (!isVisible || !canvasRef.current || !nodes.length) return;\r\n    \r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    const pixelRatio = window.devicePixelRatio || 1;\r\n    \r\n    // Set canvas dimensions\r\n    const updateCanvasSize = () => {\r\n      canvas.width = canvas.offsetWidth * pixelRatio;\r\n      canvas.height = canvas.offsetHeight * pixelRatio;\r\n      ctx.scale(pixelRatio, pixelRatio);\r\n    };\r\n    \r\n    updateCanvasSize();\r\n    window.addEventListener('resize', updateCanvasSize);\r\n    \r\n    // Animation state\r\n    let animationActive = true;\r\n    \r\n    // Perform physics simulation with improved force-directed layout\r\n    const updatePositions = () => {\r\n      // Constants for force simulation\r\n      const attraction = 0.005;   // Attraction to connected nodes\r\n      const repulsion = 500;      // Repulsion between all nodes\r\n      const damping = 0.9;        // Damping factor for movement\r\n      const centerGravity = 0.03; // Attraction to center\r\n      \r\n      // Apply forces\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        // Center gravity\r\n        const centerX = canvas.offsetWidth / 2;\r\n        const centerY = canvas.offsetHeight / 2;\r\n        nodes[i].vx += (centerX - nodes[i].x) * centerGravity;\r\n        nodes[i].vy += (centerY - nodes[i].y) * centerGravity;\r\n        \r\n        // Node repulsion (between all nodes)\r\n        for (let j = 0; j < nodes.length; j++) {\r\n          if (i !== j) {\r\n            const dx = nodes[i].x - nodes[j].x;\r\n            const dy = nodes[i].y - nodes[j].y;\r\n            const distance = Math.sqrt(dx * dx + dy * dy) || 1;\r\n            const force = repulsion / (distance * distance);\r\n            nodes[i].vx += dx * force / distance;\r\n            nodes[i].vy += dy * force / distance;\r\n          }\r\n        }\r\n        \r\n        // Edge attraction (between connected nodes)\r\n        for (const edge of edges) {\r\n          if (edge.source === nodes[i].id || edge.target === nodes[i].id) {\r\n            const other = nodes.find(n => \r\n              n.id === (edge.source === nodes[i].id ? edge.target : edge.source)\r\n            );\r\n            if (other) {\r\n              const dx = nodes[i].x - other.x;\r\n              const dy = nodes[i].y - other.y;\r\n              nodes[i].vx -= dx * attraction * edge.strength;\r\n              nodes[i].vy -= dy * attraction * edge.strength;\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Apply velocity with damping\r\n        nodes[i].vx *= damping;\r\n        nodes[i].vy *= damping;\r\n        nodes[i].x += nodes[i].vx;\r\n        nodes[i].y += nodes[i].vy;\r\n        \r\n        // Keep nodes within bounds with some padding\r\n        const padding = 50;\r\n        nodes[i].x = Math.max(padding, Math.min(canvas.offsetWidth - padding, nodes[i].x));\r\n        nodes[i].y = Math.max(padding, Math.min(canvas.offsetHeight - padding, nodes[i].y));\r\n      }\r\n    };\r\n    \r\n    // Draw the graph\r\n    const drawGraph = () => {\r\n      if (!animationActive) return;\r\n      \r\n      // Clear canvas\r\n      ctx.clearRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);\r\n      \r\n      // Draw background gradient\r\n      const gradient = ctx.createRadialGradient(\r\n        canvas.offsetWidth/2, canvas.offsetHeight/2, 10,\r\n        canvas.offsetWidth/2, canvas.offsetHeight/2, canvas.offsetWidth/2\r\n      );\r\n      gradient.addColorStop(0, 'rgba(25, 25, 35, 0.9)');\r\n      gradient.addColorStop(1, 'rgba(10, 10, 20, 0.95)');\r\n      ctx.fillStyle = gradient;\r\n      ctx.fillRect(0, 0, canvas.offsetWidth, canvas.offsetHeight);\r\n      \r\n      // Draw edges first (so they appear under nodes)\r\n      edges.forEach(edge => {\r\n        const source = nodes.find(n => n.id === edge.source);\r\n        const target = nodes.find(n => n.id === edge.target);\r\n        if (!source || !target) return;\r\n        \r\n        // Highlight edges connected to hovered node\r\n        let alpha = edge.alpha;\r\n        if (hoveredNode && (hoveredNode.id === source.id || hoveredNode.id === target.id)) {\r\n          alpha = 0.8; // Increase opacity for connected edges\r\n        }\r\n        \r\n        ctx.beginPath();\r\n        ctx.moveTo(source.x, source.y);\r\n        ctx.lineTo(target.x, target.y);\r\n        \r\n        // Use gradient for edges\r\n        const edgeGradient = ctx.createLinearGradient(source.x, source.y, target.x, target.y);\r\n        edgeGradient.addColorStop(0, source.color.replace(')', ', ' + alpha + ')').replace('rgb', 'rgba'));\r\n        edgeGradient.addColorStop(1, target.color.replace(')', ', ' + alpha + ')').replace('rgb', 'rgba'));\r\n        \r\n        ctx.strokeStyle = edgeGradient;\r\n        ctx.lineWidth = edge.width;\r\n        ctx.stroke();\r\n      });\r\n      \r\n      // Draw nodes\r\n      nodes.forEach(node => {\r\n        // Node fill with glow effect\r\n        ctx.beginPath();\r\n        ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);\r\n        \r\n        // Add glow effect for hovered/active nodes\r\n        if (hoveredNode === node || activeNode === node) {\r\n          ctx.shadowColor = node.color;\r\n          ctx.shadowBlur = 15;\r\n          ctx.fillStyle = node.color;\r\n        } else {\r\n          ctx.shadowBlur = 0;\r\n          // Semi-transparent fill\r\n          ctx.fillStyle = node.color.replace(')', ', 0.7)').replace('rgb', 'rgba');\r\n        }\r\n        ctx.fill();\r\n        \r\n        // Node border\r\n        ctx.strokeStyle = '#ffffff';\r\n        ctx.lineWidth = 2;\r\n        ctx.stroke();\r\n        \r\n        // Draw node label\r\n        ctx.font = '14px Arial';\r\n        ctx.fillStyle = colors.text;\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.fillText(node.name, node.x, node.y + node.radius + 15);\r\n        \r\n        // Reset shadow for next elements\r\n        ctx.shadowBlur = 0;\r\n      });\r\n      \r\n      // Update positions for next frame\r\n      updatePositions();\r\n      \r\n      // Continue animation loop\r\n      animationRef.current = requestAnimationFrame(drawGraph);\r\n    };\r\n    \r\n    drawGraph();\r\n    \r\n    // Handle mousemove for hover effects\r\n    const handleMouseMove = (e) => {\r\n      const rect = canvas.getBoundingClientRect();\r\n      const x = e.clientX - rect.left;\r\n      const y = e.clientY - rect.top;\r\n      \r\n      // Check if mouse is over any node\r\n      let foundNode = null;\r\n      for (const node of nodes) {\r\n        const distance = Math.hypot(node.x - x, node.y - y);\r\n        if (distance <= node.radius) {\r\n          foundNode = node;\r\n          break;\r\n        }\r\n      }\r\n      \r\n      setHoveredNode(foundNode);\r\n      document.body.style.cursor = foundNode ? 'pointer' : 'default';\r\n    };\r\n    \r\n    // Handle click to select a node/location\r\n    const handleClick = (e) => {\r\n      if (hoveredNode) {\r\n        setActiveNode(hoveredNode);\r\n        const location = locations.find(loc => loc.id === hoveredNode.id);\r\n        if (location && onNodeClick) {\r\n          onNodeClick(location);\r\n        }\r\n      }\r\n    };\r\n    \r\n    canvas.addEventListener('mousemove', handleMouseMove);\r\n    canvas.addEventListener('click', handleClick);\r\n    \r\n    return () => {\r\n      animationActive = false;\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n      window.removeEventListener('resize', updateCanvasSize);\r\n      canvas.removeEventListener('mousemove', handleMouseMove);\r\n      canvas.removeEventListener('click', handleClick);\r\n    };\r\n  }, [isVisible, nodes, edges, hoveredNode, activeNode, locations, onNodeClick]);\r\n\r\n  return (\r\n    <div className={`graph-container ${isVisible ? 'visible' : 'hidden'}`}>\r\n      <canvas \r\n        ref={canvasRef} \r\n        className=\"graph-canvas\"\r\n      />\r\n      \r\n      <div className=\"graph-legend\">\r\n        <div className=\"legend-title\">CuPe-KG Knowledge Graph</div>\r\n        <div className=\"legend-items\">\r\n          <div className=\"legend-item\">\r\n            <span className=\"legend-color\" style={{backgroundColor: colors.historical}}></span>\r\n            <span className=\"legend-label\">Historical Sites</span>\r\n          </div>\r\n          <div className=\"legend-item\">\r\n            <span className=\"legend-color\" style={{backgroundColor: colors.cultural}}></span>\r\n            <span className=\"legend-label\">Cultural Sites</span>\r\n          </div>\r\n          <div className=\"legend-item\">\r\n            <span className=\"legend-color\" style={{backgroundColor: colors.religious}}></span>\r\n            <span className=\"legend-label\">Religious Sites</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GraphVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}