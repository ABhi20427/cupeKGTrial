{"ast":null,"code":"import{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import axios from'axios';const API_BASE_URL='http://localhost:5000';// Cache for translations to avoid repeated API calls\nconst translationCache=new Map();/**\r\n * Translate text using the backend API\r\n */export const translateText=async function(text,targetLang){let sourceLang=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'en';if(!text||targetLang==='en'||targetLang===sourceLang){return text;}const cacheKey=`${sourceLang}:${targetLang}:${text.substring(0,100)}`;if(translationCache.has(cacheKey)){return translationCache.get(cacheKey);}try{const response=await axios.post(`${API_BASE_URL}/api/translate/text`,{text,target_lang:targetLang,source_lang:sourceLang});const translatedText=response.data.translatedText;translationCache.set(cacheKey,translatedText);return translatedText;}catch(error){console.error('Translation error:',error);return text;// Return original text on error\n}};/**\r\n * Custom hook to translate text reactively when language changes\r\n */export const useTranslatedText=function(text){let sourceLang=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'en';const{i18n}=useTranslation();const[translatedText,setTranslatedText]=useState(text);const[isTranslating,setIsTranslating]=useState(false);useEffect(()=>{const translate=async()=>{if(!text||i18n.language==='en'){setTranslatedText(text);return;}setIsTranslating(true);const translated=await translateText(text,i18n.language,sourceLang);setTranslatedText(translated);setIsTranslating(false);};translate();},[text,i18n.language,sourceLang]);return{translatedText,isTranslating};};/**\r\n * Custom hook to translate an object with multiple fields\r\n */export const useTranslatedObject=function(obj){let fieldsToTranslate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];const{i18n}=useTranslation();const[translatedObj,setTranslatedObj]=useState(obj);const[isTranslating,setIsTranslating]=useState(false);useEffect(()=>{const translateObject=async()=>{if(!obj||i18n.language==='en'){setTranslatedObj(obj);return;}setIsTranslating(true);const translated={...obj};for(const field of fieldsToTranslate){if(obj[field]&&typeof obj[field]==='string'){translated[field]=await translateText(obj[field],i18n.language);}}setTranslatedObj(translated);setIsTranslating(false);};translateObject();},[obj,i18n.language,fieldsToTranslate]);return{translatedObj,isTranslating};};/**\r\n * Translate multiple items in an array\r\n */export const translateArray=async function(items,fieldsToTranslate,targetLang){let sourceLang=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'en';if(!items||items.length===0||targetLang==='en'){return items;}const translatedItems=await Promise.all(items.map(async item=>{const translated={...item};for(const field of fieldsToTranslate){if(item[field]&&typeof item[field]==='string'){translated[field]=await translateText(item[field],targetLang,sourceLang);}}return translated;}));return translatedItems;};","map":{"version":3,"names":["useState","useEffect","useTranslation","axios","API_BASE_URL","translationCache","Map","translateText","text","targetLang","sourceLang","arguments","length","undefined","cacheKey","substring","has","get","response","post","target_lang","source_lang","translatedText","data","set","error","console","useTranslatedText","i18n","setTranslatedText","isTranslating","setIsTranslating","translate","language","translated","useTranslatedObject","obj","fieldsToTranslate","translatedObj","setTranslatedObj","translateObject","field","translateArray","items","translatedItems","Promise","all","map","item"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/utils/translationHelper.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\n// Cache for translations to avoid repeated API calls\r\nconst translationCache = new Map();\r\n\r\n/**\r\n * Translate text using the backend API\r\n */\r\nexport const translateText = async (text, targetLang, sourceLang = 'en') => {\r\n  if (!text || targetLang === 'en' || targetLang === sourceLang) {\r\n    return text;\r\n  }\r\n\r\n  const cacheKey = `${sourceLang}:${targetLang}:${text.substring(0, 100)}`;\r\n\r\n  if (translationCache.has(cacheKey)) {\r\n    return translationCache.get(cacheKey);\r\n  }\r\n\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/api/translate/text`, {\r\n      text,\r\n      target_lang: targetLang,\r\n      source_lang: sourceLang\r\n    });\r\n\r\n    const translatedText = response.data.translatedText;\r\n    translationCache.set(cacheKey, translatedText);\r\n    return translatedText;\r\n  } catch (error) {\r\n    console.error('Translation error:', error);\r\n    return text; // Return original text on error\r\n  }\r\n};\r\n\r\n/**\r\n * Custom hook to translate text reactively when language changes\r\n */\r\nexport const useTranslatedText = (text, sourceLang = 'en') => {\r\n  const { i18n } = useTranslation();\r\n  const [translatedText, setTranslatedText] = useState(text);\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const translate = async () => {\r\n      if (!text || i18n.language === 'en') {\r\n        setTranslatedText(text);\r\n        return;\r\n      }\r\n\r\n      setIsTranslating(true);\r\n      const translated = await translateText(text, i18n.language, sourceLang);\r\n      setTranslatedText(translated);\r\n      setIsTranslating(false);\r\n    };\r\n\r\n    translate();\r\n  }, [text, i18n.language, sourceLang]);\r\n\r\n  return { translatedText, isTranslating };\r\n};\r\n\r\n/**\r\n * Custom hook to translate an object with multiple fields\r\n */\r\nexport const useTranslatedObject = (obj, fieldsToTranslate = []) => {\r\n  const { i18n } = useTranslation();\r\n  const [translatedObj, setTranslatedObj] = useState(obj);\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const translateObject = async () => {\r\n      if (!obj || i18n.language === 'en') {\r\n        setTranslatedObj(obj);\r\n        return;\r\n      }\r\n\r\n      setIsTranslating(true);\r\n      const translated = { ...obj };\r\n\r\n      for (const field of fieldsToTranslate) {\r\n        if (obj[field] && typeof obj[field] === 'string') {\r\n          translated[field] = await translateText(obj[field], i18n.language);\r\n        }\r\n      }\r\n\r\n      setTranslatedObj(translated);\r\n      setIsTranslating(false);\r\n    };\r\n\r\n    translateObject();\r\n  }, [obj, i18n.language, fieldsToTranslate]);\r\n\r\n  return { translatedObj, isTranslating };\r\n};\r\n\r\n/**\r\n * Translate multiple items in an array\r\n */\r\nexport const translateArray = async (items, fieldsToTranslate, targetLang, sourceLang = 'en') => {\r\n  if (!items || items.length === 0 || targetLang === 'en') {\r\n    return items;\r\n  }\r\n\r\n  const translatedItems = await Promise.all(\r\n    items.map(async (item) => {\r\n      const translated = { ...item };\r\n      for (const field of fieldsToTranslate) {\r\n        if (item[field] && typeof item[field] === 'string') {\r\n          translated[field] = await translateText(item[field], targetLang, sourceLang);\r\n        }\r\n      }\r\n      return translated;\r\n    })\r\n  );\r\n\r\n  return translatedItems;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}