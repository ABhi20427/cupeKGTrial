{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{useTranslation}from'react-i18next';import{useMapContext}from'../../context/MapContext';import{askChatbot}from'../../services/api';import{translateText}from'../../utils/translationHelper';import MessageGroup from'./MessageGroup';import'./ChatInterface.css';import'./MessageGroup.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInterface=_ref=>{let{isPanelOpen}=_ref;const{t,i18n}=useTranslation();const[isOpen,setIsOpen]=useState(false);const[messages,setMessages]=useState([{id:1,type:'bot',text:t('chat.welcome'),timestamp:new Date(),status:'delivered',confidence:0.95}]);const[inputValue,setInputValue]=useState('');const[isTyping,setIsTyping]=useState(false);const[showSuggestions,setShowSuggestions]=useState(true);const[sessionId,setSessionId]=useState(null);const messagesEndRef=useRef(null);const inputRef=useRef(null);const chatMessagesRef=useRef(null);// NEW: Direct reference to chat messages container\nconst shouldScrollToBottom=useRef(true);// NEW: Control when to scroll\nconst mapContext=useMapContext();const selectedLocation=mapContext===null||mapContext===void 0?void 0:mapContext.selectedLocation;// Initialize session ID\nuseEffect(()=>{if(!sessionId){setSessionId(Date.now().toString()+Math.random().toString(36));}},[sessionId]);const suggestions=[t('chat.suggestions.hampi'),t('chat.suggestions.delhi'),t('chat.suggestions.buddhist'),t('chat.suggestions.konark'),t('chat.suggestions.tour')];// IMPROVED: More reliable scroll to bottom function\nconst scrollToBottom=useCallback(()=>{if(!shouldScrollToBottom.current)return;// Multiple fallback methods to ensure scrolling works\nconst scrollToEnd=()=>{// Method 1: Use messagesEndRef if available\nif(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'smooth',block:'end',inline:'nearest'});}// Method 2: Direct scroll on chat container\nif(chatMessagesRef.current){chatMessagesRef.current.scrollTop=chatMessagesRef.current.scrollHeight;}};// Execute scroll after DOM update\nrequestAnimationFrame(()=>{setTimeout(scrollToEnd,10);// Small delay for DOM rendering\n});},[]);// FIXED: Better scroll effect with proper dependencies\nuseEffect(()=>{// Only auto-scroll when messages change OR typing state changes\nscrollToBottom();},[messages.length,isTyping,scrollToBottom]);// Changed from [messages] to [messages.length]\n// NEW: Scroll when chat opens\nuseEffect(()=>{if(isOpen){setTimeout(()=>{shouldScrollToBottom.current=true;scrollToBottom();},300);// Wait for opening animation\n}},[isOpen,scrollToBottom]);// Check if user is near bottom to decide whether to auto-scroll\nconst handleScroll=useCallback(()=>{if(chatMessagesRef.current){const{scrollTop,scrollHeight,clientHeight}=chatMessagesRef.current;const isNearBottom=scrollTop+clientHeight>=scrollHeight-50;// 50px threshold\nshouldScrollToBottom.current=isNearBottom;}},[]);useEffect(()=>{// Add contextual message when location changes\nif(selectedLocation&&sessionId){shouldScrollToBottom.current=true;// Always scroll for new contextual messages\nconst locationMessage={id:Date.now(),type:'bot',text:`âœ¨ I see you're exploring ${selectedLocation.name}! This ${selectedLocation.category} site has fascinating stories to tell. What would you like to know about it?`,timestamp:new Date(),confidence:0.9,suggestions:[`Tell me about ${selectedLocation.name}'s history`,`What makes ${selectedLocation.name} special?`,\"Show me nearby heritage sites\",\"Plan a visit to this location\"]};setMessages(prev=>[...prev,locationMessage]);}},[selectedLocation,sessionId]);const toggleChat=useCallback(()=>{setIsOpen(!isOpen);if(!isOpen){// When opening, ensure we scroll to bottom and focus input\nsetTimeout(()=>{var _inputRef$current;shouldScrollToBottom.current=true;scrollToBottom();(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();},350);}},[isOpen,scrollToBottom]);const handleInputChange=useCallback(e=>{setInputValue(e.target.value);// Auto-resize textarea\nif(e.target.scrollHeight<=120){e.target.style.height='auto';e.target.style.height=e.target.scrollHeight+'px';}},[]);const handleKeyDown=useCallback(e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(inputValue.trim()){sendMessage();}}},[inputValue]);const handleSuggestionClick=useCallback(suggestion=>{shouldScrollToBottom.current=true;// Always scroll for suggestions\nsetInputValue(suggestion);setShowSuggestions(false);// Auto-send suggestion or just populate input\nsetTimeout(()=>{sendMessage(suggestion);},100);},[]);// ONLY CHANGE THIS SECTION IN YOUR EXISTING ChatInterface.jsx\nconst sendMessage=useCallback(async function(){let messageText=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const textToSend=messageText||inputValue.trim();if(!textToSend)return;shouldScrollToBottom.current=true;// Always scroll for new user messages\n// Create user message\nconst userMessage={id:Date.now(),type:'user',text:textToSend,timestamp:new Date(),status:'sending'};setMessages(prev=>[...prev,userMessage]);setInputValue('');setIsTyping(true);setShowSuggestions(false);// Reset textarea height\nif(inputRef.current){inputRef.current.style.height='40px';}try{// Update user message status\nsetMessages(prev=>prev.map(msg=>msg.id===userMessage.id?{...msg,status:'delivered'}:msg));// Get bot response\nconst response=await askChatbot(textToSend,sessionId,selectedLocation);// Translate bot response if not in English\nlet botText=response.answer||\"I apologize, but I'm having trouble understanding that. Could you please rephrase your question about India's cultural heritage?\";if(i18n.language!=='en'){botText=await translateText(botText,i18n.language,'en');}// FIXED: Use 'answer' instead of 'response' field\nconst botMessage={id:Date.now()+1,type:'bot',text:botText,timestamp:new Date(),confidence:response.confidence||0.7,suggestions:response.followUpQuestions||[]};setMessages(prev=>[...prev,botMessage]);}catch(error){console.error('Error getting chatbot response:',error);const errorMessage={id:Date.now()+1,type:'bot',text:\"ðŸ”„ I apologize, but I'm experiencing some technical difficulties. Please try asking about a specific heritage site or check your connection.\",timestamp:new Date(),confidence:0.3,suggestions:[\"Tell me about the Taj Mahal\",\"What is the Golden Triangle route?\",\"Show me Buddhist heritage sites\"]};setMessages(prev=>[...prev,errorMessage]);}finally{setIsTyping(false);}},[inputValue,sessionId,selectedLocation]);return/*#__PURE__*/_jsxs(\"div\",{className:`chat-widget ${isPanelOpen?'panel-open':''}`,children:[/*#__PURE__*/_jsx(\"button\",{className:`chat-toggle ${isOpen?'open':''}`,onClick:toggleChat,\"aria-label\":isOpen?'Close chat':'Open chat',children:isOpen?/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",width:\"24\",height:\"24\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})}):/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",width:\"24\",height:\"24\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:`chat-container ${isOpen?'open':''}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-title\",children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",width:\"20\",height:\"20\",className:\"chat-icon\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"CuPe-KG Heritage Guide\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",ref:chatMessagesRef,onScroll:handleScroll,children:[/*#__PURE__*/_jsx(MessageGroup,{messages:messages,onSuggestionClick:handleSuggestionClick}),isTyping&&/*#__PURE__*/_jsx(\"div\",{className:\"message bot-message typing\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})}),showSuggestions&&/*#__PURE__*/_jsxs(\"div\",{className:\"initial-suggestions\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83C\\uDF1F Explore India's incredible heritage with me:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-buttons\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"suggestion-button\",onClick:()=>handleSuggestionClick(suggestion),style:{animationDelay:`${index*0.1}s`},children:suggestion},index))})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef,style:{height:'1px',width:'100%',paddingBottom:'8px'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:`chat-input-container ${isTyping?'sending':''}`,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,className:\"chat-input\",placeholder:t('chat.placeholder'),value:inputValue,onChange:handleInputChange,onKeyDown:handleKeyDown,rows:\"1\",style:{height:'40px'},maxLength:500,\"aria-label\":\"Chat input\"}),inputValue.length>400&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-counter\",children:[inputValue.length,\"/500\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button\",onClick:()=>sendMessage(),disabled:!inputValue.trim()||isTyping,\"aria-label\":isTyping?\"Sending message...\":\"Send message\",children:isTyping?/*#__PURE__*/// Loading spinner when sending\n_jsx(\"svg\",{viewBox:\"0 0 24 24\",width:\"20\",height:\"20\",className:\"spinner\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z\"})}):/*#__PURE__*/// Send arrow icon\n_jsx(\"svg\",{viewBox:\"0 0 24 24\",width:\"20\",height:\"20\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"})})})]})]})]});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useTranslation","useMapContext","askChatbot","translateText","MessageGroup","jsx","_jsx","jsxs","_jsxs","ChatInterface","_ref","isPanelOpen","t","i18n","isOpen","setIsOpen","messages","setMessages","id","type","text","timestamp","Date","status","confidence","inputValue","setInputValue","isTyping","setIsTyping","showSuggestions","setShowSuggestions","sessionId","setSessionId","messagesEndRef","inputRef","chatMessagesRef","shouldScrollToBottom","mapContext","selectedLocation","now","toString","Math","random","suggestions","scrollToBottom","current","scrollToEnd","scrollIntoView","behavior","block","inline","scrollTop","scrollHeight","requestAnimationFrame","setTimeout","length","handleScroll","clientHeight","isNearBottom","locationMessage","name","category","prev","toggleChat","_inputRef$current","focus","handleInputChange","e","target","value","style","height","handleKeyDown","key","shiftKey","preventDefault","trim","sendMessage","handleSuggestionClick","suggestion","messageText","arguments","undefined","textToSend","userMessage","map","msg","response","botText","answer","language","botMessage","followUpQuestions","error","console","errorMessage","className","children","onClick","viewBox","width","fill","d","ref","onScroll","onSuggestionClick","index","animationDelay","paddingBottom","placeholder","onChange","onKeyDown","rows","maxLength","disabled"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/components/ChatInterface/ChatInterface.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useMapContext } from '../../context/MapContext';\r\nimport { askChatbot } from '../../services/api';\r\nimport { translateText } from '../../utils/translationHelper';\r\nimport MessageGroup from './MessageGroup';\r\nimport './ChatInterface.css';\r\nimport './MessageGroup.css';\r\n\r\nconst ChatInterface = ({ isPanelOpen }) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      id: 1,\r\n      type: 'bot',\r\n      text: t('chat.welcome'),\r\n      timestamp: new Date(),\r\n      status: 'delivered',\r\n      confidence: 0.95\r\n    }\r\n  ]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(true);\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  const chatMessagesRef = useRef(null); // NEW: Direct reference to chat messages container\r\n  const shouldScrollToBottom = useRef(true); // NEW: Control when to scroll\r\n  \r\n  const mapContext = useMapContext();\r\n  const selectedLocation = mapContext?.selectedLocation;\r\n\r\n  // Initialize session ID\r\n  useEffect(() => {\r\n    if (!sessionId) {\r\n      setSessionId(Date.now().toString() + Math.random().toString(36));\r\n    }\r\n  }, [sessionId]);\r\n\r\n  const suggestions = [\r\n    t('chat.suggestions.hampi'),\r\n    t('chat.suggestions.delhi'),\r\n    t('chat.suggestions.buddhist'),\r\n    t('chat.suggestions.konark'),\r\n    t('chat.suggestions.tour')\r\n  ];\r\n\r\n  // IMPROVED: More reliable scroll to bottom function\r\n  const scrollToBottom = useCallback(() => {\r\n    if (!shouldScrollToBottom.current) return;\r\n    \r\n    // Multiple fallback methods to ensure scrolling works\r\n    const scrollToEnd = () => {\r\n      // Method 1: Use messagesEndRef if available\r\n      if (messagesEndRef.current) {\r\n        messagesEndRef.current.scrollIntoView({ \r\n          behavior: 'smooth', \r\n          block: 'end',\r\n          inline: 'nearest' \r\n        });\r\n      }\r\n      \r\n      // Method 2: Direct scroll on chat container\r\n      if (chatMessagesRef.current) {\r\n        chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\r\n      }\r\n    };\r\n\r\n    // Execute scroll after DOM update\r\n    requestAnimationFrame(() => {\r\n      setTimeout(scrollToEnd, 10); // Small delay for DOM rendering\r\n    });\r\n  }, []);\r\n\r\n  // FIXED: Better scroll effect with proper dependencies\r\n  useEffect(() => {\r\n    // Only auto-scroll when messages change OR typing state changes\r\n    scrollToBottom();\r\n  }, [messages.length, isTyping, scrollToBottom]); // Changed from [messages] to [messages.length]\r\n\r\n  // NEW: Scroll when chat opens\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setTimeout(() => {\r\n        shouldScrollToBottom.current = true;\r\n        scrollToBottom();\r\n      }, 300); // Wait for opening animation\r\n    }\r\n  }, [isOpen, scrollToBottom]);\r\n\r\n  // Check if user is near bottom to decide whether to auto-scroll\r\n  const handleScroll = useCallback(() => {\r\n    if (chatMessagesRef.current) {\r\n      const { scrollTop, scrollHeight, clientHeight } = chatMessagesRef.current;\r\n      const isNearBottom = scrollTop + clientHeight >= scrollHeight - 50; // 50px threshold\r\n      shouldScrollToBottom.current = isNearBottom;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Add contextual message when location changes\r\n    if (selectedLocation && sessionId) {\r\n      shouldScrollToBottom.current = true; // Always scroll for new contextual messages\r\n      const locationMessage = {\r\n        id: Date.now(),\r\n        type: 'bot',\r\n        text: `âœ¨ I see you're exploring ${selectedLocation.name}! This ${selectedLocation.category} site has fascinating stories to tell. What would you like to know about it?`,\r\n        timestamp: new Date(),\r\n        confidence: 0.9,\r\n        suggestions: [\r\n          `Tell me about ${selectedLocation.name}'s history`,\r\n          `What makes ${selectedLocation.name} special?`,\r\n          \"Show me nearby heritage sites\",\r\n          \"Plan a visit to this location\"\r\n        ]\r\n      };\r\n      \r\n      setMessages(prev => [...prev, locationMessage]);\r\n    }\r\n  }, [selectedLocation, sessionId]);\r\n\r\n  const toggleChat = useCallback(() => {\r\n    setIsOpen(!isOpen);\r\n    if (!isOpen) {\r\n      // When opening, ensure we scroll to bottom and focus input\r\n      setTimeout(() => {\r\n        shouldScrollToBottom.current = true;\r\n        scrollToBottom();\r\n        inputRef.current?.focus();\r\n      }, 350);\r\n    }\r\n  }, [isOpen, scrollToBottom]);\r\n\r\n  const handleInputChange = useCallback((e) => {\r\n    setInputValue(e.target.value);\r\n    \r\n    // Auto-resize textarea\r\n    if (e.target.scrollHeight <= 120) {\r\n      e.target.style.height = 'auto';\r\n      e.target.style.height = e.target.scrollHeight + 'px';\r\n    }\r\n  }, []);\r\n\r\n  const handleKeyDown = useCallback((e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      if (inputValue.trim()) {\r\n        sendMessage();\r\n      }\r\n    }\r\n  }, [inputValue]);\r\n\r\n  const handleSuggestionClick = useCallback((suggestion) => {\r\n    shouldScrollToBottom.current = true; // Always scroll for suggestions\r\n    setInputValue(suggestion);\r\n    setShowSuggestions(false);\r\n    \r\n    // Auto-send suggestion or just populate input\r\n    setTimeout(() => {\r\n      sendMessage(suggestion);\r\n    }, 100);\r\n  }, []);\r\n\r\n// ONLY CHANGE THIS SECTION IN YOUR EXISTING ChatInterface.jsx\r\n\r\n  const sendMessage = useCallback(async (messageText = null) => {\r\n    const textToSend = messageText || inputValue.trim();\r\n    if (!textToSend) return;\r\n\r\n    shouldScrollToBottom.current = true; // Always scroll for new user messages\r\n    \r\n    // Create user message\r\n    const userMessage = {\r\n      id: Date.now(),\r\n      type: 'user', \r\n      text: textToSend,\r\n      timestamp: new Date(),\r\n      status: 'sending'\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputValue('');\r\n    setIsTyping(true);\r\n    setShowSuggestions(false);\r\n\r\n    // Reset textarea height\r\n    if (inputRef.current) {\r\n      inputRef.current.style.height = '40px';\r\n    }\r\n\r\n    try {\r\n      // Update user message status\r\n      setMessages(prev => \r\n        prev.map(msg => \r\n          msg.id === userMessage.id \r\n            ? { ...msg, status: 'delivered' }\r\n            : msg\r\n        )\r\n      );\r\n\r\n      // Get bot response\r\n      const response = await askChatbot(textToSend, sessionId, selectedLocation);\r\n\r\n      // Translate bot response if not in English\r\n      let botText = response.answer || \"I apologize, but I'm having trouble understanding that. Could you please rephrase your question about India's cultural heritage?\";\r\n      if (i18n.language !== 'en') {\r\n        botText = await translateText(botText, i18n.language, 'en');\r\n      }\r\n\r\n      // FIXED: Use 'answer' instead of 'response' field\r\n      const botMessage = {\r\n        id: Date.now() + 1,\r\n        type: 'bot',\r\n        text: botText,\r\n        timestamp: new Date(),\r\n        confidence: response.confidence || 0.7,\r\n        suggestions: response.followUpQuestions || []\r\n      };\r\n\r\n      setMessages(prev => [...prev, botMessage]);\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting chatbot response:', error);\r\n      \r\n      const errorMessage = {\r\n        id: Date.now() + 1,\r\n        type: 'bot',\r\n        text: \"ðŸ”„ I apologize, but I'm experiencing some technical difficulties. Please try asking about a specific heritage site or check your connection.\",\r\n        timestamp: new Date(),\r\n        confidence: 0.3,\r\n        suggestions: [\r\n          \"Tell me about the Taj Mahal\",\r\n          \"What is the Golden Triangle route?\",\r\n          \"Show me Buddhist heritage sites\"\r\n        ]\r\n      };\r\n      \r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  }, [inputValue, sessionId, selectedLocation]);\r\n\r\n  return (\r\n    <div className={`chat-widget ${isPanelOpen ? 'panel-open' : ''}`}>\r\n      {/* Glassmorphism Floating Action Button */}\r\n      <button \r\n        className={`chat-toggle ${isOpen ? 'open' : ''}`} \r\n        onClick={toggleChat}\r\n        aria-label={isOpen ? 'Close chat' : 'Open chat'}\r\n      >\r\n        {isOpen ? (\r\n          <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\r\n            <path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\r\n          </svg>\r\n        ) : (\r\n          <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\r\n            <path fill=\"currentColor\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"/>\r\n          </svg>\r\n        )}\r\n      </button>\r\n      \r\n      {/* Glassmorphism Chat Container */}\r\n      <div className={`chat-container ${isOpen ? 'open' : ''}`}>\r\n        {/* Glass Header */}\r\n        <div className=\"chat-header\">\r\n          <div className=\"chat-title\">\r\n            <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" className=\"chat-icon\">\r\n              <path fill=\"currentColor\" d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\r\n            </svg>\r\n            <span>CuPe-KG Heritage Guide</span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Messages Area - FIXED with proper ref and scroll handling */}\r\n        <div \r\n          className=\"chat-messages\" \r\n          ref={chatMessagesRef}\r\n          onScroll={handleScroll}\r\n        >\r\n          <MessageGroup\r\n            messages={messages}\r\n            onSuggestionClick={handleSuggestionClick}\r\n          />\r\n          \r\n          {/* Enhanced Typing Indicator */}\r\n          {isTyping && (\r\n            <div className=\"message bot-message typing\">\r\n              <div className=\"typing-indicator\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Initial Suggestions with Glass Effect */}\r\n          {showSuggestions && (\r\n            <div className=\"initial-suggestions\">\r\n              <p>ðŸŒŸ Explore India's incredible heritage with me:</p>\r\n              <div className=\"suggestion-buttons\">\r\n                {suggestions.map((suggestion, index) => (\r\n                  <button \r\n                    key={index}\r\n                    className=\"suggestion-button\"\r\n                    onClick={() => handleSuggestionClick(suggestion)}\r\n                    style={{ animationDelay: `${index * 0.1}s` }}\r\n                  >\r\n                    {suggestion}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* FIXED: Scroll anchor element */}\r\n          <div \r\n            ref={messagesEndRef} \r\n            style={{ \r\n              height: '1px', \r\n              width: '100%', \r\n              paddingBottom: '8px' \r\n            }} \r\n          />\r\n        </div>\r\n        \r\n        {/* Enhanced Glass Input Area */}\r\n        <div className={`chat-input-container ${isTyping ? 'sending' : ''}`}>\r\n          <textarea\r\n            ref={inputRef}\r\n            className=\"chat-input\"\r\n            placeholder={t('chat.placeholder')}\r\n            value={inputValue}\r\n            onChange={handleInputChange}\r\n            onKeyDown={handleKeyDown}\r\n            rows=\"1\"\r\n            style={{ height: '40px' }}\r\n            maxLength={500}\r\n            aria-label=\"Chat input\"\r\n          />\r\n          \r\n          {/* Optional Character Counter */}\r\n          {inputValue.length > 400 && (\r\n            <div className=\"input-counter\">\r\n              {inputValue.length}/500\r\n            </div>\r\n          )}\r\n          \r\n          {/* Optional Voice Input Button (for future enhancement) \r\n          <button \r\n            className=\"voice-button\"\r\n            onClick={() => {}}\r\n            aria-label=\"Voice input\"\r\n            style={{ display: 'none' }}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\r\n              <path fill=\"currentColor\" d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\r\n              <path fill=\"currentColor\" d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/>\r\n            </svg>\r\n          </button>\r\n          */}\r\n          \r\n          {/* Enhanced Send Button */}\r\n          <button \r\n            className=\"send-button\" \r\n            onClick={() => sendMessage()}\r\n            disabled={!inputValue.trim() || isTyping}\r\n            aria-label={isTyping ? \"Sending message...\" : \"Send message\"}\r\n          >\r\n            {isTyping ? (\r\n              // Loading spinner when sending\r\n              <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" className=\"spinner\">\r\n                <path fill=\"currentColor\" d=\"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z\"/>\r\n              </svg>\r\n            ) : (\r\n              // Send arrow icon\r\n              <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\">\r\n                <path fill=\"currentColor\" d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\r\n              </svg>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}