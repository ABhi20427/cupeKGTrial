{"ast":null,"code":"// cupe-kg-frontend/src/utils/enhancedRoutePlanner.js\n// FIXED VERSION - Replace your entire enhancedRoutePlanner.js with this\nexport class UltraAccurateRoutePlanner{constructor(locations,routes){this.locations=locations||[];this.routes=routes||[];// Real distance matrix (in km) between major Indian cities\nthis.realDistanceMatrix={'delhi':{'jaipur':280,'agra':233,'varanasi':821,'amritsar':460,'hampi':1483,'udaipur':421,'khajuraho':620,'bodh-gaya':1105},'jaipur':{'delhi':280,'udaipur':393,'taj-mahal':240,'ajanta':739},'taj-mahal':{'delhi':233,'jaipur':240,'khajuraho':295,'varanasi':605},'varanasi':{'delhi':821,'bodh-gaya':250,'khajuraho':298,'kolkata':679,'agra':605},'bodh-gaya':{'varanasi':250,'delhi':1105,'kolkata':495,'patna':135},'hampi':{'delhi':1483,'madurai':440},'madurai':{'hampi':440,'chennai':462,'bangalore':460,'kochi':257},'amritsar':{'delhi':460,'chandigarh':230,'shimla':350},'udaipur':{'jaipur':393,'delhi':421,'mumbai':734,'ajanta':451},'konark':{'bhubaneswar':65,'kolkata':380,'delhi':1108},'ajanta':{'ellora':95,'mumbai':440,'pune':240,'udaipur':451},'ellora':{'ajanta':95,'mumbai':380,'pune':220}};// Transportation costs (INR per km)\nthis.transportationCosts={'flight':3.5,'train':0.75,'bus':0.45,'car':12};// Accommodation costs by city (per night)\nthis.accommodationCosts={'delhi':{low:1200,medium:3500,high:8500},'jaipur':{low:800,medium:2500,high:6500},'taj-mahal':{low:900,medium:2800,high:7000},'varanasi':{low:600,medium:1800,high:4500},'amritsar':{low:700,medium:2000,high:5000},'udaipur':{low:1000,medium:3200,high:8000},'hampi':{low:500,medium:1500,high:3500},'madurai':{low:600,medium:1800,high:4000},'bodh-gaya':{low:400,medium:1200,high:2800},'konark':{low:600,medium:1600,high:3500},'mahabalipuram':{low:800,medium:2200,high:5500},'ajanta':{low:600,medium:1600,high:3800},'ellora':{low:600,medium:1600,high:3800},'khajuraho':{low:700,medium:2000,high:4500}};// Weather and seasonal data\nthis.seasonalData={'winter':{months:['Oct','Nov','Dec','Jan','Feb','Mar'],bestRegions:['north','central','west','south'],temperature:{min:10,max:25},rainfall:'minimal'},'summer':{months:['Apr','May','Jun'],bestRegions:['hills','north-east'],avoidRegions:['rajasthan','central'],temperature:{min:25,max:45},rainfall:'none'},'monsoon':{months:['Jul','Aug','Sep'],bestRegions:['western-ghats','caves'],temperature:{min:20,max:30},rainfall:'heavy'}};}// Main route creation function\ncreateUltraAccurateRoute(preferences){console.log('Creating ultra-accurate route with preferences:',preferences);const{interests=[],max_travel_days=7,budget_range='medium',start_location=null,transport_mode='car',max_distance_km=500}=preferences;// Step 1: Filter locations by interests\nlet candidateLocations=this.filterLocationsByInterests(interests);console.log('Candidate locations found:',candidateLocations.length);if(candidateLocations.length===0){throw new Error('No locations found matching your interests');}// Step 2: Filter locations by distance from start location\nif(start_location&&max_distance_km){candidateLocations=this.filterLocationsByDistance(candidateLocations,start_location,max_distance_km);console.log(`Locations within ${max_distance_km}km:`,candidateLocations.length);if(candidateLocations.length===0){throw new Error(`No locations found within ${max_distance_km}km of your starting point. Try increasing the distance limit.`);}}// Step 3: Create optimized path\nconst optimizedPath=this.optimizePath(candidateLocations,start_location,max_travel_days,max_distance_km);console.log('Optimized path created:',optimizedPath.length,'locations');if(optimizedPath.length===0){throw new Error('Could not create an optimized path with your preferences');}// Step 4: Generate detailed itinerary\nconst detailedItinerary=this.createDetailedItinerary(optimizedPath,transport_mode,budget_range);return detailedItinerary;}// Filter locations based on interests\nfilterLocationsByInterests(interests){if(!interests||interests.length===0){return this.locations.slice(0,8);// Return first 8 locations as default\n}const filteredLocations=this.locations.filter(location=>{const locationTags=location.tags||[];const locationCategory=location.category||'';const locationDescription=location.description||'';return interests.some(interest=>{return locationTags.some(tag=>tag.toLowerCase().includes(interest.toLowerCase()))||locationCategory.toLowerCase().includes(interest.toLowerCase())||locationDescription.toLowerCase().includes(interest.toLowerCase());});});// If filtered results are too few, add some popular destinations\nif(filteredLocations.length<3){const popularDestinations=this.locations.filter(loc=>['taj-mahal','delhi','jaipur','varanasi','hampi'].includes(loc.id));return[...filteredLocations,...popularDestinations].slice(0,8);}return filteredLocations.slice(0,10);}// Filter locations by distance from start point\nfilterLocationsByDistance(locations,startLocation,maxDistanceKm){if(!startLocation||!maxDistanceKm){return locations;}const filtered=locations.filter(location=>{const locationCoords=this.getLocationCoordinates(location);const distance=this.calculateHaversineDistance(startLocation,locationCoords);console.log(`Distance from start to ${location.name}: ${distance}km (max: ${maxDistanceKm}km)`);return distance<=maxDistanceKm;});return filtered;}// Optimize path based on distance and travel time using Nearest Neighbor + 2-Opt\noptimizePath(locations,startLocation,maxDays){let maxDistanceKm=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(!locations||locations.length===0){return[];}// Limit locations based on travel days (roughly 1-2 locations per day)\nconst maxLocations=Math.min(locations.length,Math.ceil(maxDays/1.5));const limitedLocations=locations.slice(0,maxLocations);if(limitedLocations.length<=1){return limitedLocations;}// Step 1: Use Nearest Neighbor to get initial route\nconst initialPath=this.nearestNeighborPath(limitedLocations,startLocation,maxDistanceKm,maxLocations);if(initialPath.length<=2){return initialPath;}// Step 2: Improve the route using 2-Opt algorithm\nconst improvedPath=this.twoOptImprovement(initialPath,startLocation);console.log('Route optimization: Initial distance:',this.calculateTotalDistance(initialPath),'km, Improved distance:',this.calculateTotalDistance(improvedPath),'km');return improvedPath;}// Nearest Neighbor algorithm for initial path\nnearestNeighborPath(locations,startLocation,maxDistanceKm,maxLocations){const optimizedPath=[];const remainingLocations=[...locations];// Start with location closest to start point or first location\nlet currentLocation;if(startLocation){currentLocation=this.findNearestLocation(remainingLocations,startLocation);}else{currentLocation=remainingLocations[0];}optimizedPath.push(currentLocation);const currentIndex=remainingLocations.indexOf(currentLocation);remainingLocations.splice(currentIndex,1);// Add nearest neighbors, ensuring we don't exceed max distance from start\nwhile(remainingLocations.length>0&&optimizedPath.length<maxLocations){const currentCoords=this.getLocationCoordinates(currentLocation);let nearestLocation=null;let shortestDistance=Infinity;remainingLocations.forEach(loc=>{const locCoords=this.getLocationCoordinates(loc);const distance=this.calculateHaversineDistance(currentCoords,locCoords);// Additional check: ensure location is within max distance from start if specified\nif(maxDistanceKm&&startLocation){const distanceFromStart=this.calculateHaversineDistance(startLocation,locCoords);if(distanceFromStart>maxDistanceKm){return;// Skip this location as it's beyond max distance\n}}if(distance<shortestDistance){shortestDistance=distance;nearestLocation=loc;}});if(nearestLocation){optimizedPath.push(nearestLocation);currentLocation=nearestLocation;const nearestIndex=remainingLocations.indexOf(nearestLocation);remainingLocations.splice(nearestIndex,1);}else{break;}}return optimizedPath;}// 2-Opt improvement algorithm - iteratively improves the route\ntwoOptImprovement(path,startLocation){if(path.length<4){return path;// 2-opt needs at least 4 locations\n}let improved=true;let currentPath=[...path];let iterations=0;const maxIterations=100;// Prevent infinite loops\nwhile(improved&&iterations<maxIterations){improved=false;iterations++;for(let i=0;i<currentPath.length-2;i++){for(let j=i+2;j<currentPath.length;j++){// Skip if we're trying to reverse a segment that includes the start\nif(startLocation&&i===0&&j===currentPath.length-1){continue;}const newPath=this.twoOptSwap(currentPath,i,j);const currentDistance=this.calculateTotalDistance(currentPath);const newDistance=this.calculateTotalDistance(newPath);if(newDistance<currentDistance){currentPath=newPath;improved=true;break;}}if(improved)break;}}console.log(`2-Opt completed in ${iterations} iterations`);return currentPath;}// Perform 2-opt swap - reverse the segment between i and j\ntwoOptSwap(path,i,j){const newPath=[...path];// Reverse the segment between i+1 and j\nwhile(i+1<j){i++;[newPath[i],newPath[j]]=[newPath[j],newPath[i]];j--;}return newPath;}// Find nearest location to a given point\nfindNearestLocation(locations,point){let nearest=locations[0];let shortestDistance=Infinity;locations.forEach(location=>{const locCoords=this.getLocationCoordinates(location);const distance=this.calculateHaversineDistance(point,locCoords);if(distance<shortestDistance){shortestDistance=distance;nearest=location;}});return nearest;}// Get coordinates from location object\ngetLocationCoordinates(location){if(location.coordinates){if(typeof location.coordinates==='object'&&location.coordinates.lat){return{lat:location.coordinates.lat,lng:location.coordinates.lng};}else if(Array.isArray(location.coordinates)){return{lat:location.coordinates[0],lng:location.coordinates[1]};}}// Fallback coordinates if not available\nreturn{lat:28.6139,lng:77.2090};// Delhi coordinates as fallback\n}// Calculate Haversine distance\ncalculateHaversineDistance(coord1,coord2){const R=6371;// Earth's radius in km\nconst lat1=coord1.lat||coord1[0]||0;const lng1=coord1.lng||coord1[1]||0;const lat2=coord2.lat||coord2[0]||0;const lng2=coord2.lng||coord2[1]||0;const dLat=(lat2-lat1)*Math.PI/180;const dLng=(lng2-lng1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLng/2)*Math.sin(dLng/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(R*c);}// Create detailed itinerary\ncreateDetailedItinerary(path,transportMode,budget){const itinerary=[];let currentDay=1;let totalCost=0;for(let i=0;i<path.length;i++){const location=path[i];const nextLocation=path[i+1];// Location exploration days - THIS IS THE MISSING METHOD\nconst daysAtLocation=this.getOptimalDaysAtLocation(location);const dailyCost=this.getAccommodationCost(location.id||location.name,budget)+this.getFoodCost(budget)+this.getLocalTransportCost();for(let day=0;day<daysAtLocation;day++){const dayActivity=this.generateDayActivity(location,day,budget);itinerary.push({day:currentDay+day,location:location.name,type:'exploration',description:dayActivity.description,highlights:dayActivity.highlights,costs:{accommodation:this.getAccommodationCost(location.id||location.name,budget),food:this.getFoodCost(budget),localTransport:this.getLocalTransportCost(),attractions:dayActivity.attractionCosts,total:dailyCost+dayActivity.attractionCosts},culturalInsights:this.getCulturalInsights(location),practicalTips:this.getPracticalTips(location)});totalCost+=dailyCost+dayActivity.attractionCosts;}currentDay+=daysAtLocation;// Travel day\nif(nextLocation){const travelDetails=this.getAccurateTravelDetails(location,nextLocation,transportMode);itinerary.push({day:currentDay,location:`${location.name} to ${nextLocation.name}`,type:'travel',description:`Travel from ${location.name} to ${nextLocation.name} via ${travelDetails.mode}`,travelDetails:travelDetails,costs:{transport:travelDetails.cost,food:travelDetails.mealCost||0,total:travelDetails.cost+(travelDetails.mealCost||0)}});totalCost+=travelDetails.cost+(travelDetails.mealCost||0);currentDay++;}}return{id:`ultra-accurate-${Date.now()}`,name:'Your Culturally Intelligent Route',description:`Scientifically optimized ${path.length}-destination route with cultural depth`,color:'#2196F3',path:path.map(loc=>{const coords=this.getLocationCoordinates(loc);return[coords.lat,coords.lng];}),locations:path.map(loc=>{const coords=this.getLocationCoordinates(loc);return{name:loc.name,coordinates:[coords.lat,coords.lng],description:loc.description||'Cultural heritage site'};}),detailedItinerary:itinerary,totalCost:Math.round(totalCost),totalDays:currentDay-1,culturalThemes:this.extractCulturalThemes(path),optimizationMetrics:{totalDistance:this.calculateTotalDistance(path),culturalDiversity:this.calculateCulturalDiversity(path),costEfficiency:this.calculateCostEfficiency(totalCost,path.length)}};}// THE MISSING METHOD - Calculate optimal days at each location\ngetOptimalDaysAtLocation(location){var _location$name;// Default to 2 days, but adjust based on location importance and attractions\nconst locationName=((_location$name=location.name)===null||_location$name===void 0?void 0:_location$name.toLowerCase())||'';// Major destinations that need more time\nconst majorDestinations=['delhi','rajasthan','taj mahal','varanasi','hampi'];if(majorDestinations.some(dest=>locationName.includes(dest))){return 3;}// UNESCO sites or complex sites\nconst complexSites=['ajanta','ellora','khajuraho','konark'];if(complexSites.some(site=>locationName.includes(site))){return 2;}// Default for most locations\nreturn 2;}// Helper methods for accurate cost calculation\ngetAccommodationCost(locationId,budget){const normalizedId=(locationId===null||locationId===void 0?void 0:locationId.toLowerCase().replace(/\\s+/g,'-'))||'default';const costs=this.accommodationCosts[normalizedId]||{low:800,medium:2500,high:6000};return costs[budget]||costs.medium;}getFoodCost(budget){const foodCosts={low:800,medium:1500,high:3000};return foodCosts[budget]||foodCosts.medium;}getLocalTransportCost(){return 500;// Average local transport per day\n}// Generate detailed day activities\ngenerateDayActivity(location,dayNumber,budget){const attractions=this.getLocationAttractions(location.id||location.name);const selectedAttractions=attractions.slice(dayNumber*2,(dayNumber+1)*2);return{description:`Day ${dayNumber+1} in ${location.name}: ${selectedAttractions.map(a=>a.name).join(', ')}`,highlights:selectedAttractions,attractionCosts:selectedAttractions.reduce((sum,attr)=>sum+(attr.entryCost||0),0)};}// Get location-specific attractions with costs\ngetLocationAttractions(locationId){const attractions={'delhi':[{name:'Red Fort',entryCost:35,time:'3 hours'},{name:'India Gate',entryCost:0,time:'1 hour'},{name:'Qutub Minar',entryCost:30,time:'2 hours'},{name:'Lotus Temple',entryCost:0,time:'1 hour'}],'taj-mahal':[{name:'Taj Mahal',entryCost:50,time:'4 hours'},{name:'Agra Fort',entryCost:40,time:'3 hours'},{name:'Mehtab Bagh',entryCost:25,time:'2 hours'}],'jaipur':[{name:'Amber Fort',entryCost:25,time:'4 hours'},{name:'City Palace',entryCost:30,time:'3 hours'},{name:'Hawa Mahal',entryCost:15,time:'1 hour'}]};const normalizedId=(locationId===null||locationId===void 0?void 0:locationId.toLowerCase().replace(/\\s+/g,'-'))||'default';return attractions[normalizedId]||[{name:'Main Attraction',entryCost:25,time:'3 hours'},{name:'Local Temple',entryCost:10,time:'2 hours'},{name:'Cultural Site',entryCost:20,time:'2 hours'}];}// Get accurate travel details between locations\ngetAccurateTravelDetails(from,to,mode){const fromCoords=this.getLocationCoordinates(from);const toCoords=this.getLocationCoordinates(to);const distance=this.calculateHaversineDistance(fromCoords,toCoords);const transportMode=mode||'car';const costPerKm=this.transportationCosts[transportMode]||this.transportationCosts.car;const baseCost=distance*costPerKm;// Calculate travel time based on mode\nconst speeds={car:60,train:80,bus:50,flight:500};// km/h\nconst speed=speeds[transportMode]||speeds.car;const travelTimeHours=Math.ceil(distance/speed);return{mode:transportMode,distance:distance,duration:`${travelTimeHours} hours`,cost:Math.round(baseCost),mealCost:travelTimeHours>4?300:0};}// Get cultural insights for location\ngetCulturalInsights(location){return[`Rich cultural heritage dating back centuries`,`Architectural significance in ${location.dynasty||'regional'} style`,`Important pilgrimage and tourism destination`];}// Get practical tips\ngetPracticalTips(location){return['Best visited early morning or late afternoon','Respect local customs and dress codes','Hire local guides for deeper insights','Carry water and comfortable walking shoes'];}// Extract cultural themes from path\nextractCulturalThemes(path){const themes=new Set();path.forEach(location=>{if(location.dynasty)themes.add(location.dynasty);if(location.category)themes.add(location.category);if(location.tags)location.tags.forEach(tag=>themes.add(tag));});return Array.from(themes);}// Calculate total distance\ncalculateTotalDistance(path){let totalDistance=0;for(let i=0;i<path.length-1;i++){const current=this.getLocationCoordinates(path[i]);const next=this.getLocationCoordinates(path[i+1]);totalDistance+=this.calculateHaversineDistance(current,next);}return totalDistance;}// Calculate cultural diversity score\ncalculateCulturalDiversity(path){const themes=this.extractCulturalThemes(path);return Math.min(themes.length*10,100);// Max 100%\n}// Calculate cost efficiency\ncalculateCostEfficiency(totalCost,numLocations){const costPerLocation=totalCost/numLocations;return costPerLocation<5000?'High':costPerLocation<8000?'Medium':'Low';}}","map":{"version":3,"names":["UltraAccurateRoutePlanner","constructor","locations","routes","realDistanceMatrix","transportationCosts","accommodationCosts","low","medium","high","seasonalData","months","bestRegions","temperature","min","max","rainfall","avoidRegions","createUltraAccurateRoute","preferences","console","log","interests","max_travel_days","budget_range","start_location","transport_mode","max_distance_km","candidateLocations","filterLocationsByInterests","length","Error","filterLocationsByDistance","optimizedPath","optimizePath","detailedItinerary","createDetailedItinerary","slice","filteredLocations","filter","location","locationTags","tags","locationCategory","category","locationDescription","description","some","interest","tag","toLowerCase","includes","popularDestinations","loc","id","startLocation","maxDistanceKm","filtered","locationCoords","getLocationCoordinates","distance","calculateHaversineDistance","name","maxDays","arguments","undefined","maxLocations","Math","ceil","limitedLocations","initialPath","nearestNeighborPath","improvedPath","twoOptImprovement","calculateTotalDistance","remainingLocations","currentLocation","findNearestLocation","push","currentIndex","indexOf","splice","currentCoords","nearestLocation","shortestDistance","Infinity","forEach","locCoords","distanceFromStart","nearestIndex","path","improved","currentPath","iterations","maxIterations","i","j","newPath","twoOptSwap","currentDistance","newDistance","point","nearest","coordinates","lat","lng","Array","isArray","coord1","coord2","R","lat1","lng1","lat2","lng2","dLat","PI","dLng","a","sin","cos","c","atan2","sqrt","round","transportMode","budget","itinerary","currentDay","totalCost","nextLocation","daysAtLocation","getOptimalDaysAtLocation","dailyCost","getAccommodationCost","getFoodCost","getLocalTransportCost","day","dayActivity","generateDayActivity","type","highlights","costs","accommodation","food","localTransport","attractions","attractionCosts","total","culturalInsights","getCulturalInsights","practicalTips","getPracticalTips","travelDetails","getAccurateTravelDetails","mode","transport","cost","mealCost","Date","now","color","map","coords","totalDays","culturalThemes","extractCulturalThemes","optimizationMetrics","totalDistance","culturalDiversity","calculateCulturalDiversity","costEfficiency","calculateCostEfficiency","_location$name","locationName","majorDestinations","dest","complexSites","site","locationId","normalizedId","replace","foodCosts","dayNumber","getLocationAttractions","selectedAttractions","join","reduce","sum","attr","entryCost","time","from","to","fromCoords","toCoords","costPerKm","car","baseCost","speeds","train","bus","flight","speed","travelTimeHours","duration","dynasty","themes","Set","add","current","next","numLocations","costPerLocation"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/utils/enhancedRoutePlanner.js"],"sourcesContent":["// cupe-kg-frontend/src/utils/enhancedRoutePlanner.js\r\n// FIXED VERSION - Replace your entire enhancedRoutePlanner.js with this\r\n\r\nexport class UltraAccurateRoutePlanner {\r\n  constructor(locations, routes) {\r\n    this.locations = locations || [];\r\n    this.routes = routes || [];\r\n    \r\n    // Real distance matrix (in km) between major Indian cities\r\n    this.realDistanceMatrix = {\r\n      'delhi': {\r\n        'jaipur': 280, 'agra': 233, 'varanasi': 821, 'amritsar': 460,\r\n        'hampi': 1483, 'udaipur': 421, 'khajuraho': 620, 'bodh-gaya': 1105\r\n      },\r\n      'jaipur': {\r\n        'delhi': 280, 'udaipur': 393, 'taj-mahal': 240, 'ajanta': 739\r\n      },\r\n      'taj-mahal': {\r\n        'delhi': 233, 'jaipur': 240, 'khajuraho': 295, 'varanasi': 605\r\n      },\r\n      'varanasi': {\r\n        'delhi': 821, 'bodh-gaya': 250, 'khajuraho': 298, 'kolkata': 679,\r\n        'agra': 605\r\n      },\r\n      'bodh-gaya': {\r\n        'varanasi': 250, 'delhi': 1105, 'kolkata': 495, 'patna': 135\r\n      },\r\n      'hampi': {\r\n        'delhi': 1483, 'madurai': 440\r\n      },\r\n      'madurai': {\r\n        'hampi': 440, 'chennai': 462, 'bangalore': 460, 'kochi': 257\r\n      },\r\n      'amritsar': {\r\n        'delhi': 460, 'chandigarh': 230, 'shimla': 350\r\n      },\r\n      'udaipur': {\r\n        'jaipur': 393, 'delhi': 421, 'mumbai': 734, 'ajanta': 451\r\n      },\r\n      'konark': {\r\n        'bhubaneswar': 65, 'kolkata': 380, 'delhi': 1108\r\n      },\r\n      'ajanta': {\r\n        'ellora': 95, 'mumbai': 440, 'pune': 240, 'udaipur': 451\r\n      },\r\n      'ellora': {\r\n        'ajanta': 95, 'mumbai': 380, 'pune': 220\r\n      }\r\n    };\r\n\r\n    // Transportation costs (INR per km)\r\n    this.transportationCosts = {\r\n      'flight': 3.5,\r\n      'train': 0.75,\r\n      'bus': 0.45,\r\n      'car': 12\r\n    };\r\n\r\n    // Accommodation costs by city (per night)\r\n    this.accommodationCosts = {\r\n      'delhi': { low: 1200, medium: 3500, high: 8500 },\r\n      'jaipur': { low: 800, medium: 2500, high: 6500 },\r\n      'taj-mahal': { low: 900, medium: 2800, high: 7000 },\r\n      'varanasi': { low: 600, medium: 1800, high: 4500 },\r\n      'amritsar': { low: 700, medium: 2000, high: 5000 },\r\n      'udaipur': { low: 1000, medium: 3200, high: 8000 },\r\n      'hampi': { low: 500, medium: 1500, high: 3500 },\r\n      'madurai': { low: 600, medium: 1800, high: 4000 },\r\n      'bodh-gaya': { low: 400, medium: 1200, high: 2800 },\r\n      'konark': { low: 600, medium: 1600, high: 3500 },\r\n      'mahabalipuram': { low: 800, medium: 2200, high: 5500 },\r\n      'ajanta': { low: 600, medium: 1600, high: 3800 },\r\n      'ellora': { low: 600, medium: 1600, high: 3800 },\r\n      'khajuraho': { low: 700, medium: 2000, high: 4500 }\r\n    };\r\n\r\n    // Weather and seasonal data\r\n    this.seasonalData = {\r\n      'winter': {\r\n        months: ['Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar'],\r\n        bestRegions: ['north', 'central', 'west', 'south'],\r\n        temperature: { min: 10, max: 25 },\r\n        rainfall: 'minimal'\r\n      },\r\n      'summer': {\r\n        months: ['Apr', 'May', 'Jun'],\r\n        bestRegions: ['hills', 'north-east'],\r\n        avoidRegions: ['rajasthan', 'central'],\r\n        temperature: { min: 25, max: 45 },\r\n        rainfall: 'none'\r\n      },\r\n      'monsoon': {\r\n        months: ['Jul', 'Aug', 'Sep'],\r\n        bestRegions: ['western-ghats', 'caves'],\r\n        temperature: { min: 20, max: 30 },\r\n        rainfall: 'heavy'\r\n      }\r\n    };\r\n  }\r\n\r\n  // Main route creation function\r\n  createUltraAccurateRoute(preferences) {\r\n    console.log('Creating ultra-accurate route with preferences:', preferences);\r\n\r\n    const {\r\n      interests = [],\r\n      max_travel_days = 7,\r\n      budget_range = 'medium',\r\n      start_location = null,\r\n      transport_mode = 'car',\r\n      max_distance_km = 500\r\n    } = preferences;\r\n\r\n    // Step 1: Filter locations by interests\r\n    let candidateLocations = this.filterLocationsByInterests(interests);\r\n    console.log('Candidate locations found:', candidateLocations.length);\r\n\r\n    if (candidateLocations.length === 0) {\r\n      throw new Error('No locations found matching your interests');\r\n    }\r\n\r\n    // Step 2: Filter locations by distance from start location\r\n    if (start_location && max_distance_km) {\r\n      candidateLocations = this.filterLocationsByDistance(candidateLocations, start_location, max_distance_km);\r\n      console.log(`Locations within ${max_distance_km}km:`, candidateLocations.length);\r\n\r\n      if (candidateLocations.length === 0) {\r\n        throw new Error(`No locations found within ${max_distance_km}km of your starting point. Try increasing the distance limit.`);\r\n      }\r\n    }\r\n\r\n    // Step 3: Create optimized path\r\n    const optimizedPath = this.optimizePath(candidateLocations, start_location, max_travel_days, max_distance_km);\r\n    console.log('Optimized path created:', optimizedPath.length, 'locations');\r\n\r\n    if (optimizedPath.length === 0) {\r\n      throw new Error('Could not create an optimized path with your preferences');\r\n    }\r\n\r\n    // Step 4: Generate detailed itinerary\r\n    const detailedItinerary = this.createDetailedItinerary(optimizedPath, transport_mode, budget_range);\r\n\r\n    return detailedItinerary;\r\n  }\r\n\r\n  // Filter locations based on interests\r\n  filterLocationsByInterests(interests) {\r\n    if (!interests || interests.length === 0) {\r\n      return this.locations.slice(0, 8); // Return first 8 locations as default\r\n    }\r\n\r\n    const filteredLocations = this.locations.filter(location => {\r\n      const locationTags = location.tags || [];\r\n      const locationCategory = location.category || '';\r\n      const locationDescription = location.description || '';\r\n\r\n      return interests.some(interest => {\r\n        return locationTags.some(tag => tag.toLowerCase().includes(interest.toLowerCase())) ||\r\n               locationCategory.toLowerCase().includes(interest.toLowerCase()) ||\r\n               locationDescription.toLowerCase().includes(interest.toLowerCase());\r\n      });\r\n    });\r\n\r\n    // If filtered results are too few, add some popular destinations\r\n    if (filteredLocations.length < 3) {\r\n      const popularDestinations = this.locations.filter(loc =>\r\n        ['taj-mahal', 'delhi', 'jaipur', 'varanasi', 'hampi'].includes(loc.id)\r\n      );\r\n      return [...filteredLocations, ...popularDestinations].slice(0, 8);\r\n    }\r\n\r\n    return filteredLocations.slice(0, 10);\r\n  }\r\n\r\n  // Filter locations by distance from start point\r\n  filterLocationsByDistance(locations, startLocation, maxDistanceKm) {\r\n    if (!startLocation || !maxDistanceKm) {\r\n      return locations;\r\n    }\r\n\r\n    const filtered = locations.filter(location => {\r\n      const locationCoords = this.getLocationCoordinates(location);\r\n      const distance = this.calculateHaversineDistance(startLocation, locationCoords);\r\n\r\n      console.log(`Distance from start to ${location.name}: ${distance}km (max: ${maxDistanceKm}km)`);\r\n\r\n      return distance <= maxDistanceKm;\r\n    });\r\n\r\n    return filtered;\r\n  }\r\n\r\n  // Optimize path based on distance and travel time using Nearest Neighbor + 2-Opt\r\n  optimizePath(locations, startLocation, maxDays, maxDistanceKm = null) {\r\n    if (!locations || locations.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Limit locations based on travel days (roughly 1-2 locations per day)\r\n    const maxLocations = Math.min(locations.length, Math.ceil(maxDays / 1.5));\r\n    const limitedLocations = locations.slice(0, maxLocations);\r\n\r\n    if (limitedLocations.length <= 1) {\r\n      return limitedLocations;\r\n    }\r\n\r\n    // Step 1: Use Nearest Neighbor to get initial route\r\n    const initialPath = this.nearestNeighborPath(limitedLocations, startLocation, maxDistanceKm, maxLocations);\r\n\r\n    if (initialPath.length <= 2) {\r\n      return initialPath;\r\n    }\r\n\r\n    // Step 2: Improve the route using 2-Opt algorithm\r\n    const improvedPath = this.twoOptImprovement(initialPath, startLocation);\r\n\r\n    console.log('Route optimization: Initial distance:', this.calculateTotalDistance(initialPath),\r\n                'km, Improved distance:', this.calculateTotalDistance(improvedPath), 'km');\r\n\r\n    return improvedPath;\r\n  }\r\n\r\n  // Nearest Neighbor algorithm for initial path\r\n  nearestNeighborPath(locations, startLocation, maxDistanceKm, maxLocations) {\r\n    const optimizedPath = [];\r\n    const remainingLocations = [...locations];\r\n\r\n    // Start with location closest to start point or first location\r\n    let currentLocation;\r\n    if (startLocation) {\r\n      currentLocation = this.findNearestLocation(remainingLocations, startLocation);\r\n    } else {\r\n      currentLocation = remainingLocations[0];\r\n    }\r\n\r\n    optimizedPath.push(currentLocation);\r\n    const currentIndex = remainingLocations.indexOf(currentLocation);\r\n    remainingLocations.splice(currentIndex, 1);\r\n\r\n    // Add nearest neighbors, ensuring we don't exceed max distance from start\r\n    while (remainingLocations.length > 0 && optimizedPath.length < maxLocations) {\r\n      const currentCoords = this.getLocationCoordinates(currentLocation);\r\n      let nearestLocation = null;\r\n      let shortestDistance = Infinity;\r\n\r\n      remainingLocations.forEach(loc => {\r\n        const locCoords = this.getLocationCoordinates(loc);\r\n        const distance = this.calculateHaversineDistance(currentCoords, locCoords);\r\n\r\n        // Additional check: ensure location is within max distance from start if specified\r\n        if (maxDistanceKm && startLocation) {\r\n          const distanceFromStart = this.calculateHaversineDistance(startLocation, locCoords);\r\n          if (distanceFromStart > maxDistanceKm) {\r\n            return; // Skip this location as it's beyond max distance\r\n          }\r\n        }\r\n\r\n        if (distance < shortestDistance) {\r\n          shortestDistance = distance;\r\n          nearestLocation = loc;\r\n        }\r\n      });\r\n\r\n      if (nearestLocation) {\r\n        optimizedPath.push(nearestLocation);\r\n        currentLocation = nearestLocation;\r\n        const nearestIndex = remainingLocations.indexOf(nearestLocation);\r\n        remainingLocations.splice(nearestIndex, 1);\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return optimizedPath;\r\n  }\r\n\r\n  // 2-Opt improvement algorithm - iteratively improves the route\r\n  twoOptImprovement(path, startLocation) {\r\n    if (path.length < 4) {\r\n      return path; // 2-opt needs at least 4 locations\r\n    }\r\n\r\n    let improved = true;\r\n    let currentPath = [...path];\r\n    let iterations = 0;\r\n    const maxIterations = 100; // Prevent infinite loops\r\n\r\n    while (improved && iterations < maxIterations) {\r\n      improved = false;\r\n      iterations++;\r\n\r\n      for (let i = 0; i < currentPath.length - 2; i++) {\r\n        for (let j = i + 2; j < currentPath.length; j++) {\r\n          // Skip if we're trying to reverse a segment that includes the start\r\n          if (startLocation && i === 0 && j === currentPath.length - 1) {\r\n            continue;\r\n          }\r\n\r\n          const newPath = this.twoOptSwap(currentPath, i, j);\r\n          const currentDistance = this.calculateTotalDistance(currentPath);\r\n          const newDistance = this.calculateTotalDistance(newPath);\r\n\r\n          if (newDistance < currentDistance) {\r\n            currentPath = newPath;\r\n            improved = true;\r\n            break;\r\n          }\r\n        }\r\n        if (improved) break;\r\n      }\r\n    }\r\n\r\n    console.log(`2-Opt completed in ${iterations} iterations`);\r\n    return currentPath;\r\n  }\r\n\r\n  // Perform 2-opt swap - reverse the segment between i and j\r\n  twoOptSwap(path, i, j) {\r\n    const newPath = [...path];\r\n\r\n    // Reverse the segment between i+1 and j\r\n    while (i + 1 < j) {\r\n      i++;\r\n      [newPath[i], newPath[j]] = [newPath[j], newPath[i]];\r\n      j--;\r\n    }\r\n\r\n    return newPath;\r\n  }\r\n\r\n  // Find nearest location to a given point\r\n  findNearestLocation(locations, point) {\r\n    let nearest = locations[0];\r\n    let shortestDistance = Infinity;\r\n\r\n    locations.forEach(location => {\r\n      const locCoords = this.getLocationCoordinates(location);\r\n      const distance = this.calculateHaversineDistance(point, locCoords);\r\n      \r\n      if (distance < shortestDistance) {\r\n        shortestDistance = distance;\r\n        nearest = location;\r\n      }\r\n    });\r\n\r\n    return nearest;\r\n  }\r\n\r\n  // Get coordinates from location object\r\n  getLocationCoordinates(location) {\r\n    if (location.coordinates) {\r\n      if (typeof location.coordinates === 'object' && location.coordinates.lat) {\r\n        return { lat: location.coordinates.lat, lng: location.coordinates.lng };\r\n      } else if (Array.isArray(location.coordinates)) {\r\n        return { lat: location.coordinates[0], lng: location.coordinates[1] };\r\n      }\r\n    }\r\n    \r\n    // Fallback coordinates if not available\r\n    return { lat: 28.6139, lng: 77.2090 }; // Delhi coordinates as fallback\r\n  }\r\n\r\n  // Calculate Haversine distance\r\n  calculateHaversineDistance(coord1, coord2) {\r\n    const R = 6371; // Earth's radius in km\r\n    const lat1 = coord1.lat || coord1[0] || 0;\r\n    const lng1 = coord1.lng || coord1[1] || 0;\r\n    const lat2 = coord2.lat || coord2[0] || 0;\r\n    const lng2 = coord2.lng || coord2[1] || 0;\r\n    \r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLng = (lng2 - lng1) * Math.PI / 180;\r\n    \r\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n              Math.sin(dLng/2) * Math.sin(dLng/2);\r\n    \r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n    return Math.round(R * c);\r\n  }\r\n\r\n  // Create detailed itinerary\r\n  createDetailedItinerary(path, transportMode, budget) {\r\n    const itinerary = [];\r\n    let currentDay = 1;\r\n    let totalCost = 0;\r\n    \r\n    for (let i = 0; i < path.length; i++) {\r\n      const location = path[i];\r\n      const nextLocation = path[i + 1];\r\n      \r\n      // Location exploration days - THIS IS THE MISSING METHOD\r\n      const daysAtLocation = this.getOptimalDaysAtLocation(location);\r\n      const dailyCost = this.getAccommodationCost(location.id || location.name, budget) + \r\n                       this.getFoodCost(budget) + \r\n                       this.getLocalTransportCost();\r\n      \r\n      for (let day = 0; day < daysAtLocation; day++) {\r\n        const dayActivity = this.generateDayActivity(location, day, budget);\r\n        itinerary.push({\r\n          day: currentDay + day,\r\n          location: location.name,\r\n          type: 'exploration',\r\n          description: dayActivity.description,\r\n          highlights: dayActivity.highlights,\r\n          costs: {\r\n            accommodation: this.getAccommodationCost(location.id || location.name, budget),\r\n            food: this.getFoodCost(budget),\r\n            localTransport: this.getLocalTransportCost(),\r\n            attractions: dayActivity.attractionCosts,\r\n            total: dailyCost + dayActivity.attractionCosts\r\n          },\r\n          culturalInsights: this.getCulturalInsights(location),\r\n          practicalTips: this.getPracticalTips(location)\r\n        });\r\n        totalCost += dailyCost + dayActivity.attractionCosts;\r\n      }\r\n      \r\n      currentDay += daysAtLocation;\r\n      \r\n      // Travel day\r\n      if (nextLocation) {\r\n        const travelDetails = this.getAccurateTravelDetails(location, nextLocation, transportMode);\r\n        itinerary.push({\r\n          day: currentDay,\r\n          location: `${location.name} to ${nextLocation.name}`,\r\n          type: 'travel',\r\n          description: `Travel from ${location.name} to ${nextLocation.name} via ${travelDetails.mode}`,\r\n          travelDetails: travelDetails,\r\n          costs: {\r\n            transport: travelDetails.cost,\r\n            food: travelDetails.mealCost || 0,\r\n            total: travelDetails.cost + (travelDetails.mealCost || 0)\r\n          }\r\n        });\r\n        totalCost += travelDetails.cost + (travelDetails.mealCost || 0);\r\n        currentDay++;\r\n      }\r\n    }\r\n    \r\n    return {\r\n      id: `ultra-accurate-${Date.now()}`,\r\n      name: 'Your Culturally Intelligent Route',\r\n      description: `Scientifically optimized ${path.length}-destination route with cultural depth`,\r\n      color: '#2196F3',\r\n      path: path.map(loc => {\r\n        const coords = this.getLocationCoordinates(loc);\r\n        return [coords.lat, coords.lng];\r\n      }),\r\n      locations: path.map(loc => {\r\n        const coords = this.getLocationCoordinates(loc);\r\n        return {\r\n          name: loc.name,\r\n          coordinates: [coords.lat, coords.lng],\r\n          description: loc.description || 'Cultural heritage site'\r\n        };\r\n      }),\r\n      detailedItinerary: itinerary,\r\n      totalCost: Math.round(totalCost),\r\n      totalDays: currentDay - 1,\r\n      culturalThemes: this.extractCulturalThemes(path),\r\n      optimizationMetrics: {\r\n        totalDistance: this.calculateTotalDistance(path),\r\n        culturalDiversity: this.calculateCulturalDiversity(path),\r\n        costEfficiency: this.calculateCostEfficiency(totalCost, path.length)\r\n      }\r\n    };\r\n  }\r\n\r\n  // THE MISSING METHOD - Calculate optimal days at each location\r\n  getOptimalDaysAtLocation(location) {\r\n    // Default to 2 days, but adjust based on location importance and attractions\r\n    const locationName = location.name?.toLowerCase() || '';\r\n    \r\n    // Major destinations that need more time\r\n    const majorDestinations = ['delhi', 'rajasthan', 'taj mahal', 'varanasi', 'hampi'];\r\n    if (majorDestinations.some(dest => locationName.includes(dest))) {\r\n      return 3;\r\n    }\r\n    \r\n    // UNESCO sites or complex sites\r\n    const complexSites = ['ajanta', 'ellora', 'khajuraho', 'konark'];\r\n    if (complexSites.some(site => locationName.includes(site))) {\r\n      return 2;\r\n    }\r\n    \r\n    // Default for most locations\r\n    return 2;\r\n  }\r\n\r\n  // Helper methods for accurate cost calculation\r\n  getAccommodationCost(locationId, budget) {\r\n    const normalizedId = locationId?.toLowerCase().replace(/\\s+/g, '-') || 'default';\r\n    const costs = this.accommodationCosts[normalizedId] || { low: 800, medium: 2500, high: 6000 };\r\n    return costs[budget] || costs.medium;\r\n  }\r\n\r\n  getFoodCost(budget) {\r\n    const foodCosts = { low: 800, medium: 1500, high: 3000 };\r\n    return foodCosts[budget] || foodCosts.medium;\r\n  }\r\n\r\n  getLocalTransportCost() {\r\n    return 500; // Average local transport per day\r\n  }\r\n\r\n  // Generate detailed day activities\r\n  generateDayActivity(location, dayNumber, budget) {\r\n    const attractions = this.getLocationAttractions(location.id || location.name);\r\n    const selectedAttractions = attractions.slice(dayNumber * 2, (dayNumber + 1) * 2);\r\n    \r\n    return {\r\n      description: `Day ${dayNumber + 1} in ${location.name}: ${selectedAttractions.map(a => a.name).join(', ')}`,\r\n      highlights: selectedAttractions,\r\n      attractionCosts: selectedAttractions.reduce((sum, attr) => sum + (attr.entryCost || 0), 0)\r\n    };\r\n  }\r\n\r\n  // Get location-specific attractions with costs\r\n  getLocationAttractions(locationId) {\r\n    const attractions = {\r\n      'delhi': [\r\n        { name: 'Red Fort', entryCost: 35, time: '3 hours' },\r\n        { name: 'India Gate', entryCost: 0, time: '1 hour' },\r\n        { name: 'Qutub Minar', entryCost: 30, time: '2 hours' },\r\n        { name: 'Lotus Temple', entryCost: 0, time: '1 hour' }\r\n      ],\r\n      'taj-mahal': [\r\n        { name: 'Taj Mahal', entryCost: 50, time: '4 hours' },\r\n        { name: 'Agra Fort', entryCost: 40, time: '3 hours' },\r\n        { name: 'Mehtab Bagh', entryCost: 25, time: '2 hours' }\r\n      ],\r\n      'jaipur': [\r\n        { name: 'Amber Fort', entryCost: 25, time: '4 hours' },\r\n        { name: 'City Palace', entryCost: 30, time: '3 hours' },\r\n        { name: 'Hawa Mahal', entryCost: 15, time: '1 hour' }\r\n      ]\r\n    };\r\n\r\n    const normalizedId = locationId?.toLowerCase().replace(/\\s+/g, '-') || 'default';\r\n    return attractions[normalizedId] || [\r\n      { name: 'Main Attraction', entryCost: 25, time: '3 hours' },\r\n      { name: 'Local Temple', entryCost: 10, time: '2 hours' },\r\n      { name: 'Cultural Site', entryCost: 20, time: '2 hours' }\r\n    ];\r\n  }\r\n\r\n  // Get accurate travel details between locations\r\n  getAccurateTravelDetails(from, to, mode) {\r\n    const fromCoords = this.getLocationCoordinates(from);\r\n    const toCoords = this.getLocationCoordinates(to);\r\n    const distance = this.calculateHaversineDistance(fromCoords, toCoords);\r\n    \r\n    const transportMode = mode || 'car';\r\n    const costPerKm = this.transportationCosts[transportMode] || this.transportationCosts.car;\r\n    const baseCost = distance * costPerKm;\r\n    \r\n    // Calculate travel time based on mode\r\n    const speeds = { car: 60, train: 80, bus: 50, flight: 500 }; // km/h\r\n    const speed = speeds[transportMode] || speeds.car;\r\n    const travelTimeHours = Math.ceil(distance / speed);\r\n    \r\n    return {\r\n      mode: transportMode,\r\n      distance: distance,\r\n      duration: `${travelTimeHours} hours`,\r\n      cost: Math.round(baseCost),\r\n      mealCost: travelTimeHours > 4 ? 300 : 0\r\n    };\r\n  }\r\n\r\n  // Get cultural insights for location\r\n  getCulturalInsights(location) {\r\n    return [\r\n      `Rich cultural heritage dating back centuries`,\r\n      `Architectural significance in ${location.dynasty || 'regional'} style`,\r\n      `Important pilgrimage and tourism destination`\r\n    ];\r\n  }\r\n\r\n  // Get practical tips\r\n  getPracticalTips(location) {\r\n    return [\r\n      'Best visited early morning or late afternoon',\r\n      'Respect local customs and dress codes',\r\n      'Hire local guides for deeper insights',\r\n      'Carry water and comfortable walking shoes'\r\n    ];\r\n  }\r\n\r\n  // Extract cultural themes from path\r\n  extractCulturalThemes(path) {\r\n    const themes = new Set();\r\n    path.forEach(location => {\r\n      if (location.dynasty) themes.add(location.dynasty);\r\n      if (location.category) themes.add(location.category);\r\n      if (location.tags) location.tags.forEach(tag => themes.add(tag));\r\n    });\r\n    return Array.from(themes);\r\n  }\r\n\r\n  // Calculate total distance\r\n  calculateTotalDistance(path) {\r\n    let totalDistance = 0;\r\n    for (let i = 0; i < path.length - 1; i++) {\r\n      const current = this.getLocationCoordinates(path[i]);\r\n      const next = this.getLocationCoordinates(path[i + 1]);\r\n      totalDistance += this.calculateHaversineDistance(current, next);\r\n    }\r\n    return totalDistance;\r\n  }\r\n\r\n  // Calculate cultural diversity score\r\n  calculateCulturalDiversity(path) {\r\n    const themes = this.extractCulturalThemes(path);\r\n    return Math.min(themes.length * 10, 100); // Max 100%\r\n  }\r\n\r\n  // Calculate cost efficiency\r\n  calculateCostEfficiency(totalCost, numLocations) {\r\n    const costPerLocation = totalCost / numLocations;\r\n    return costPerLocation < 5000 ? 'High' : costPerLocation < 8000 ? 'Medium' : 'Low';\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}