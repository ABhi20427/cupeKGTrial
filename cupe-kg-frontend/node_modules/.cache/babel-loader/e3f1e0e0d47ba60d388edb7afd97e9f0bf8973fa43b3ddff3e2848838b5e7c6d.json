{"ast":null,"code":"var _jsxFileName = \"D:\\\\MY projects\\\\CupeKG\\\\cupe-kg-frontend\\\\src\\\\components\\\\Timeline\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\n// cupe-kg-frontend/src/components/Timeline/Timeline.jsx\n// FINAL VERSION with Complete API Integration\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useMapContext } from '../../context/MapContext';\nimport timelineApiService from '../../services/timelineApi';\nimport './Timeline.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Timeline = ({\n  isVisible,\n  onLocationSelect\n}) => {\n  _s();\n  const {\n    locations,\n    selectLocation,\n    selectedLocation\n  } = useMapContext();\n  const [selectedPeriod, setSelectedPeriod] = useState(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [timelinePeriods, setTimelinePeriods] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [dataSource, setDataSource] = useState('none');\n  const [apiHealth, setApiHealth] = useState(null);\n\n  // Fetch timeline data from backend API\n  const fetchTimelineFromAPI = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      console.log('Timeline: Attempting to fetch from API...');\n\n      // First check API health\n      try {\n        const health = await timelineApiService.checkTimelineHealth();\n        setApiHealth(health);\n        console.log('Timeline API Health:', health);\n      } catch (healthError) {\n        console.warn('Timeline API health check failed:', healthError.message);\n      }\n\n      // Fetch timeline data\n      const data = await timelineApiService.fetchTimelinePeriods();\n      if (data.periods && data.periods.length > 0) {\n        setTimelinePeriods(data.periods);\n        setDataSource('backend');\n        console.log(`Timeline: Successfully loaded ${data.totalPeriods} periods from backend API`);\n        console.log('Timeline data:', data);\n      } else {\n        throw new Error('No timeline periods received from API');\n      }\n    } catch (error) {\n      console.error('Timeline API Error:', error);\n      setError(error.message);\n\n      // Fallback to frontend processing\n      console.log('Timeline: Falling back to frontend data processing');\n      if (locations && locations.length > 0) {\n        const periods = processLocationsIntoTimeline(locations);\n        setTimelinePeriods(periods);\n        setDataSource('frontend-fallback');\n      } else {\n        setDataSource('no-data');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [locations]);\n\n  // Process locations into timeline periods (fallback method)\n  const processLocationsIntoTimeline = useCallback(locations => {\n    if (!locations || !Array.isArray(locations)) {\n      console.warn('Timeline: Invalid locations data for processing');\n      return [];\n    }\n    const periodMap = new Map();\n    locations.forEach(location => {\n      if (!location || !location.period) return;\n      try {\n        // Extract period information\n        const periodInfo = extractPeriodInfo(location.period);\n        periodInfo.forEach(period => {\n          const key = period.label;\n          if (!periodMap.has(key)) {\n            periodMap.set(key, {\n              ...period,\n              locations: []\n            });\n          }\n          periodMap.get(key).locations.push(location);\n        });\n      } catch (err) {\n        console.warn(`Timeline: Error processing location ${location.name}:`, err);\n      }\n    });\n\n    // Convert to array and sort by start year\n    const periodsArray = Array.from(periodMap.values());\n    periodsArray.sort((a, b) => a.startYear - b.startYear);\n    console.log(`Timeline: Processed ${periodsArray.length} periods from ${locations.length} locations`);\n    return periodsArray;\n  }, []);\n  const extractPeriodInfo = periodString => {\n    const periods = [];\n    if (!periodString || typeof periodString !== 'string') {\n      return periods;\n    }\n\n    // Handle different period formats with more robust patterns\n    const patterns = [\n    // \"1336 CE - 1646 CE\"\n    {\n      regex: /(\\d{1,4})\\s*CE\\s*-\\s*(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[2]),\n        label: `${match[1]} CE - ${match[2]} CE`,\n        era: 'CE'\n      })\n    },\n    // \"13th century CE\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*CE/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        const startYear = (century - 1) * 100 + 1;\n        const endYear = century * 100;\n        return {\n          startYear,\n          endYear,\n          label: `${century}${getOrdinalSuffix(century)} Century CE`,\n          era: 'CE'\n        };\n      }\n    },\n    // \"950 CE - 1050 CE\" (range without second CE)\n    {\n      regex: /(\\d{1,4})\\s*-\\s*(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[2]),\n        label: `${match[1]} - ${match[2]} CE`,\n        era: 'CE'\n      })\n    },\n    // Single year \"1632 CE\"\n    {\n      regex: /(\\d{1,4})\\s*CE/i,\n      handler: match => ({\n        startYear: parseInt(match[1]),\n        endYear: parseInt(match[1]) + 50,\n        // Approximate 50-year span\n        label: `${match[1]} CE`,\n        era: 'CE'\n      })\n    },\n    // \"2nd century BCE\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        return {\n          startYear: -(century * 100),\n          endYear: -((century - 1) * 100 + 1),\n          label: `${century}${getOrdinalSuffix(century)} Century BCE`,\n          era: 'BCE'\n        };\n      }\n    },\n    // Complex periods like \"3rd century BCE (with later additions)\"\n    {\n      regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE.*$/i,\n      handler: match => {\n        const century = parseInt(match[1]);\n        return {\n          startYear: -(century * 100),\n          endYear: -((century - 1) * 100 + 1),\n          label: `${century}${getOrdinalSuffix(century)} Century BCE`,\n          era: 'BCE'\n        };\n      }\n    }];\n    for (const pattern of patterns) {\n      const match = periodString.match(pattern.regex);\n      if (match) {\n        try {\n          periods.push(pattern.handler(match));\n          break;\n        } catch (err) {\n          console.warn(`Error parsing period \"${periodString}\":`, err);\n          continue;\n        }\n      }\n    }\n\n    // Fallback: create a general period\n    if (periods.length === 0) {\n      periods.push({\n        startYear: 1000,\n        // Default\n        endYear: 2000,\n        label: periodString.trim(),\n        era: 'Unknown'\n      });\n    }\n    return periods;\n  };\n\n  // Helper function for ordinal suffixes\n  const getOrdinalSuffix = num => {\n    const remainder = num % 10;\n    const hundredRemainder = num % 100;\n    if (hundredRemainder >= 11 && hundredRemainder <= 13) {\n      return 'th';\n    }\n    switch (remainder) {\n      case 1:\n        return 'st';\n      case 2:\n        return 'nd';\n      case 3:\n        return 'rd';\n      default:\n        return 'th';\n    }\n  };\n\n  // Main effect: Load timeline data when component becomes visible\n  useEffect(() => {\n    if (isVisible && timelinePeriods.length === 0) {\n      fetchTimelineFromAPI();\n    }\n  }, [isVisible, fetchTimelineFromAPI, timelinePeriods.length]);\n\n  // Fallback effect: Use local data if API fails and locations are available\n  useEffect(() => {\n    if (locations && locations.length > 0 && timelinePeriods.length === 0 && !isLoading && dataSource === 'no-data') {\n      console.log('Timeline: Using local locations data as final fallback');\n      const periods = processLocationsIntoTimeline(locations);\n      if (periods.length > 0) {\n        setTimelinePeriods(periods);\n        setDataSource('frontend');\n      }\n    }\n  }, [locations, timelinePeriods.length, isLoading, dataSource, processLocationsIntoTimeline]);\n  const handlePeriodClick = period => {\n    if ((selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label) {\n      setSelectedPeriod(null);\n      // Reset to modern view\n      if (onLocationSelect) {\n        onLocationSelect(null, 'modern');\n      }\n    } else {\n      setSelectedPeriod(period);\n      // Trigger historical visualization mode\n      if (onLocationSelect) {\n        onLocationSelect(period.locations[0] || null, 'historical', {\n          period: period,\n          era: period.era,\n          timeframe: period.label\n        });\n      }\n    }\n  };\n  const handleLocationClick = location => {\n    selectLocation(location);\n    if (onLocationSelect) {\n      onLocationSelect(location);\n    }\n  };\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  // Retry loading from API\n  const retryApiLoad = () => {\n    setError(null);\n    setTimelinePeriods([]);\n    setDataSource('none');\n    fetchTimelineFromAPI();\n  };\n  const getEraColor = era => {\n    const colors = {\n      'CE': '#3f51b5',\n      'BCE': '#e91e63',\n      'Unknown': '#757575'\n    };\n    return colors[era] || colors['Unknown'];\n  };\n  const getDynastyColor = dynasty => {\n    if (!dynasty) return '#757575';\n    const colors = {\n      'Mughal Empire': '#ff9800',\n      'Vijayanagara Empire': '#4caf50',\n      'Chandela Dynasty': '#9c27b0',\n      'Eastern Ganga Dynasty': '#f44336',\n      'Satavahana and Vakataka': '#00bcd4',\n      'Rashtrakuta Dynasty': '#795548',\n      'Delhi Sultanate': '#607d8b',\n      'Sikh Gurus': '#9c27b0',\n      'Portuguese Colonial': '#ff5722',\n      'Mauryan Empire': '#3f51b5'\n    };\n\n    // Find matching dynasty\n    for (const [key, color] of Object.entries(colors)) {\n      if (dynasty.includes(key)) {\n        return color;\n      }\n    }\n    return '#757575';\n  };\n  if (!isVisible) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `timeline-container ${isExpanded ? 'expanded' : 'collapsed'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-header\",\n      onClick: toggleExpanded,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Historical Timeline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-status\",\n        children: [dataSource === 'backend' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator api\",\n          title: \"Data from backend API\",\n          children: \"API\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 40\n        }, this), dataSource === 'frontend' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator local\",\n          title: \"Data processed locally\",\n          children: \"LOCAL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 41\n        }, this), dataSource === 'frontend-fallback' && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"data-source-indicator fallback\",\n          title: \"Fallback to local processing\",\n          children: \"FALLBACK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 50\n        }, this), apiHealth && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"api-health-indicator\",\n          title: `${apiHealth.locationsWithPeriods}/${apiHealth.totalLocations} locations have period data`,\n          children: [apiHealth.locationsWithPeriods, \"/\", apiHealth.totalLocations]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"expand-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-content\",\n      children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading timeline data from server...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }, this), error && !isLoading && timelinePeriods.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Failed to load timeline data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: retryApiLoad,\n          className: \"retry-button\",\n          children: \"Retry API Connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }, this), !isLoading && timelinePeriods.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-periods\",\n          children: timelinePeriods.map((period, index) => {\n            var _period$locations, _period$locations2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `timeline-period ${(selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label ? 'active' : ''}`,\n              onClick: () => handlePeriodClick(period),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-marker\",\n                style: {\n                  backgroundColor: getEraColor(period.era)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"period-label\",\n                  children: period.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"period-meta\",\n                  children: [((_period$locations = period.locations) === null || _period$locations === void 0 ? void 0 : _period$locations.length) || 0, \" location\", (((_period$locations2 = period.locations) === null || _period$locations2 === void 0 ? void 0 : _period$locations2.length) || 0) !== 1 ? 's' : '', period.era !== 'Unknown' && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"era-indicator\",\n                    children: [\" \\u2022 \", period.era]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this), (selectedPeriod === null || selectedPeriod === void 0 ? void 0 : selectedPeriod.label) === period.label && period.locations && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"period-locations\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Heritage Sites from this Period\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: period.locations.map((location, locIndex) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: `location-item ${(selectedLocation === null || selectedLocation === void 0 ? void 0 : selectedLocation.id) === location.id ? 'selected' : ''}`,\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleLocationClick(location);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"location-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-name\",\n                        children: location.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 405,\n                        columnNumber: 33\n                      }, this), location.dynasty && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-dynasty\",\n                        children: location.dynasty\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 407,\n                        columnNumber: 35\n                      }, this), location.category && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"location-category\",\n                        children: location.category\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 412,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dynasty-indicator\",\n                      style: {\n                        backgroundColor: getDynastyColor(location.dynasty)\n                      },\n                      title: location.dynasty || 'Unknown dynasty'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 417,\n                      columnNumber: 31\n                    }, this)]\n                  }, location.id || `${location.name}-${locIndex}`, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 23\n              }, this)]\n            }, `${period.label}-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 15\n        }, this), (error || dataSource === 'frontend-fallback') && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-info\",\n          children: /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [dataSource === 'frontend-fallback' && '‚ö†Ô∏è Using fallback data processing', error && !timelinePeriods.length && '‚ùå Server connection failed']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true), !isLoading && timelinePeriods.length === 0 && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-empty-icon\",\n          children: \"\\uD83D\\uDCC5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-empty-text\",\n          children: \"No timeline data available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: retryApiLoad,\n          className: \"retry-button\",\n          children: \"Try Loading Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }, this), timelinePeriods.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Era Legend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-items\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#3f51b5'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Common Era (CE)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#e91e63'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Before Common Era (BCE)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 17\n          }, this), timelinePeriods.some(p => p.era === 'Unknown') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"legend-color\",\n              style: {\n                backgroundColor: '#757575'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Unknown Period\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 325,\n    columnNumber: 5\n  }, this);\n};\n_s(Timeline, \"pCPMg5PhndCmhaua4gS5h5buYBI=\", false, function () {\n  return [useMapContext];\n});\n_c = Timeline;\nexport default Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMapContext","timelineApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","Timeline","isVisible","onLocationSelect","_s","locations","selectLocation","selectedLocation","selectedPeriod","setSelectedPeriod","isExpanded","setIsExpanded","timelinePeriods","setTimelinePeriods","isLoading","setIsLoading","error","setError","dataSource","setDataSource","apiHealth","setApiHealth","fetchTimelineFromAPI","console","log","health","checkTimelineHealth","healthError","warn","message","data","fetchTimelinePeriods","periods","length","totalPeriods","Error","processLocationsIntoTimeline","Array","isArray","periodMap","Map","forEach","location","period","periodInfo","extractPeriodInfo","key","label","has","set","get","push","err","name","periodsArray","from","values","sort","a","b","startYear","periodString","patterns","regex","handler","match","parseInt","endYear","era","century","getOrdinalSuffix","pattern","trim","num","remainder","hundredRemainder","handlePeriodClick","timeframe","handleLocationClick","toggleExpanded","retryApiLoad","getEraColor","colors","getDynastyColor","dynasty","color","Object","entries","includes","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","title","locationsWithPeriods","totalLocations","map","index","_period$locations","_period$locations2","style","backgroundColor","locIndex","id","e","stopPropagation","category","some","p","_c","$RefreshReg$"],"sources":["D:/MY projects/CupeKG/cupe-kg-frontend/src/components/Timeline/Timeline.jsx"],"sourcesContent":["// cupe-kg-frontend/src/components/Timeline/Timeline.jsx\r\n// FINAL VERSION with Complete API Integration\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useMapContext } from '../../context/MapContext';\r\nimport timelineApiService from '../../services/timelineApi';\r\nimport './Timeline.css';\r\n\r\nconst Timeline = ({ isVisible, onLocationSelect }) => {\r\n  const { locations, selectLocation, selectedLocation } = useMapContext();\r\n  const [selectedPeriod, setSelectedPeriod] = useState(null);\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [timelinePeriods, setTimelinePeriods] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [dataSource, setDataSource] = useState('none');\r\n  const [apiHealth, setApiHealth] = useState(null);\r\n\r\n  // Fetch timeline data from backend API\r\n  const fetchTimelineFromAPI = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      console.log('Timeline: Attempting to fetch from API...');\r\n      \r\n      // First check API health\r\n      try {\r\n        const health = await timelineApiService.checkTimelineHealth();\r\n        setApiHealth(health);\r\n        console.log('Timeline API Health:', health);\r\n      } catch (healthError) {\r\n        console.warn('Timeline API health check failed:', healthError.message);\r\n      }\r\n      \r\n      // Fetch timeline data\r\n      const data = await timelineApiService.fetchTimelinePeriods();\r\n      \r\n      if (data.periods && data.periods.length > 0) {\r\n        setTimelinePeriods(data.periods);\r\n        setDataSource('backend');\r\n        console.log(`Timeline: Successfully loaded ${data.totalPeriods} periods from backend API`);\r\n        console.log('Timeline data:', data);\r\n      } else {\r\n        throw new Error('No timeline periods received from API');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Timeline API Error:', error);\r\n      setError(error.message);\r\n      \r\n      // Fallback to frontend processing\r\n      console.log('Timeline: Falling back to frontend data processing');\r\n      if (locations && locations.length > 0) {\r\n        const periods = processLocationsIntoTimeline(locations);\r\n        setTimelinePeriods(periods);\r\n        setDataSource('frontend-fallback');\r\n      } else {\r\n        setDataSource('no-data');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [locations]);\r\n\r\n  // Process locations into timeline periods (fallback method)\r\n  const processLocationsIntoTimeline = useCallback((locations) => {\r\n    if (!locations || !Array.isArray(locations)) {\r\n      console.warn('Timeline: Invalid locations data for processing');\r\n      return [];\r\n    }\r\n\r\n    const periodMap = new Map();\r\n    \r\n    locations.forEach(location => {\r\n      if (!location || !location.period) return;\r\n      \r\n      try {\r\n        // Extract period information\r\n        const periodInfo = extractPeriodInfo(location.period);\r\n        \r\n        periodInfo.forEach(period => {\r\n          const key = period.label;\r\n          if (!periodMap.has(key)) {\r\n            periodMap.set(key, {\r\n              ...period,\r\n              locations: []\r\n            });\r\n          }\r\n          periodMap.get(key).locations.push(location);\r\n        });\r\n      } catch (err) {\r\n        console.warn(`Timeline: Error processing location ${location.name}:`, err);\r\n      }\r\n    });\r\n    \r\n    // Convert to array and sort by start year\r\n    const periodsArray = Array.from(periodMap.values());\r\n    periodsArray.sort((a, b) => a.startYear - b.startYear);\r\n    \r\n    console.log(`Timeline: Processed ${periodsArray.length} periods from ${locations.length} locations`);\r\n    return periodsArray;\r\n  }, []);\r\n\r\n  const extractPeriodInfo = (periodString) => {\r\n    const periods = [];\r\n    \r\n    if (!periodString || typeof periodString !== 'string') {\r\n      return periods;\r\n    }\r\n    \r\n    // Handle different period formats with more robust patterns\r\n    const patterns = [\r\n      // \"1336 CE - 1646 CE\"\r\n      {\r\n        regex: /(\\d{1,4})\\s*CE\\s*-\\s*(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[2]),\r\n          label: `${match[1]} CE - ${match[2]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // \"13th century CE\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*CE/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          const startYear = (century - 1) * 100 + 1;\r\n          const endYear = century * 100;\r\n          return {\r\n            startYear,\r\n            endYear,\r\n            label: `${century}${getOrdinalSuffix(century)} Century CE`,\r\n            era: 'CE'\r\n          };\r\n        }\r\n      },\r\n      // \"950 CE - 1050 CE\" (range without second CE)\r\n      {\r\n        regex: /(\\d{1,4})\\s*-\\s*(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[2]),\r\n          label: `${match[1]} - ${match[2]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // Single year \"1632 CE\"\r\n      {\r\n        regex: /(\\d{1,4})\\s*CE/i,\r\n        handler: (match) => ({\r\n          startYear: parseInt(match[1]),\r\n          endYear: parseInt(match[1]) + 50, // Approximate 50-year span\r\n          label: `${match[1]} CE`,\r\n          era: 'CE'\r\n        })\r\n      },\r\n      // \"2nd century BCE\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          return {\r\n            startYear: -(century * 100),\r\n            endYear: -((century - 1) * 100 + 1),\r\n            label: `${century}${getOrdinalSuffix(century)} Century BCE`,\r\n            era: 'BCE'\r\n          };\r\n        }\r\n      },\r\n      // Complex periods like \"3rd century BCE (with later additions)\"\r\n      {\r\n        regex: /(\\d{1,2})(?:st|nd|rd|th)\\s*century\\s*BCE.*$/i,\r\n        handler: (match) => {\r\n          const century = parseInt(match[1]);\r\n          return {\r\n            startYear: -(century * 100),\r\n            endYear: -((century - 1) * 100 + 1),\r\n            label: `${century}${getOrdinalSuffix(century)} Century BCE`,\r\n            era: 'BCE'\r\n          };\r\n        }\r\n      }\r\n    ];\r\n    \r\n    for (const pattern of patterns) {\r\n      const match = periodString.match(pattern.regex);\r\n      if (match) {\r\n        try {\r\n          periods.push(pattern.handler(match));\r\n          break;\r\n        } catch (err) {\r\n          console.warn(`Error parsing period \"${periodString}\":`, err);\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Fallback: create a general period\r\n    if (periods.length === 0) {\r\n      periods.push({\r\n        startYear: 1000, // Default\r\n        endYear: 2000,\r\n        label: periodString.trim(),\r\n        era: 'Unknown'\r\n      });\r\n    }\r\n    \r\n    return periods;\r\n  };\r\n\r\n  // Helper function for ordinal suffixes\r\n  const getOrdinalSuffix = (num) => {\r\n    const remainder = num % 10;\r\n    const hundredRemainder = num % 100;\r\n    \r\n    if (hundredRemainder >= 11 && hundredRemainder <= 13) {\r\n      return 'th';\r\n    }\r\n    \r\n    switch (remainder) {\r\n      case 1: return 'st';\r\n      case 2: return 'nd';\r\n      case 3: return 'rd';\r\n      default: return 'th';\r\n    }\r\n  };\r\n\r\n  // Main effect: Load timeline data when component becomes visible\r\n  useEffect(() => {\r\n    if (isVisible && timelinePeriods.length === 0) {\r\n      fetchTimelineFromAPI();\r\n    }\r\n  }, [isVisible, fetchTimelineFromAPI, timelinePeriods.length]);\r\n\r\n  // Fallback effect: Use local data if API fails and locations are available\r\n  useEffect(() => {\r\n    if (locations && locations.length > 0 && timelinePeriods.length === 0 && !isLoading && dataSource === 'no-data') {\r\n      console.log('Timeline: Using local locations data as final fallback');\r\n      const periods = processLocationsIntoTimeline(locations);\r\n      if (periods.length > 0) {\r\n        setTimelinePeriods(periods);\r\n        setDataSource('frontend');\r\n      }\r\n    }\r\n  }, [locations, timelinePeriods.length, isLoading, dataSource, processLocationsIntoTimeline]);\r\n\r\n  const handlePeriodClick = (period) => {\r\n    if (selectedPeriod?.label === period.label) {\r\n      setSelectedPeriod(null);\r\n      // Reset to modern view\r\n      if (onLocationSelect) {\r\n        onLocationSelect(null, 'modern');\r\n      }\r\n    } else {\r\n      setSelectedPeriod(period);\r\n      // Trigger historical visualization mode\r\n      if (onLocationSelect) {\r\n        onLocationSelect(period.locations[0] || null, 'historical', {\r\n          period: period,\r\n          era: period.era,\r\n          timeframe: period.label\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLocationClick = (location) => {\r\n    selectLocation(location);\r\n    if (onLocationSelect) {\r\n      onLocationSelect(location);\r\n    }\r\n  };\r\n\r\n  const toggleExpanded = () => {\r\n    setIsExpanded(!isExpanded);\r\n  };\r\n\r\n  // Retry loading from API\r\n  const retryApiLoad = () => {\r\n    setError(null);\r\n    setTimelinePeriods([]);\r\n    setDataSource('none');\r\n    fetchTimelineFromAPI();\r\n  };\r\n\r\n  const getEraColor = (era) => {\r\n    const colors = {\r\n      'CE': '#3f51b5',\r\n      'BCE': '#e91e63',\r\n      'Unknown': '#757575'\r\n    };\r\n    return colors[era] || colors['Unknown'];\r\n  };\r\n\r\n  const getDynastyColor = (dynasty) => {\r\n    if (!dynasty) return '#757575';\r\n    \r\n    const colors = {\r\n      'Mughal Empire': '#ff9800',\r\n      'Vijayanagara Empire': '#4caf50',\r\n      'Chandela Dynasty': '#9c27b0',\r\n      'Eastern Ganga Dynasty': '#f44336',\r\n      'Satavahana and Vakataka': '#00bcd4',\r\n      'Rashtrakuta Dynasty': '#795548',\r\n      'Delhi Sultanate': '#607d8b',\r\n      'Sikh Gurus': '#9c27b0',\r\n      'Portuguese Colonial': '#ff5722',\r\n      'Mauryan Empire': '#3f51b5'\r\n    };\r\n    \r\n    // Find matching dynasty\r\n    for (const [key, color] of Object.entries(colors)) {\r\n      if (dynasty.includes(key)) {\r\n        return color;\r\n      }\r\n    }\r\n    return '#757575';\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className={`timeline-container ${isExpanded ? 'expanded' : 'collapsed'}`}>\r\n      <div className=\"timeline-header\" onClick={toggleExpanded}>\r\n        <h3>Historical Timeline</h3>\r\n        <div className=\"timeline-status\">\r\n          {dataSource === 'backend' && <span className=\"data-source-indicator api\" title=\"Data from backend API\">API</span>}\r\n          {dataSource === 'frontend' && <span className=\"data-source-indicator local\" title=\"Data processed locally\">LOCAL</span>}\r\n          {dataSource === 'frontend-fallback' && <span className=\"data-source-indicator fallback\" title=\"Fallback to local processing\">FALLBACK</span>}\r\n          {apiHealth && (\r\n            <span className=\"api-health-indicator\" title={`${apiHealth.locationsWithPeriods}/${apiHealth.totalLocations} locations have period data`}>\r\n              {apiHealth.locationsWithPeriods}/{apiHealth.totalLocations}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button className=\"expand-button\" />\r\n      </div>\r\n      \r\n      {isExpanded && (\r\n        <div className=\"timeline-content\">\r\n          {/* Loading State */}\r\n          {isLoading && (\r\n            <div className=\"timeline-loading\">\r\n              <div className=\"loading-spinner\"></div>\r\n              <p>Loading timeline data from server...</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Error State with Retry */}\r\n          {error && !isLoading && timelinePeriods.length === 0 && (\r\n            <div className=\"timeline-error\">\r\n              <div className=\"error-message\">\r\n                <p>Failed to load timeline data</p>\r\n                <small>{error}</small>\r\n              </div>\r\n              <button onClick={retryApiLoad} className=\"retry-button\">\r\n                Retry API Connection\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Timeline Periods */}\r\n          {!isLoading && timelinePeriods.length > 0 && (\r\n            <>\r\n              <div className=\"timeline-periods\">\r\n                {timelinePeriods.map((period, index) => (\r\n                  <div \r\n                    key={`${period.label}-${index}`}\r\n                    className={`timeline-period ${selectedPeriod?.label === period.label ? 'active' : ''}`}\r\n                    onClick={() => handlePeriodClick(period)}\r\n                  >\r\n                    <div \r\n                      className=\"period-marker\"\r\n                      style={{ backgroundColor: getEraColor(period.era) }}\r\n                    />\r\n                    \r\n                    <div className=\"period-info\">\r\n                      <div className=\"period-label\">\r\n                        {period.label}\r\n                      </div>\r\n                      <div className=\"period-meta\">\r\n                        {period.locations?.length || 0} location{(period.locations?.length || 0) !== 1 ? 's' : ''}\r\n                        {period.era !== 'Unknown' && (\r\n                          <span className=\"era-indicator\"> ‚Ä¢ {period.era}</span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {selectedPeriod?.label === period.label && period.locations && (\r\n                      <div className=\"period-locations\">\r\n                        <h4>Heritage Sites from this Period</h4>\r\n                        <ul>\r\n                          {period.locations.map((location, locIndex) => (\r\n                            <li\r\n                              key={location.id || `${location.name}-${locIndex}`}\r\n                              className={`location-item ${selectedLocation?.id === location.id ? 'selected' : ''}`}\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleLocationClick(location);\r\n                              }}\r\n                            >\r\n                              <div className=\"location-info\">\r\n                                <div className=\"location-name\">{location.name}</div>\r\n                                {location.dynasty && (\r\n                                  <div className=\"location-dynasty\">\r\n                                    {location.dynasty}\r\n                                  </div>\r\n                                )}\r\n                                {location.category && (\r\n                                  <div className=\"location-category\">\r\n                                    {location.category}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <div \r\n                                className=\"dynasty-indicator\"\r\n                                style={{ backgroundColor: getDynastyColor(location.dynasty) }}\r\n                                title={location.dynasty || 'Unknown dynasty'}\r\n                              />\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Data source info */}\r\n              {(error || dataSource === 'frontend-fallback') && (\r\n                <div className=\"timeline-info\">\r\n                  <small>\r\n                    {dataSource === 'frontend-fallback' && '‚ö†Ô∏è Using fallback data processing'}\r\n                    {error && !timelinePeriods.length && '‚ùå Server connection failed'}\r\n                  </small>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {!isLoading && timelinePeriods.length === 0 && !error && (\r\n            <div className=\"timeline-empty\">\r\n              <div className=\"timeline-empty-icon\">üìÖ</div>\r\n              <div className=\"timeline-empty-text\">\r\n                No timeline data available\r\n              </div>\r\n              <button onClick={retryApiLoad} className=\"retry-button\">\r\n                Try Loading Again\r\n              </button>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Legend */}\r\n          {timelinePeriods.length > 0 && (\r\n            <div className=\"timeline-legend\">\r\n              <h4>Era Legend</h4>\r\n              <div className=\"legend-items\">\r\n                <div className=\"legend-item\">\r\n                  <div className=\"legend-color\" style={{ backgroundColor: '#3f51b5' }}></div>\r\n                  <span>Common Era (CE)</span>\r\n                </div>\r\n                <div className=\"legend-item\">\r\n                  <div className=\"legend-color\" style={{ backgroundColor: '#e91e63' }}></div>\r\n                  <span>Before Common Era (BCE)</span>\r\n                </div>\r\n                {timelinePeriods.some(p => p.era === 'Unknown') && (\r\n                  <div className=\"legend-item\">\r\n                    <div className=\"legend-color\" style={{ backgroundColor: '#757575' }}></div>\r\n                    <span>Unknown Period</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timeline;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}